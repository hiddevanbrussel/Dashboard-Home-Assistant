"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1740],{24219:(e,t,r)=>{r.d(t,{Ev:()=>ej,S4:()=>eM,uU:()=>k,vA:()=>eW,uK:()=>i,c_:()=>t4,IF:()=>ty,e_:()=>tC,j$:()=>eY,NH:()=>U,LG:()=>_,le:()=>tF,Gp:()=>tx,_l:()=>tL,$e:()=>ts,oW:()=>eD,M1:()=>t$,b5:()=>tT,kC:()=>e6,h9:()=>eQ,e0:()=>z,lu:()=>R,oz:()=>d,MW:()=>N,$F:()=>j.$,Hm:()=>tz,Kq:()=>tA,gO:()=>e8,z4:()=>te,qc:()=>tt,CY:()=>ej,j1:()=>tr,y:()=>eT,gu:()=>y,wU:()=>tq,Pm:()=>tP,ZN:()=>ej,Oo:()=>e1,Fy:()=>eG,Y$:()=>h});var n=r(95155),l=r(91065),a=r(64269);function i(e){let{title:t="Energy Usage",value:r=65,label:i="Medium",size:o="md",className:s}=e,u=Math.min(100,Math.max(0,null!=r?r:0));return(0,n.jsxs)(l.j,{className:(0,a.cn)("p-4","lg"===o&&"p-5","sm"===o&&"p-3",s),children:[(0,n.jsx)("h3",{className:"text-card-title font-medium mb-2",children:t}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2",children:[(0,n.jsxs)("span",{className:"text-2xl font-bold text-accent-yellow dark:text-accent-green",children:[u,"%"]}),(0,n.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:i})]}),(0,n.jsx)("div",{className:"h-3 w-full rounded-full bg-gray-200 dark:bg-white/10 overflow-hidden",children:(0,n.jsx)("div",{className:(0,a.cn)("h-full rounded-full transition-all duration-300","bg-gradient-to-r from-accent-yellow to-accent-green dark:from-accent-green dark:to-accent-yellow"),style:{width:"".concat(u,"%")}})})]})}var o=r(12115),s=r(47650),u=r(17666),c=r(93420);function d(e){var t,r;let{title:l="Light",entity_id:i,state:d="off",size:m="md",className:h}=e,b="on"===d,[f,x]=(0,o.useState)(!1),[g,p]=(0,o.useState)(!1),[w,v]=(0,o.useState)(0),y=(0,c.j)(e=>e.setStates),k=(0,c.j)(e=>e.getState(i)),N=Math.round((null!=(r=null==k||null==(t=k.attributes)?void 0:t.brightness)?r:0)/255*100),j=g?w:N;(0,o.useEffect)(()=>{v(N)},[N]);let C=(0,o.useCallback)(async()=>{let e=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(e)&&y(e)},[y]);async function P(e,t){x(!0);try{let r=await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:i,domain:"light",service:e,service_data:t})});if(r.ok)await C();else{let e=await r.json().catch(()=>({}));console.error("Light service failed:",e.error)}}finally{x(!1)}}function M(){p(!0)}async function S(e){e.preventDefault(),e.stopPropagation(),await P("toggle")}async function _(){await P(b?"turn_off":"turn_on",b?void 0:{brightness_pct:N||100})}let T=(0,o.useRef)(null);function A(e){v(e),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{P("turn_on",{brightness_pct:e}),T.current=null},120)}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{role:"button",tabIndex:0,onClick:M,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),M())},className:(0,a.cn)("flex w-full items-start gap-3 rounded-2xl text-left transition-all duration-300 ease-out focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#4D2FB2] cursor-pointer",b?"bg-white shadow-sm dark:bg-white":"bg-white/60 dark:bg-white/10 backdrop-blur-md","sm"===m&&"p-3","md"===m&&"p-4","lg"===m&&"p-5",h),"aria-label":"Open ".concat(l," controls"),children:[(0,n.jsx)("button",{type:"button",onClick:S,disabled:f,className:(0,a.cn)("flex shrink-0 items-center justify-center rounded-full transition-all duration-300 ease-out focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#4D2FB2] disabled:opacity-70",b?"":"bg-white/50 dark:bg-white/10 backdrop-blur-md","sm"===m&&"h-9 w-9","md"===m&&"h-10 w-10","lg"===m&&"h-11 w-11"),style:b?{backgroundColor:"#FFD41D"}:void 0,"aria-label":b?"Turn off ".concat(l):"Turn on ".concat(l),"aria-pressed":b,children:(0,n.jsx)(u.A,{className:(0,a.cn)({sm:"h-5 w-5",md:"h-6 w-6",lg:"h-7 w-7"}[m],"transition-colors duration-300 ease-out",b?"text-white":"text-[#FFD41D]"),strokeWidth:1.5,fill:b?"currentColor":"none"})}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("p",{className:(0,a.cn)("font-semibold truncate",b?"text-gray-900":"text-gray-900 dark:text-white","sm"===m&&"text-sm","md"===m&&"text-base","lg"===m&&"text-lg"),children:l}),(0,n.jsx)("p",{className:(0,a.cn)("font-medium","sm"===m&&"text-xs","md"===m&&"text-sm","lg"===m&&"text-base",b?"text-gray-700":"text-gray-500 dark:text-gray-400"),children:b?"On":"Off"})]})]}),g&&"undefined"!=typeof document&&(0,s.createPortal)((0,n.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/20 dark:bg-black/30 backdrop-blur-md transition-opacity duration-200 ease-out","aria-hidden":!0,onClick:()=>p(!1)}),(0,n.jsxs)("div",{className:"relative z-50 w-full max-w-sm rounded-2xl border-0 bg-gray-800 p-6 shadow-xl dark:bg-gray-900 transition-transform duration-300 ease-out",children:[(0,n.jsxs)("div",{className:"text-center mb-1",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-white truncate",children:l}),(0,n.jsxs)("p",{className:"text-sm text-white/80 mt-0.5",children:[j,"%"]})]}),(0,n.jsx)("div",{className:"flex flex-col items-center gap-4 mt-6",children:(0,n.jsx)("div",{className:"flex flex-col items-center gap-2 touch-none select-none",children:(0,n.jsxs)("div",{className:"relative w-24 h-56 flex flex-col items-center",style:{touchAction:"none"},children:[(0,n.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-16 h-52 rounded-full bg-gray-600 flex flex-col justify-end overflow-hidden pointer-events-none",children:(0,n.jsx)("div",{className:"w-full rounded-full bg-white min-h-0 shrink-0 will-change-[height]",style:{height:"".concat(j,"%"),transition:"height 0.2s ease-out"}})}),(0,n.jsx)("input",{type:"range",min:0,max:100,value:j,onInput:e=>A(Number(e.target.value)),onChange:e=>A(Number(e.target.value)),disabled:f,className:"absolute top-0 left-1/2 w-52 h-24 -translate-x-1/2 -rotate-90 origin-center opacity-0 cursor-ns-resize disabled:cursor-not-allowed",style:{pointerEvents:"auto"}}),(0,n.jsx)("button",{type:"button",onClick:_,disabled:f,className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex h-10 w-10 items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 rounded-full disabled:opacity-60 transition-opacity duration-300 ease-out","aria-label":b?"Turn off":"Turn on",children:(0,n.jsx)(u.A,{className:"h-6 w-6 text-[#FFD41D] transition-opacity duration-300 ease-out",strokeWidth:1.5,fill:"currentColor"})})]})})})]})]}),document.body)]})}var m=r(3166);function h(e){let{title:t="Wi-Fi",value:r="on",size:i="md",className:o}=e,s="on"===r;return(0,n.jsxs)(l.j,{className:(0,a.cn)("p-4 flex items-center justify-between","lg"===i&&"p-5","sm"===i&&"p-3",o),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(m.A,{className:(0,a.cn)("h-6 w-6 text-accent-orange dark:text-accent-green",!s&&"opacity-50 text-gray-400 dark:text-gray-500")}),(0,n.jsx)("h3",{className:"text-card-title font-medium",children:t})]}),(0,n.jsx)("button",{type:"button",role:"switch","aria-checked":s,className:(0,a.cn)("relative inline-flex h-6 w-11 shrink-0 rounded-full border-2 border-transparent transition-colors",s?"bg-accent-green dark:bg-accent-green":"bg-gray-300 dark:bg-white/20"),children:(0,n.jsx)("span",{className:(0,a.cn)("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition",s?"translate-x-5":"translate-x-1")})})]})}var b=r(26991),f=r(86790),x=r(47734),g=r(73697),p=r(23508),w=r(47643);let v=[{date:"Mon",value:8.2},{date:"Tue",value:10.1},{date:"Wed",value:12.4},{date:"Thu",value:9.8},{date:"Fri",value:11.2},{date:"Sat",value:14},{date:"Sun",value:12.4}];function y(e){let{title:t="Solar Charge Collected Today",value:r=12.4,unit:i="kWh",data:o=v,size:s="md",className:u}=e;return(0,n.jsxs)(l.j,{className:(0,a.cn)("p-4","lg"===s&&"p-5","sm"===s&&"p-3",u),children:[(0,n.jsx)("h3",{className:"text-card-title font-medium mb-2",children:t}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-accent-orange dark:text-accent-green mb-4",children:[r," ",i]}),(0,n.jsx)("div",{className:"h-32 w-full",children:(0,n.jsx)(b.u,{width:"100%",height:"100%",children:(0,n.jsxs)(f.b,{data:o,margin:{top:4,right:4,bottom:0,left:4},children:[(0,n.jsx)(x.W,{dataKey:"date",tick:{fontSize:10}}),(0,n.jsx)(g.h,{hide:!0}),(0,n.jsx)(p.m,{contentStyle:{borderRadius:12,border:"1px solid rgba(255,255,255,0.2)"},formatter:e=>["".concat(e," ").concat(i),"Value"]}),(0,n.jsx)(w.N,{type:"monotone",dataKey:"value",stroke:"var(--accent-orange)",strokeWidth:2,dot:{r:3}})]})})})]})}function k(e){let{title:t="Climate",value:r=23,unit:i="\xb0",state:o="heat",size:s="md",className:u}=e;return(0,n.jsxs)(l.j,{className:(0,a.cn)("p-4","lg"===s&&"p-5","sm"===s&&"p-3",u),children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,n.jsx)("h3",{className:"text-card-title font-medium",children:t}),(0,n.jsx)("button",{type:"button",role:"switch","aria-checked":!1,"aria-label":"Toggle",className:"relative inline-flex h-6 w-11 shrink-0 rounded-full bg-accent-green dark:bg-accent-green border-2 border-transparent"})]}),(0,n.jsxs)("p",{className:"text-metric font-bold text-center text-accent-orange dark:text-accent-green my-4",children:[r,i]}),(0,n.jsx)("div",{className:"flex gap-1 justify-center text-xs text-gray-500 dark:text-gray-400",children:["6h","12h","18h","24h"].map(e=>(0,n.jsx)("span",{className:"px-2 py-1 rounded bg-white/5",children:e},e))})]})}function N(e){let{title:t="Lighting Brightness",value:r=70,size:i="md",className:o}=e,s=Math.min(100,Math.max(0,null!=r?r:0)),u=-90+s/100*180;return(0,n.jsxs)(l.j,{className:(0,a.cn)("p-4","lg"===i&&"p-5","sm"===i&&"p-3",o),children:[(0,n.jsx)("h3",{className:"text-card-title font-medium mb-4 text-center",children:t}),(0,n.jsxs)("div",{className:"relative w-32 h-24 mx-auto",children:[(0,n.jsxs)("svg",{viewBox:"0 0 100 60",className:"w-full h-full","aria-hidden":!0,children:[(0,n.jsx)("path",{d:"M 10 50 A 40 40 0 0 1 90 50",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-gray-200 dark:text-white/10"}),(0,n.jsx)("path",{d:"M 10 50 A 40 40 0 0 1 90 50",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeLinecap:"round",className:"text-accent-yellow dark:text-accent-green",strokeDasharray:"".concat(s/100*125.6," 125.6")}),(0,n.jsx)("line",{x1:"50",y1:"50",x2:"50",y2:"18",stroke:"currentColor",strokeWidth:"3",className:"text-accent-orange",transform:"rotate(".concat(u," 50 50)")})]}),(0,n.jsxs)("p",{className:"text-center text-xl font-bold text-accent-yellow dark:text-accent-green mt-1",children:[s,"%"]})]})]})}var j=r(25329);function C(e,t){let r=16*Math.round(e.left/16),n=16*Math.round(e.bottom/16);if(null!=t){var l,a;let e=null!=(l=t.minLeft)?l:0,i=null!=(a=t.minBottom)?a:0;r=Math.max(e,Math.min(r,t.maxLeft)),n=Math.max(i,Math.min(n,t.maxBottom))}return{left:r,bottom:n}}let P="dashboard.floatingMediaCardPosition";function M(){try{let e=localStorage.getItem(P);if(!e)return null;let t=JSON.parse(e);if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.bottom))return{left:t.left,bottom:t.bottom};if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.top))return{left:t.left,bottom:window.innerHeight-t.top-200}}catch(e){}return null}function S(e){try{localStorage.setItem(P,JSON.stringify(e))}catch(e){}}function _(e){let{title:t,entity_id:r,editMode:l=!1,onRemove:i,onEdit:s,onEnterEditMode:u}=e,[c,d]=(0,o.useState)(()=>{var e;return null!=(e=M())?e:{left:0,bottom:0}}),[m,h]=(0,o.useState)(!1),[b,f]=(0,o.useState)(!1),x=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),g=(0,o.useRef)(!1),p=(0,o.useRef)(null),w=(0,o.useCallback)(()=>{null!=p.current&&(clearTimeout(p.current),p.current=null)},[]),v=(0,o.useCallback)(e=>{var t,r;!l&&u&&(w(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),p.current=setTimeout(()=>{p.current=null,u()},500))},[l,u,w]),y=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),w()},[w]);(0,o.useEffect)(()=>{if(g.current)return;g.current=!0;let e={maxLeft:window.innerWidth-320,maxBottom:window.innerHeight-120},t=M();if(t)return void d(C(t,e));let r=C({left:(window.innerWidth-320)/2,bottom:(window.innerHeight-120)/2},e);d(r),S(r)},[]);let k=(0,o.useCallback)(e=>{var t,r,n,a;l&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),h(!0),x.current={x:e.clientX,y:e.clientY,left:c.left,bottom:c.bottom},null==(n=(a=e.currentTarget).setPointerCapture)||n.call(a,e.pointerId)))},[c,l]),N=(0,o.useCallback)(e=>{if(!m)return;let t=e.clientX-x.current.x,r=e.clientY-x.current.y,n=window.innerWidth-320,l=window.innerHeight-120;d(C({left:Math.max(0,Math.min(x.current.left+t,n)),bottom:Math.max(0,Math.min(x.current.bottom-r,l))},{maxLeft:n,maxBottom:l}))},[m]),P=(0,o.useCallback)(e=>{var t,r;if(m){h(!1);let t=e.clientX-x.current.x,r=e.clientY-x.current.y,n=window.innerWidth-320,l=window.innerHeight-120,a=C({left:Math.max(0,Math.min(x.current.left+t,n)),bottom:Math.max(0,Math.min(x.current.bottom-r,l))},{maxLeft:n,maxBottom:l});d(a),S(a)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[m]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed w-[320px] shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",b?"z-50":"z-40",l&&"cursor-grab touch-none active:cursor-grabbing",l&&!m&&"animate-edit-wiggle"),style:{left:c.left,bottom:c.bottom,...!l&&u?{touchAction:"none"}:{}},...!l&&u&&{onPointerDown:v,onPointerUp:y,onPointerLeave:y,onPointerCancel:y},...l&&{onPointerDown:k,onPointerMove:N,onPointerUp:P,onPointerLeave:e=>{m&&P(e)},onPointerCancel:P},children:(0,n.jsx)("div",{className:(0,a.cn)(l&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(j.$,{title:t,entity_id:r,size:"md",onMoreClick:l?s:void 0,onExpandedChange:f})})})}var T=r(9657),A=r(17539),I=r(80713),H=r(96522),D=r(60015),L=r(80678),W=r(20017);let O={lightbulb:u.A,spotlight:T.A,lamp:T.A,"lamp-ceiling":A.A,"lamp-desk":I.A,"lamp-floor":H.A,"lamp-wall-down":D.A,"lamp-wall-up":L.A},z=["lightbulb","spotlight","lamp","lamp-ceiling","lamp-desk","lamp-floor","lamp-wall-down","lamp-wall-up"];function R(e){var t,r,l,i,d;let{title:m="Lamp",entity_id:h,icon:b="lightbulb",size:f="md",className:x,onMoreClick:g}=e,p=(0,c.j)(e=>e.getState(h)),w=(0,c.j)(e=>e.setStates),v=(0,c.j)(e=>e.updateEntityState),[y,k]=(0,o.useState)(!1),[N,j]=(0,o.useState)(!1),[C,P]=(0,o.useState)(100),M=(0,o.useRef)(null),[S,_]=(0,o.useState)(null),T=(0,o.useRef)(null),A=(null==p?void 0:p.state)==="on",I=null!=S?S:+!!A,H=Math.round((null!=(l=null==p||null==(t=p.attributes)?void 0:t.brightness)?l:255)/255*100),D=(1&(null!=(i=null==p||null==(r=p.attributes)?void 0:r.supported_features)?i:0))!=0;(0,o.useEffect)(()=>{P(H)},[H]);let L=(0,o.useCallback)(async()=>{let e=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(e)&&w(e)},[w]);async function z(e,t){k(!0);try{(await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:h,domain:"light",service:e,service_data:t})})).ok&&await L()}finally{k(!1)}}function R(){let e=!A;v(h,{state:e?"on":"off"}),z(e?"turn_on":"turn_off",e?{brightness_pct:H||100}:void 0)}function Y(e){P(e),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{z("turn_on",{brightness_pct:e}),M.current=null},80)}(0,o.useEffect)(()=>()=>{M.current&&clearTimeout(M.current)},[]);let X=null!=(d=O[b])?d:u.A,F=A?D?"".concat(H,"%"):"Aan":"Uit";return(0,n.jsxs)("div",{className:(0,a.cn)("flex w-full flex-col overflow-hidden rounded-2xl transition-colors duration-200","sm"===f&&"text-sm","md"===f&&"text-base","lg"===f&&"text-lg",A?"text-gray-900":"text-gray-800 dark:text-gray-200 opacity-95",x),children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 px-4 py-3",children:[(0,n.jsx)("button",{type:"button",onClick:R,disabled:y,className:"flex shrink-0 items-center justify-center rounded-full transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400 focus-visible:ring-offset-2 disabled:opacity-70 h-10 w-10","aria-label":A?"Lamp uitzetten":"Lamp aanzetten",children:(0,n.jsx)("div",{className:(0,a.cn)("flex h-10 w-10 items-center justify-center rounded-full transition-all duration-200",A?"bg-[#FFD41D] shadow-sm":"bg-white/30 dark:bg-white/10 shadow-inner"),"aria-hidden":!0,children:(0,n.jsx)(X,{className:(0,a.cn)("h-5 w-5 shrink-0 transition-colors",A?"text-white drop-shadow":"text-gray-500 dark:text-gray-400"),strokeWidth:1.5,fill:A?"currentColor":"none","aria-hidden":!0})})}),(0,n.jsx)("button",{type:"button",onClick:()=>j(!0),className:"flex flex-1 min-w-0 items-center gap-2 text-left rounded-xl cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400 focus-visible:ring-offset-2 hover:bg-black/5 dark:hover:bg-white/5 active:bg-black/10 dark:active:bg-white/10 -mx-1 px-1 py-0.5 transition-colors","aria-label":"Verlichting bedienen",children:(0,n.jsxs)("div",{className:"min-w-0 flex-1 flex flex-col justify-center",children:[(0,n.jsx)("p",{className:"font-medium truncate text-inherit",children:m}),(0,n.jsx)("p",{className:(0,a.cn)("text-xs truncate",A?"text-gray-600":"text-gray-500 dark:text-gray-400"),children:F})]})}),g&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),g()},className:"p-1.5 rounded-lg shrink-0 text-inherit opacity-70 hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/5 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})})]}),N&&"undefined"!=typeof document&&(0,s.createPortal)((0,n.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,n.jsx)("button",{type:"button",className:"absolute inset-0 z-[100] bg-black/40 dark:bg-black/50 backdrop-blur-md cursor-pointer","aria-label":"Modal sluiten",onClick:()=>j(!1)}),(0,n.jsx)("div",{className:(0,a.cn)("relative z-[101] w-full max-w-sm p-5 flex flex-col items-center text-center",A&&D?"min-h-[420px]":"min-h-[380px]"),onClick:e=>e.stopPropagation(),children:A&&D?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:m}),(0,n.jsxs)("p",{className:"text-sm text-gray-300 mb-6",children:[C,"%"]}),(0,n.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,n.jsxs)("div",{className:"relative flex flex-col items-center w-20 h-64",children:[(0,n.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-16 h-64 rounded-2xl bg-gray-700/80 dark:bg-gray-800/80 flex flex-col justify-end overflow-hidden",children:(0,n.jsx)("div",{className:"w-full rounded-b-2xl bg-[#FFD41D] min-h-0 transition-[height] duration-150 ease-out",style:{height:"".concat(C,"%")}})}),(0,n.jsx)("input",{type:"range",min:0,max:100,value:C,onChange:e=>Y(Number(e.target.value)),onInput:e=>Y(Number(e.target.value)),disabled:y,className:"absolute top-1/2 left-1/2 w-64 h-20 -translate-x-1/2 -translate-y-1/2 cursor-ns-resize opacity-0 [&::-webkit-slider-thumb]:cursor-ns-resize",style:{transform:"translate(-50%, -50%) rotate(-90deg)"},"aria-label":"Helderheid"}),(0,n.jsx)("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 pointer-events-none flex items-center justify-center w-10 h-10 rounded-full bg-amber-400/40",children:(0,n.jsx)(X,{className:"h-5 w-5 text-white drop-shadow",strokeWidth:1.5,fill:"currentColor","aria-hidden":!0})})]})})]}):D?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:m}),(0,n.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:A?"Aan":"Uit"}),(0,n.jsxs)("div",{className:"flex gap-3 w-full max-w-xs mx-auto",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{A||R(),j(!1)},disabled:y,className:(0,a.cn)("flex-1 rounded-xl py-3 px-4 text-sm font-medium transition-colors",A?"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300":"bg-[#FFD41D] text-gray-900 hover:opacity-90"),children:"Aan"}),(0,n.jsx)("button",{type:"button",onClick:()=>{A&&R(),j(!1)},disabled:y,className:(0,a.cn)("flex-1 rounded-xl py-3 px-4 text-sm font-medium transition-colors",A?"bg-gray-800 text-white dark:bg-gray-600 dark:text-white hover:opacity-90":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"),children:"Uit"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:m}),(0,n.jsx)("p",{className:"text-sm text-gray-300 mb-6",children:A?"Aan":"Uit"}),(0,n.jsx)("div",{className:"flex flex-col items-center rounded-3xl bg-gradient-to-br from-gray-600/60 to-gray-700/80 dark:from-gray-800/70 dark:to-gray-900/90 pt-3 pb-4 w-[100px]",style:{height:228},children:(0,n.jsxs)("div",{className:"relative w-[100px] flex flex-col justify-end select-none shrink-0",style:{height:200,paddingBottom:72,touchAction:"none"},onPointerDown:e=>{var t,r;y||(e.preventDefault(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),T.current={y:e.clientY,position:I},_(I))},onPointerMove:e=>{if(null==T.current)return;e.preventDefault();let t=T.current.y-e.clientY;_(Math.max(0,Math.min(1,T.current.position+t/72)))},onPointerUp:e=>{var t,r;if(null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),null!=T.current){if(Math.abs(I-T.current.position)>.15){let e=I>.5;e!==A&&(v(h,{state:e?"on":"off"}),z(e?"turn_on":"turn_off",e?{brightness_pct:100}:void 0))}else R();T.current=null,_(null)}},onPointerCancel:e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),T.current=null,_(null)},children:[(0,n.jsx)("div",{className:"absolute left-0 right-0 bottom-0 flex items-center justify-center pointer-events-none",style:{height:72},"aria-hidden":!0}),(0,n.jsx)("button",{type:"button",disabled:y,className:(0,a.cn)("absolute left-1/2 -translate-x-1/2 w-20 h-[131px] rounded-xl flex items-center justify-center shadow-lg select-none touch-none","transition-colors duration-200 disabled:opacity-70",I>.5?"bg-[#FFD41D]":"bg-gray-600/80 dark:bg-gray-700/80"),style:{bottom:72,transform:"translate(-50%, ".concat((1-I)*72,"px)"),transition:null!=S?"none":"transform 0.15s ease-out"},"aria-label":I>.5?"Lamp uitzetten":"Lamp aanzetten",children:(0,n.jsx)(X,{className:(0,a.cn)("h-9 w-9 shrink-0 transition-colors",I>.5?"text-white drop-shadow":"text-white/70"),strokeWidth:1.5,fill:I>.5?"currentColor":"none","aria-hidden":!0})})]})})]})})]}),document.body),A&&D&&(0,n.jsxs)("div",{className:"px-4 pb-3 pt-0 flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-600 shrink-0 w-10",children:"Helderheid"}),(0,n.jsx)("input",{type:"range",min:0,max:100,value:C,onChange:e=>Y(Number(e.target.value)),disabled:y,className:"flex-1 h-2 rounded-full appearance-none bg-gray-200 dark:bg-gray-300 accent-amber-500 disabled:opacity-50","aria-label":"Helderheid"}),(0,n.jsxs)("span",{className:"text-xs tabular-nums text-gray-600 dark:text-gray-700 w-8",children:[C,"%"]})]})]})}let Y="dashboard.floatingLightCardPosition.";function X(e){try{let t=localStorage.getItem(Y+e);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-200}}catch(e){}return null}function F(e,t){try{localStorage.setItem(Y+e,JSON.stringify(t))}catch(e){}}function U(e){let{widget:t,widgetIndex:r=0,editMode:l=!1,onRemove:i,onEdit:s,onEnterEditMode:u}=e,d=(0,c.j)(e=>e.getState(t.entity_id)),m=(null==d?void 0:d.state)==="on",[h,b]=(0,o.useState)(()=>{var e;return null!=(e=X(t.id))?e:{left:0,bottom:24}}),[f,x]=(0,o.useState)(!1),g=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),p=(0,o.useRef)(!1),w=(0,o.useRef)(!1),v=(0,o.useRef)(null),y=(0,o.useCallback)(()=>{null!=v.current&&(clearTimeout(v.current),v.current=null)},[]),k=(0,o.useCallback)(e=>{var t,r,n,a;if(l||!u)return;let i=e.target;null!=(a=null==i||null==(t=i.closest)?void 0:t.call(i,"button"))&&a||(y(),null==(r=(n=e.currentTarget).setPointerCapture)||r.call(n,e.pointerId),v.current=setTimeout(()=>{v.current=null,u()},500))},[l,u,y]),N=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),y()},[y]);(0,o.useEffect)(()=>{if(w.current)return;w.current=!0;let e={maxLeft:window.innerWidth-240,maxBottom:window.innerHeight-120},r=X(t.id);if(r)return void b(C(r,e));let n=C({left:(window.innerWidth-240)/2,bottom:(window.innerHeight-120)/2},e);b(n),F(t.id,n)},[240,t.id,r]);let j=(0,o.useCallback)(e=>{var t,r;l&&(p.current=!0,g.current={x:e.clientX,y:e.clientY,left:h.left,bottom:h.bottom},null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId))},[h,l]),P=window.innerWidth-240,M=(0,o.useCallback)(e=>{if(!p.current)return;if(!f){let t=e.clientX-g.current.x,r=e.clientY-g.current.y;if(!(Math.abs(t)>6||Math.abs(r)>6))return;e.preventDefault(),x(!0)}let t=e.clientX-g.current.x,r=e.clientY-g.current.y,n=window.innerHeight-120;b(C({left:Math.max(0,Math.min(g.current.left+t,P)),bottom:Math.max(0,Math.min(g.current.bottom-r,n))},{maxLeft:P,maxBottom:n}))},[f,P]),S=(0,o.useCallback)(e=>{var r,n;if(p.current=!1,f){e.preventDefault(),x(!1);let r=e.clientX-g.current.x,n=e.clientY-g.current.y,l=window.innerHeight-120,a=C({left:Math.max(0,Math.min(g.current.left+r,P)),bottom:Math.max(0,Math.min(g.current.bottom-n,l))},{maxLeft:P,maxBottom:l});b(a),F(t.id,a)}null==(r=(n=e.currentTarget).releasePointerCapture)||r.call(n,e.pointerId)},[f,P,t.id]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden backdrop-blur-2xl border flex transition-colors duration-200",m?"bg-white/25 dark:bg-black/60 border-white/30 dark:border-white/15":"bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10",l&&"cursor-grab touch-none active:cursor-grabbing",l&&!f&&"animate-edit-wiggle"),style:{left:h.left,bottom:h.bottom,width:240,...!l&&u?{touchAction:"none"}:{}},...!l&&u&&{onPointerDown:k,onPointerUp:N,onPointerLeave:N,onPointerCancel:N},...l&&{onPointerDown:j,onPointerMove:M,onPointerUp:S,onPointerLeave:e=>{p.current=!1,f&&S(e)},onPointerCancel:S},children:(0,n.jsx)("div",{className:"shrink-0 flex flex-col",style:{width:240},children:(0,n.jsx)("div",{className:(0,a.cn)(l&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(R,{title:t.title,entity_id:t.entity_id,icon:t.icon,size:"md",onMoreClick:s})})})})}var J=r(32893),B=r(8198),E=r(52952),q=r(34157),K=r(16253),G=r(70968),V=r(7125),$=r(6191),Z=r(24033),Q=r(50906),ee=r(95174),et=r(4480),er=r(78192),en=r(16140),el=r(19408),ea=r(24947),ei=r(99051),eo=r(46705),es=r(46858),eu=r(57828),ec=r(97703),ed=r(80598),em=r(38797),eh=r(65993),eb=r(53873),ef=r(29416),ex=r(95740),eg=r(39347),ep=r(59427),ew=r(53656),ev=r(71360),ey=r(41896),ek=r(56154);let eN={Activity:Q.A,Bath:ee.A,BedDouble:et.A,Bot:er.A,Box:en.A,Building2:el.A,Car:ea.A,Circle:ei.A,CircleDot:eo.A,DoorOpen:es.A,Droplets:G.A,Eye:eu.A,Fuel:ec.A,Gauge:ed.A,GaugeCircle:em.A,Home:eh.A,Lamp:T.A,Lightbulb:u.A,Shirt:eb.A,Sofa:ef.A,Sparkles:ex.A,Star:eg.A,Sun:ep.A,Thermometer:J.A,TreePine:ew.A,Trash2:ev.A,UtensilsCrossed:ey.A,Wind:q.A,Zap:ek.A},ej=Object.keys(eN).sort(),eC=[{mode:"auto",label:"Auto",icon:J.A},{mode:"heat",label:"Verwarmen",icon:B.A},{mode:"off",label:"Uit",icon:E.A},{mode:"fan_only",label:"Wind",icon:q.A},{mode:"cool",label:"Koelen",icon:K.A}],eP={idle:"Idle",heating:"Verwarmen…",cooling:"Koelen…",off:"Uit",heat:"Verwarmen",cool:"Koelen",auto:"Auto",dry:"Droog",fan_only:"Ventilator",unknown:"—"};function eM(e){var t,r,l,i,u,d,m,h,b,f,x,g,p,w,v,y,k;let{title:N="Air Conditioner",entity_id:j,humidity_entity_id:C,icon:P,size:M="md",className:S,onMoreClick:_}=e,T=P&&eN[P]?eN[P]:J.A,A=(0,c.j)(e=>e.getState(j)),I=(0,c.j)(e=>C?e.getState(C):null),H=(0,c.j)(e=>e.setStates),[D,L]=(0,o.useState)(!1),[O,z]=(0,o.useState)(!1),R=(0,o.useRef)(null),[Y,X]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(!O||!R.current)return void X(null);let e=R.current.getBoundingClientRect();X({top:e.bottom+4,left:e.left,width:e.width})},[O]);let F=Number(null==A||null==(t=A.attributes)?void 0:t.current_temperature)||void 0,U=null!=(x=null!=(f=Number(null==A||null==(r=A.attributes)?void 0:r.temperature))?f:Number(null==A||null==(l=A.attributes)?void 0:l.target_temp_high))?x:void 0,B=Number(null==A||null==(i=A.attributes)?void 0:i.min_temp)||5,E=Number(null==A||null==(u=A.attributes)?void 0:u.max_temp)||35,q=null!=(g=null==A||null==(d=A.attributes)?void 0:d.hvac_modes)?g:[],K=null!=(p=null==A?void 0:A.state)?p:"",Q=null==A||null==(m=A.attributes)?void 0:m.hvac_mode,ee=null!=(w=null!=Q?Q:({heating:"heat",cooling:"cool",heat:"heat",cool:"cool",off:"off",auto:"auto",idle:"auto",dry:"dry",fan_only:"fan_only"})[K])?w:K,et=ee&&q.includes(ee)?ee:null!=(v=q[0])?v:null,er="off"===K||!K,en=null!=(y=null!=U?U:F)?y:20,el=(0,o.useCallback)(async e=>{let t=Math.min(E,Math.max(B,Math.round(2*e)/2));L(!0);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:j,domain:"climate",service:"set_temperature",service_data:{temperature:t}})})).ok){let e=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(e)&&H(e)}}finally{L(!1)}},[j,E,B,H]);async function ea(e){L(!0);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:j,domain:"climate",service:"set_hvac_mode",service_data:{hvac_mode:e}})})).ok){let e=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(e)&&H(e)}}finally{L(!1)}}async function ei(e){L(!0);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:j,domain:"climate",service:e?"turn_on":"turn_off"})})).ok){let e=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(e)&&H(e)}}finally{L(!1)}}let eo=eC.filter(e=>q.includes(e.mode));if(eo.length<q.length){let e=new Set(eo.map(e=>e.mode));eo.push(...q.filter(t=>!e.has(t)).map(e=>{var t;return{mode:e,label:null!=(t=eP[e])?t:(0,a.N)(e),icon:J.A}}))}let es=null!=(k=null==A||null==(h=A.attributes)?void 0:h.friendly_name)?k:j,eu=(null==A||null==(b=A.attributes)?void 0:b.humidity)!=null?Number(A.attributes.humidity):void 0,ec=(null==I?void 0:I.state)!=null&&"unavailable"!==I.state?Number(I.state):void 0,ed=null!=ec?ec:eu,em=null!=ed&&!Number.isNaN(ed);return(0,n.jsxs)("div",{className:(0,a.cn)("flex w-full flex-col overflow-hidden rounded-2xl bg-white/15 dark:bg-black/50 text-gray-900 dark:text-white shadow-xl backdrop-blur-2xl border border-white/30 dark:border-white/10","sm"===M&&"text-sm","md"===M&&"text-base","lg"===M&&"text-lg",S),children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 py-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/20 dark:bg-white/10",children:(0,n.jsx)(T,{className:"h-5 w-5 text-amber-600 dark:text-amber-400","aria-hidden":!0})}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("p",{className:"font-medium truncate text-gray-900 dark:text-white/90",children:N}),(0,n.jsx)("p",{className:"text-xs text-gray-500 dark:text-white/60 truncate",children:es})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[em&&(0,n.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-white/90",title:"Luchtvochtigheid",children:[(0,n.jsx)(G.A,{className:"h-4 w-4","aria-hidden":!0}),(0,n.jsxs)("span",{className:"text-sm tabular-nums",children:[Math.round(ed),"%"]})]}),_&&(0,n.jsx)("button",{type:"button",onClick:_,className:"p-1.5 rounded-lg text-gray-500 hover:bg-white/20 dark:text-gray-400 dark:hover:bg-white/10","aria-label":"More options",children:(0,n.jsx)(W.A,{className:"h-5 w-5"})})]})]}),(0,n.jsxs)("div",{className:"px-4 py-3 flex items-center justify-center gap-4",children:[(0,n.jsx)("button",{type:"button",onClick:()=>el(en-.5),disabled:D||er||en<=B,className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-gray-200/60 dark:bg-white/10 text-gray-700 dark:text-white hover:bg-gray-300/60 dark:hover:bg-white/20 disabled:opacity-40 disabled:pointer-events-none transition-colors","aria-label":"Temperatuur verlagen",children:(0,n.jsx)(V.A,{className:"h-6 w-6"})}),(0,n.jsx)("p",{className:"text-5xl font-bold tabular-nums text-gray-900 dark:text-white min-w-[4.5rem] text-center",children:function(e){if(null==e||Number.isNaN(e))return"—";let t=Math.round(2*e)/2;return t%1==.5?"".concat(t,"\xb0"):"".concat(Math.round(t),"\xb0")}(en)}),(0,n.jsx)("button",{type:"button",onClick:()=>el(en+.5),disabled:D||er||en>=E,className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-gray-200/60 dark:bg-white/10 text-gray-700 dark:text-white hover:bg-gray-300/60 dark:hover:bg-white/20 disabled:opacity-40 disabled:pointer-events-none transition-colors","aria-label":"Temperatuur verhogen",children:(0,n.jsx)($.A,{className:"h-6 w-6"})})]}),eo.length>0&&(()=>{var e;let t=er?"off":et,r=null!=(e=eo.find(e=>e.mode===t))?e:eo[0],l=eo.filter(e=>e.mode!==t),i=eC.find(e=>"off"===e.mode),o="off"===t?l:[...l,...i&&!l.some(e=>"off"===e.mode)?[i]:[]],u=o.length>0;return(0,n.jsxs)("div",{className:"px-4 pb-4 pt-1 relative",children:[(0,n.jsx)("button",{ref:R,type:"button",onClick:()=>z(e=>!e),disabled:D||!u,"aria-expanded":O,"aria-haspopup":"listbox",className:(0,a.cn)("w-full flex items-center justify-center gap-2 rounded-xl py-2.5 px-3 text-sm font-medium transition-colors disabled:opacity-50","bg-gray-200/60 dark:bg-white/10 text-gray-800 dark:text-white hover:bg-gray-300/60 dark:hover:bg-white/20"),children:(()=>{let e=r.icon;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e,{className:"h-4 w-4 shrink-0","aria-hidden":!0}),(0,n.jsx)("span",{className:"truncate",children:r.label}),(0,n.jsx)(Z.A,{className:(0,a.cn)("h-4 w-4 shrink-0 transition-transform",O&&"rotate-180"),"aria-hidden":!0})]})})()}),O&&u&&Y&&"undefined"!=typeof document&&(0,s.createPortal)((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"fixed inset-0 z-[100]","aria-hidden":!0,onClick:()=>z(!1)}),(0,n.jsx)("ul",{role:"listbox",className:"fixed z-[101] rounded-xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/50 dark:backdrop-blur-xl shadow-lg py-1 max-h-48 overflow-auto",style:{top:Y.top,left:Y.left,width:Y.width},children:o.map(e=>{let{mode:t,label:r,icon:l}=e;return(0,n.jsx)("li",{role:"option","aria-selected":t===(er?"off":et),children:(0,n.jsxs)("button",{type:"button",onClick:()=>{"off"===t?ei(!1):ea(t),z(!1)},disabled:D,className:"w-full flex items-center gap-2 rounded-lg py-2 px-3 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors disabled:opacity-50",children:[(0,n.jsx)(l,{className:"h-4 w-4 shrink-0","aria-hidden":!0}),r]})},t)})})]}),document.body)]})})()]})}function eS(e,t){if(null==e||Number.isNaN(e))return"—";let r=Math.round(10*e)/10;return t?"".concat(r," ").concat(t):String(r)}function e_(e){var t,r,n,l;let a=(0,c.j)(t=>t.getState(e)),i=null==a?void 0:a.state,o=null!=i&&"unavailable"!==i&&"unknown"!==i?Number(i):void 0;return{value:o,unit:null!=(n=null==a||null==(t=a.attributes)?void 0:t.unit_of_measurement)?n:"W",friendlyName:null!=(l=null==a||null==(r=a.attributes)?void 0:r.friendly_name)?l:e}}function eT(e){let{title:t="Zonnepanelen",entity_id:r,consumption_entity_id:l,size:i="md",className:o,onMoreClick:s}=e,u=e_(r),c=e_(null!=l?l:"");return(0,n.jsxs)("div",{className:(0,a.cn)("flex w-full flex-col overflow-hidden rounded-2xl bg-white/10 dark:bg-black/50 text-white shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10","sm"===i&&"text-sm","md"===i&&"text-base","lg"===i&&"text-lg",o),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3",children:[(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("p",{className:"font-medium truncate text-white/90",children:t}),(0,n.jsx)("p",{className:"text-xs text-white/60 truncate",children:u.friendlyName})]}),s&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),s()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})})]}),(0,n.jsxs)("div",{className:"px-4 pb-4 pt-0 space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-white/60 mb-0.5",children:"Yield"}),(0,n.jsx)("p",{className:"text-xl font-bold tabular-nums text-amber-400/95",children:eS(u.value,u.unit)})]}),l&&(0,n.jsxs)("div",{className:"pt-2 border-t border-white/10",children:[(0,n.jsx)("p",{className:"text-xs text-white/60 mb-0.5",children:"Consumption"}),(0,n.jsx)("p",{className:"text-xl font-bold tabular-nums text-white/95",children:eS(c.value,c.unit)})]})]})]})}let eA="dashboard.floatingSolarCardPosition";function eI(){try{let e=localStorage.getItem(eA);if(!e)return null;let t=JSON.parse(e);if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.bottom))return{left:t.left,bottom:t.bottom};if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.top))return{left:t.left,bottom:window.innerHeight-t.top-200}}catch(e){}return null}function eH(e){try{localStorage.setItem(eA,JSON.stringify(e))}catch(e){}}function eD(e){let{title:t,entity_id:r,consumption_entity_id:l,editMode:i=!1,onRemove:s,onEdit:u,onEnterEditMode:c}=e,[d,m]=(0,o.useState)(()=>{var e;return null!=(e=eI())?e:{left:0,bottom:0}}),[h,b]=(0,o.useState)(!1),f=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),x=(0,o.useRef)(!1),g=(0,o.useRef)(null),p=(0,o.useCallback)(()=>{null!=g.current&&(clearTimeout(g.current),g.current=null)},[]),w=(0,o.useCallback)(e=>{var t,r;!i&&c&&(p(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),g.current=setTimeout(()=>{g.current=null,c()},500))},[i,c,p]),v=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),p()},[p]);(0,o.useEffect)(()=>{if(x.current)return;x.current=!0;let e={maxLeft:window.innerWidth-320,maxBottom:window.innerHeight-120},t=eI();if(t)return void m(C(t,e));let r=C({left:(window.innerWidth-320)/2,bottom:(window.innerHeight-120)/2},e);m(r),eH(r)},[]);let y=(0,o.useCallback)(e=>{var t,r,n,l;i&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),b(!0),f.current={x:e.clientX,y:e.clientY,left:d.left,bottom:d.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[d,i]),k=(0,o.useCallback)(e=>{if(!h)return;let t=e.clientX-f.current.x,r=e.clientY-f.current.y,n=window.innerWidth-320,l=window.innerHeight-120;m(C({left:Math.max(0,Math.min(f.current.left+t,n)),bottom:Math.max(0,Math.min(f.current.bottom-r,l))},{maxLeft:n,maxBottom:l}))},[h]),N=(0,o.useCallback)(e=>{var t,r;if(h){b(!1);let t=e.clientX-f.current.x,r=e.clientY-f.current.y,n=window.innerWidth-320,l=window.innerHeight-120,a=C({left:Math.max(0,Math.min(f.current.left+t,n)),bottom:Math.max(0,Math.min(f.current.bottom-r,l))},{maxLeft:n,maxBottom:l});m(a),eH(a)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[h]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 w-[320px] shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",i&&"cursor-grab touch-none active:cursor-grabbing",i&&!h&&"animate-edit-wiggle"),style:{left:d.left,bottom:d.bottom,...!i&&c?{touchAction:"none"}:{}},...!i&&c&&{onPointerDown:w,onPointerUp:v,onPointerLeave:v,onPointerCancel:v},...i&&{onPointerDown:y,onPointerMove:k,onPointerUp:N,onPointerLeave:e=>{h&&N(e)},onPointerCancel:N},children:(0,n.jsx)("div",{className:(0,a.cn)(i&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(eT,{title:t,entity_id:r,consumption_entity_id:l,size:"md",onMoreClick:i?u:void 0})})})}var eL=r(38876);function eW(e){let{title:t="Afbeeldingskaart",entity_id:r,background_image:l,background_image_dark:i,image_conditions:o,minimal:s=!1,size:u="md",className:d,onMoreClick:m}=e,{resolved:h}=(0,eL.C)(),b="dark"===h,f=(0,c.j)(e=>r?e.states[r]:void 0);(0,c.j)(e=>e.updatedAt);let x=null==f?void 0:f.state,g=r&&(null==o?void 0:o.length)?function(e,t){if(null==e||"unavailable"===e||"unknown"===e||!(null==t?void 0:t.length))return null;let r=Number(e),n=!Number.isNaN(r);for(let a of t){var l;let t=a.value.trim();if(!t||!(null==(l=a.image)?void 0:l.trim()))continue;let i=Number(t),o=""!==t&&!Number.isNaN(i);if(n&&o)switch(a.operator){case"gt":if(r>i)return a;break;case"gte":if(r>=i)return a;break;case"lt":if(r<i)return a;break;case"lte":if(r<=i)return a;break;case"eq":if(r===i)return a;break;case"neq":if(r!==i)return a}else{let l=String(e).toLowerCase(),s=t.toLowerCase();switch(a.operator){case"eq":if(l===s)return a;break;case"neq":if(l!==s)return a;break;case"contains":if(l.includes(s)||s.includes(l))return a;break;case"gt":case"gte":case"lt":case"lte":if(n&&o&&("gt"===a.operator&&r>i||"gte"===a.operator&&r>=i||"lt"===a.operator&&r<i||"lte"===a.operator&&r<=i))return a}}}return null}(x,o):null,p=g?b&&g.image_dark?g.image_dark:g.image:null,w=null!=p?p:b&&i?i:l;return(0,n.jsxs)("div",{className:(0,a.cn)("relative flex w-full min-h-[200px] flex-col overflow-hidden rounded-2xl text-white",!s&&"shadow-xl border border-white/20 dark:border-white/10","sm"===u&&"text-sm","md"===u&&"text-base","lg"===u&&"text-lg",d),children:[w?(0,n.jsx)("div",{className:(0,a.cn)("absolute inset-0 rounded-2xl overflow-hidden flex items-center justify-center",!s&&"bg-slate-900"),children:(0,n.jsx)("img",{src:w,alt:"",className:"w-full h-full object-contain object-center"})}):!s&&(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 rounded-2xl","aria-hidden":!0}),!s&&(0,n.jsx)("div",{className:"absolute inset-0 bg-black/30 dark:bg-black/40 rounded-2xl"}),(0,n.jsx)("div",{className:"relative flex flex-col z-10 flex-1 min-h-0",children:s?m?(0,n.jsx)("div",{className:"absolute right-2 top-2 z-20",children:(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),m()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})})}):null:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-shrink-0 px-4 pt-3 pb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-amber-500/30 text-amber-400",children:(0,n.jsx)(ep.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsx)("p",{className:"font-semibold text-white/95",children:t})]}),m&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),m()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})})]})})]})}let eO="dashboard.floatingEnergyMonitorCardPosition";function ez(e){try{let t=localStorage.getItem(eO);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-e}}catch(e){}return null}function eR(e){try{localStorage.setItem(eO,JSON.stringify(e))}catch(e){}}function eY(e){let{title:t,entity_id:r,background_image:l,background_image_dark:i,image_conditions:s,minimal:u=!1,scale:c,editMode:d=!1,onRemove:m,onEdit:h,onEnterEditMode:b}=e,[f,x]=(0,o.useState)({width:360,height:260}),g=Math.min(1.5,Math.max(.5,null!=c?c:1)),p=Math.round(f.width*g),w=Math.round(f.height*g),[v,y]=(0,o.useState)(()=>{var e;return null!=(e=ez(260))?e:{left:0,bottom:0}}),[k,N]=(0,o.useState)(!1),j=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),P=(0,o.useRef)(!1),M=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!l)return void x({width:360,height:260});let e=new Image;e.onload=()=>{let t=e.naturalWidth,r=e.naturalHeight;if(t>0&&r>0){let e=Math.min(1,420/t);x({width:Math.round(t*e),height:Math.round(r*e)})}},e.src=l},[l]);let S=(0,o.useCallback)(()=>{null!=M.current&&(clearTimeout(M.current),M.current=null)},[]),_=(0,o.useCallback)(e=>{var t,r;!d&&b&&(S(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),M.current=setTimeout(()=>{M.current=null,b()},500))},[d,b,S]),T=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),S()},[S]);(0,o.useEffect)(()=>{if(!P.current){var e,t;P.current=!0;let r=ez(w);if(r)return void y(C(r));let n=C((e=p,t=w,{left:(window.innerWidth-e)/2,bottom:(window.innerHeight-t-24)/2}));y(n),eR(n)}},[p,w]);let A=(0,o.useCallback)(e=>{var t,r,n,l;d&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),N(!0),j.current={x:e.clientX,y:e.clientY,left:v.left,bottom:v.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[v,d]),I=(0,o.useCallback)(e=>{if(!k)return;let t=e.clientX-j.current.x,r=e.clientY-j.current.y;y(C({left:j.current.left+t,bottom:j.current.bottom-r}))},[k]),H=(0,o.useCallback)(e=>{var t,r;if(k){N(!1);let t=e.clientX-j.current.x,r=e.clientY-j.current.y,n=C({left:j.current.left+t,bottom:j.current.bottom-r});y(n),eR(n)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[k]);return(0,n.jsxs)("div",{className:(0,a.cn)("fixed z-20 rounded-2xl",u?"bg-transparent overflow-visible":"overflow-hidden shadow-xl bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",d&&"cursor-grab touch-none active:cursor-grabbing",d&&!k&&"animate-edit-wiggle"),style:{left:v.left,bottom:v.bottom,width:p,height:w,...!d&&b?{touchAction:"none"}:{}},...!d&&b&&{onPointerDown:_,onPointerUp:T,onPointerLeave:T,onPointerCancel:T},...d&&{onPointerDown:A,onPointerMove:I,onPointerUp:H,onPointerLeave:e=>{k&&H(e)},onPointerCancel:H},children:[d&&h&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h()},className:"absolute right-2 bottom-2 z-50 p-1.5 rounded-lg shrink-0 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col h-full min-h-0 overflow-hidden rounded-2xl",d&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(eW,{title:t,entity_id:r,background_image:l,background_image_dark:i,image_conditions:s,minimal:u,size:"md",onMoreClick:void 0,className:"flex-1 min-h-0"})})]})}var eX=r(15239),eF=r(37494),eU=r(70833),eJ=r(35733),eB=r(61056),eE=r(30771),eq=r(32320);function eK(e){var t;let{state:r,className:l}=e,i=null!=(t=null==r?void 0:r.toLowerCase())?t:"",o=(0,a.cn)("shrink-0",null!=l?l:"h-8 w-8");return"sunny"===i||"clear"===i||"zonnig"===i?(0,n.jsx)(ep.A,{className:o,"aria-hidden":!0}):"clear-night"===i?(0,n.jsx)(eF.A,{className:o,"aria-hidden":!0}):"fog"===i||"mist"===i?(0,n.jsx)(eU.A,{className:o,"aria-hidden":!0}):"rainy"===i||"pouring"===i||"hail"===i?(0,n.jsx)(eJ.A,{className:o,"aria-hidden":!0}):"snowy"===i||"snowy-rainy"===i?(0,n.jsx)(eB.A,{className:o,"aria-hidden":!0}):"lightning"===i||"lightning-rainy"===i?(0,n.jsx)(eE.A,{className:o,"aria-hidden":!0}):"windy"===i||"windy-variant"===i?(0,n.jsx)(q.A,{className:o,"aria-hidden":!0}):("cloudy"===i,(0,n.jsx)(eq.A,{className:o,"aria-hidden":!0}))}function eG(e){var t,r,l,i,s;let{title:u="Weather",entity_id:d,size:m="md",show_icon:h=!0,className:b,onMoreClick:f}=e,x=(0,c.j)(e=>e.getState(d)),{resolved:g}=(0,eL.C)(),p=null!=(i=null==x?void 0:x.state)?i:"",w=(null==x||null==(t=x.attributes)?void 0:t.temperature)!=null?Number(x.attributes.temperature):void 0,v=(null==x||null==(r=x.attributes)?void 0:r.humidity)!=null?Number(x.attributes.humidity):void 0,y="dark"===g,k=function(e){var t;switch(null!=(t=null==e?void 0:e.toLowerCase())?t:""){case"sunny":case"clear":case"zonnig":return"from-amber-300/50 via-yellow-200/30 to-sky-300/40";case"clear-night":return"from-indigo-950/70 via-slate-900/60 to-indigo-950/80";case"cloudy":case"partlycloudy":case"exceptional":return"from-slate-400/40 via-slate-300/30 to-slate-500/40";case"rainy":case"pouring":case"hail":return"from-slate-500/50 via-sky-700/40 to-slate-600/50";case"snowy":case"snowy-rainy":return"from-sky-200/40 via-white/30 to-slate-300/40";case"fog":case"mist":return"from-slate-400/35 to-slate-500/40";case"lightning":case"lightning-rainy":return"from-slate-800/60 via-slate-900/50 to-slate-950/70";case"windy":case"windy-variant":return"from-slate-300/35 via-sky-400/30 to-slate-400/35";default:return"from-sky-400/35 via-sky-500/30 to-sky-600/40"}}(p),N=function(e){var t;switch(null!=(t=null==e?void 0:e.toLowerCase())?t:""){case"fog":case"mist":return"/weather-fog";case"sunny":case"clear":case"zonnig":return"/weather-sunny";case"clear-night":return"/weather-clear-night";case"rainy":case"pouring":case"hail":return"/weather-rainy";case"cloudy":case"partlycloudy":case"exceptional":return"/weather-partlycloudy";case"snowy":case"snowy-rainy":return"/weather-snowy";case"lightning":case"lightning-rainy":return"/weather-lightning";case"windy":case"windy-variant":return"/weather-windy";default:return null}}(p),j=N?"".concat(N).concat(y?"-night":"",".png"):null,C=N&&y?"".concat(N,".png"):null,[P,M]=(0,o.useState)(!1),S=P&&C?C:j,_=null!=(s=null==x||null==(l=x.attributes)?void 0:l.friendly_name)?s:d;return(0,o.useEffect)(()=>{M(!1)},[j]),(0,n.jsxs)("div",{className:(0,a.cn)("relative flex w-full h-full min-h-[125px] flex-col overflow-hidden rounded-2xl text-white shadow-xl border border-white/20 dark:border-white/10","sm"===m&&"text-sm","md"===m&&"text-base","lg"===m&&"text-lg",b),children:[(0,n.jsx)("div",{className:(0,a.cn)("absolute inset-0 bg-gradient-to-b rounded-2xl",k)}),S&&(0,n.jsx)("div",{className:"absolute inset-0 rounded-2xl overflow-hidden",children:(0,n.jsx)(eX.default,{src:S,alt:"",fill:!0,sizes:"(max-width: 500px) 500px, 500px",className:"object-cover object-center",onError:C?()=>M(!0):void 0})}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black/25 dark:bg-black/50 rounded-2xl"}),(0,n.jsxs)("div",{className:"relative flex flex-col z-10 h-full min-h-0",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 py-3 flex-shrink-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[h&&(0,n.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/20 text-white drop-shadow-sm",children:(0,n.jsx)(eK,{state:p,className:"h-5 w-5"})}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("p",{className:"font-medium truncate text-white/90 drop-shadow-sm",children:u}),(0,n.jsx)("p",{className:"text-xs text-white/60 truncate drop-shadow-sm",children:_})]})]}),null!=v&&!Number.isNaN(v)&&(0,n.jsxs)("div",{className:"flex items-center gap-1.5 text-white/90 drop-shadow-sm shrink-0",children:[(0,n.jsx)(G.A,{className:"h-4 w-4","aria-hidden":!0}),(0,n.jsxs)("span",{children:[Math.round(v),"%"]})]}),f&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),f()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 drop-shadow-sm transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})})]}),(0,n.jsx)("div",{className:"flex-1 min-h-0"}),(0,n.jsx)("div",{className:"px-4 pb-4 pt-2 flex-shrink-0",children:(0,n.jsx)("p",{className:(0,a.cn)("font-bold tabular-nums text-white drop-shadow-md","sm"===m&&"text-4xl","md"===m&&"text-5xl","lg"===m&&"text-6xl"),children:null==w||Number.isNaN(w)?"—":"".concat(Math.round(w),"\xb0")})})]})]})}let eV="dashboard.floatingWeatherCardPosition";function e$(){try{let e=localStorage.getItem(eV);if(!e)return null;let t=JSON.parse(e);if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.bottom))return{left:t.left,bottom:t.bottom};if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.top))return{left:t.left,bottom:window.innerHeight-t.top-200}}catch(e){}return null}function eZ(e){try{localStorage.setItem(eV,JSON.stringify(e))}catch(e){}}function eQ(e){let{title:t,entity_id:r,show_icon:l=!0,width:i,height:s,editMode:u=!1,onRemove:c,onEdit:d,onEnterEditMode:m}=e,h=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(500,Math.max(200,Math.round(t))):320}(i),b=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(400,Math.max(100,Math.round(t))):180}(s),[f,x]=(0,o.useState)(()=>{var e;return null!=(e=e$())?e:{left:0,bottom:0}}),[g,p]=(0,o.useState)(!1),w=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),v=(0,o.useRef)(!1),y=(0,o.useRef)(null),k=(0,o.useCallback)(()=>{null!=y.current&&(clearTimeout(y.current),y.current=null)},[]),N=(0,o.useCallback)(e=>{var t,r;!u&&m&&(k(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),y.current=setTimeout(()=>{y.current=null,m()},500))},[u,m,k]),j=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),k()},[k]);(0,o.useEffect)(()=>{var e,t;if(v.current)return;v.current=!0;let r={maxLeft:window.innerWidth-h,maxBottom:window.innerHeight-b-24},n=e$();if(n)return void x(C(n,r));let l=C((e=h,t=b,{left:(window.innerWidth-e)/2,bottom:(window.innerHeight-t-24)/2}),r);x(l),eZ(l)},[h,b]);let P=(0,o.useCallback)(e=>{var t,r,n,l;u&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),p(!0),w.current={x:e.clientX,y:e.clientY,left:f.left,bottom:f.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[f,u]),M=window.innerWidth-h,S=window.innerHeight-b-24,_=(0,o.useCallback)(e=>{if(!g)return;let t=e.clientX-w.current.x,r=e.clientY-w.current.y;x(C({left:Math.max(0,Math.min(w.current.left+t,M)),bottom:Math.max(0,Math.min(w.current.bottom-r,S))},{maxLeft:M,maxBottom:S}))},[g,M,S]),T=(0,o.useCallback)(e=>{var t,r;if(g){p(!1);let t=e.clientX-w.current.x,r=e.clientY-w.current.y,n=C({left:Math.max(0,Math.min(w.current.left+t,M)),bottom:Math.max(0,Math.min(w.current.bottom-r,S))},{maxLeft:M,maxBottom:S});x(n),eZ(n)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[g,M,S]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl",u&&"cursor-grab touch-none active:cursor-grabbing",u&&!g&&"animate-edit-wiggle"),style:{left:f.left,bottom:f.bottom,width:h,height:b,...!u&&m?{touchAction:"none"}:{}},...!u&&m&&{onPointerDown:N,onPointerUp:j,onPointerLeave:j,onPointerCancel:j},...u&&{onPointerDown:P,onPointerMove:_,onPointerUp:T,onPointerLeave:e=>{g&&T(e)},onPointerCancel:T},children:(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col h-full min-h-0",u&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(eG,{title:t,entity_id:r,show_icon:l,size:"md",onMoreClick:u?d:void 0,className:"flex-1 min-h-0"})})})}let e0={idle:"Inactief",cleaning:"Bezig met stofzuigen",docked:"In basis",returning:"Keert terug",paused:"Gepauzeerd",error:"Fout",unknown:"—"};function e1(e){var t,r,l,i,s,u;let{title:d="Stofzuiger",entity_id:m,script_ids:h=[],script_names:b={},cleaned_area_entity_id:f,icon:x,size:g="md",className:p,onMoreClick:w}=e,v=(0,c.j)(e=>e.getState(m)),y=(0,c.j)(e=>f?e.getState(f):null),k=(0,c.j)(e=>e.setStates),[N,j]=(0,o.useState)(null),[C,P]=(0,o.useState)(null),M=null!=(l=null==v?void 0:v.state)?l:"unknown",S=null!=(i=null==v||null==(t=v.attributes)?void 0:t.friendly_name)?i:m,_=null!=(s=e0[M])?s:(0,a.N)(M),T=null==y?void 0:y.state,A=null!=(u=null==y||null==(r=y.attributes)?void 0:r.unit_of_measurement)?u:"",I=f&&null!=T&&""!==T,H=x&&eN[x]?eN[x]:eN.Bot,D="cleaning"===M||null!=C;async function L(e){j(e);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:e,domain:"script",service:"turn_on"})})).ok){let t=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(t)&&k(t),P(e)}}finally{j(null)}}(0,o.useEffect)(()=>{"docked"===M&&C&&P(null)},[M,C]);let O=null!=C;return(0,n.jsxs)("div",{className:(0,a.cn)("flex w-full flex-col overflow-hidden rounded-2xl bg-white/10 dark:bg-black/50 text-white shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10 min-h-[7.75rem]","sm"===g&&"text-sm","md"===g&&"text-base","lg"===g&&"text-lg",p),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 py-3 shrink-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,n.jsx)("div",{className:(0,a.cn)("flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/15 text-white",D&&"animate-vacuum"),children:(0,n.jsx)(H,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("p",{className:"font-medium truncate text-white/90",children:d}),(0,n.jsx)("p",{className:"text-xs text-white/60 truncate",children:S})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 shrink-0 min-w-0 max-w-[45%]",children:[w&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),w()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsxs)("div",{className:"flex flex-col items-end min-w-0 flex-1",children:[(0,n.jsx)("p",{className:(0,a.cn)("text-sm font-medium truncate w-full text-right","cleaning"===M&&"text-amber-400","docked"===M&&"text-green-400","error"===M&&"text-red-400",!["cleaning","docked","error"].includes(M)&&"text-white/80"),title:_,children:_}),I&&(0,n.jsxs)("p",{className:"text-xs text-white/60 truncate w-full text-right",children:[T,A?" ".concat(A):""]})]})]})]}),h.length>0&&(0,n.jsx)("div",{className:"px-4 pb-3 pt-3 border-t border-white/10",children:(0,n.jsx)("div",{className:"flex flex-wrap gap-1.5",children:h.map(e=>(0,n.jsx)(e2,{entityId:e,displayName:null==b?void 0:b[e],onRun:()=>L(e),loading:N===e,active:C===e,disabled:O&&C!==e},e))})})]})}function e2(e){var t,r;let{entityId:l,displayName:i,onRun:o,loading:s,active:u,disabled:d}=e,m=(0,c.j)(e=>e.getState(l)),h=null!=(r=null!=i?i:null==m||null==(t=m.attributes)?void 0:t.friendly_name)?r:l.replace(/^script\./,""),b="string"==typeof h?h:String(null!=h?h:"");return(0,n.jsx)("button",{type:"button",onClick:o,disabled:s||d,className:(0,a.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-[11px] font-normal transition-colors",u?"border-amber-400/40 bg-amber-500/20 text-amber-200/95":"border-white/15 bg-white/5 text-white/70 hover:bg-white/10 hover:text-white/85 hover:border-white/20",(s||d)&&!u&&"opacity-50 cursor-not-allowed"),children:(0,n.jsx)("span",{className:"truncate max-w-[7rem]",children:s?"…":b})})}let e5="dashboard.floatingVacuumCardPosition";function e4(){try{let e=localStorage.getItem(e5);if(!e)return null;let t=JSON.parse(e);if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.bottom))return{left:t.left,bottom:t.bottom};if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.top))return{left:t.left,bottom:window.innerHeight-t.top-200}}catch(e){}return null}function e3(e){try{localStorage.setItem(e5,JSON.stringify(e))}catch(e){}}function e6(e){let{title:t,entity_id:r,script_ids:l=[],script_names:i={},cleaned_area_entity_id:s,icon:u,editMode:c=!1,onRemove:d,onEdit:m,onEnterEditMode:h}=e,[b,f]=(0,o.useState)(()=>{var e;return null!=(e=e4())?e:{left:0,bottom:0}}),[x,g]=(0,o.useState)(!1),p=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),w=(0,o.useRef)(!1),v=(0,o.useRef)(null),y=(0,o.useCallback)(()=>{null!=v.current&&(clearTimeout(v.current),v.current=null)},[]),k=(0,o.useCallback)(e=>{var t,r;!c&&h&&(y(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),v.current=setTimeout(()=>{v.current=null,h()},500))},[c,h,y]),N=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),y()},[y]);(0,o.useEffect)(()=>{if(w.current)return;w.current=!0;let e={maxLeft:window.innerWidth-320,maxBottom:window.innerHeight-120},t=e4();if(t)return void f(C(t,e));let r=C({left:(window.innerWidth-320)/2,bottom:(window.innerHeight-120)/2},e);f(r),e3(r)},[]);let j=(0,o.useCallback)(e=>{var t,r,n,l;c&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),g(!0),p.current={x:e.clientX,y:e.clientY,left:b.left,bottom:b.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[b,c]),P=(0,o.useCallback)(e=>{if(!x)return;let t=e.clientX-p.current.x,r=e.clientY-p.current.y,n=window.innerWidth-320,l=window.innerHeight-120;f(C({left:Math.max(0,Math.min(p.current.left+t,n)),bottom:Math.max(0,Math.min(p.current.bottom-r,l))},{maxLeft:n,maxBottom:l}))},[x]),M=(0,o.useCallback)(e=>{var t,r;if(x){g(!1);let t=e.clientX-p.current.x,r=e.clientY-p.current.y,n=window.innerWidth-320,l=window.innerHeight-120,a=C({left:Math.max(0,Math.min(p.current.left+t,n)),bottom:Math.max(0,Math.min(p.current.bottom-r,l))},{maxLeft:n,maxBottom:l});f(a),e3(a)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[x]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 w-[320px] shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",c&&"cursor-grab touch-none active:cursor-grabbing",c&&!x&&"animate-edit-wiggle"),style:{left:b.left,bottom:b.bottom,...!c&&h?{touchAction:"none"}:{}},...!c&&h&&{onPointerDown:k,onPointerUp:N,onPointerLeave:N,onPointerCancel:N},...c&&{onPointerDown:j,onPointerMove:P,onPointerUp:M,onPointerLeave:e=>{x&&M(e)},onPointerCancel:M},children:(0,n.jsx)("div",{className:(0,a.cn)(c&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(e1,{title:t,entity_id:r,script_ids:l,script_names:i,cleaned_area_entity_id:s,icon:u,size:"md",onMoreClick:c?m:void 0})})})}var e9=r(23327);let e7={red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30",amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",green:"border-green-400/50 dark:border-green-400/40 bg-green-500/25 dark:bg-green-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",blue:"border-blue-400/50 dark:border-blue-400/40 bg-blue-500/25 dark:bg-blue-900/30",violet:"border-violet-400/50 dark:border-violet-400/40 bg-violet-500/25 dark:bg-violet-900/30",slate:"border-slate-400/50 dark:border-slate-400/40 bg-slate-500/25 dark:bg-slate-900/30"},e8=Object.keys(e7),te=["eq","neq","gt","gte","lt","lte","contains"],tt={eq:"=",neq:"≠",gt:">",gte:"≥",lt:"<",lte:"≤",contains:"bevat"};function tr(e){var t,r;let{title:l="Sensor",entity_id:i,icon:o,show_icon:s=!0,size:u="md",conditions:d,className:m,onMoreClick:h}=e,b=(0,c.j)(e=>e.getState(i)),f=null==b?void 0:b.state,x=null!=(r=null==b||null==(t=b.attributes)?void 0:t.unit_of_measurement)?r:"",g=o&&eN[o]?eN[o]:eN.Gauge,p=function(e){if(null==e||"unavailable"===e||"unknown"===e)return"—";let t=Number(e);return Number.isNaN(t)?(0,a.N)(e):Number.isInteger(t)?String(t):String(Math.round(100*t)/100)}(f),w=function(e,t){if(null==e||"unavailable"===e||"unknown"===e||!(null==t?void 0:t.length))return null;let r=Number(e),n=!Number.isNaN(r);for(let l of t){let t=l.value.trim();if(!t)continue;let a=Number(t),i=""!==t&&!Number.isNaN(a);if(n&&i)switch(l.operator){case"gt":if(r>a)return l.color;break;case"gte":if(r>=a)return l.color;break;case"lt":if(r<a)return l.color;break;case"lte":if(r<=a)return l.color;break;case"eq":if(r===a)return l.color;break;case"neq":if(r!==a)return l.color}else{let o=String(e).toLowerCase(),s=t.toLowerCase();switch(l.operator){case"eq":if(o===s)return l.color;break;case"neq":if(o!==s)return l.color;break;case"contains":if(o.includes(s)||s.includes(o))return l.color;break;case"gt":case"gte":case"lt":case"lte":if(n&&i&&("gt"===l.operator&&r>a||"gte"===l.operator&&r>=a||"lt"===l.operator&&r<a||"lte"===l.operator&&r<=a))return l.color}}}return null}(f,d),v=w&&e7[w]?e7[w]:null;return(0,n.jsxs)("div",{className:(0,a.cn)("flex w-full flex-col overflow-hidden rounded-2xl text-white shadow-xl backdrop-blur-2xl border",null!=v?v:"bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10","sm"===u&&"text-sm","md"===u&&"text-base","lg"===u&&"text-lg",m),children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 pt-3 pb-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s&&(0,n.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/15 text-white",children:(0,n.jsx)(g,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsx)("div",{className:"min-w-0 flex-1",children:(0,n.jsx)("p",{className:"font-medium truncate text-white/90",children:l})})]}),h?(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})}):(0,n.jsx)("div",{className:"shrink-0 rounded-full p-1 text-white/50 hover:text-white/70","aria-label":"Info",children:(0,n.jsx)(e9.A,{className:"h-4 w-4","aria-hidden":!0})})]}),(0,n.jsx)("div",{className:"px-4 pb-4 pt-0 flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"flex items-baseline gap-2 flex-wrap",children:[(0,n.jsx)("span",{className:(0,a.cn)("font-bold tabular-nums text-white","sm"===u&&"text-2xl","md"===u&&"text-3xl","lg"===u&&"text-4xl"),children:p}),x&&(0,n.jsx)("span",{className:"inline-flex items-center rounded-md bg-emerald-500/20 px-2 py-0.5 text-xs font-medium text-emerald-300/95",children:x})]})})]})}let tn="dashboard.floatingSensorCardPosition.",tl={sm:180,md:260,lg:320};function ta(e){try{let t=localStorage.getItem(tn+e);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-200}}catch(e){}return null}function ti(e,t){try{localStorage.setItem(tn+e,JSON.stringify(t))}catch(e){}}function to(e,t){let r=window.innerWidth-e;return{left:Math.min(t*(e+16),r/2),bottom:(window.innerHeight-120)/2}}function ts(e){let{widgetId:t,widgetIndex:r=0,title:l,entity_id:i,icon:s,show_icon:u=!0,size:c="md",conditions:d,editMode:m=!1,onRemove:h,onEdit:b,onEnterEditMode:f}=e,x=tl[null!=c?c:"md"],[g,p]=(0,o.useState)(()=>{var e;return null!=(e=ta(t))?e:to(x,r)}),[w,v]=(0,o.useState)(!1),y=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),k=(0,o.useRef)(!1),N=(0,o.useRef)(null),j=(0,o.useCallback)(()=>{null!=N.current&&(clearTimeout(N.current),N.current=null)},[]),P=(0,o.useCallback)(e=>{var t,r;!m&&f&&(j(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),N.current=setTimeout(()=>{N.current=null,f()},500))},[m,f,j]),M=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),j()},[j]);(0,o.useEffect)(()=>{if(k.current)return;k.current=!0;let e={maxLeft:window.innerWidth-x,maxBottom:window.innerHeight-120},n=ta(t);if(n)return void p(C(n,e));let l=C(to(x,r),e);p(l),ti(t,l)},[x,t,r]);let S=(0,o.useCallback)(e=>{var t,r,n,l;m&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),v(!0),y.current={x:e.clientX,y:e.clientY,left:g.left,bottom:g.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[g,m]),_=(0,o.useCallback)(e=>{if(!w)return;let t=e.clientX-y.current.x,r=e.clientY-y.current.y,n=window.innerWidth-x,l=window.innerHeight-120;p(C({left:Math.max(0,Math.min(y.current.left+t,n)),bottom:Math.max(0,Math.min(y.current.bottom-r,l))},{maxLeft:n,maxBottom:l}))},[w,x]),T=(0,o.useCallback)(e=>{var r,n;if(w){v(!1);let r=e.clientX-y.current.x,n=e.clientY-y.current.y,l=window.innerWidth-x,a=window.innerHeight-120,i=C({left:Math.max(0,Math.min(y.current.left+r,l)),bottom:Math.max(0,Math.min(y.current.bottom-n,a))},{maxLeft:l,maxBottom:a});p(i),ti(t,i)}null==(r=(n=e.currentTarget).releasePointerCapture)||r.call(n,e.pointerId)},[w,x,t]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",m&&"cursor-grab touch-none active:cursor-grabbing",m&&!w&&"animate-edit-wiggle"),style:{width:x,left:g.left,bottom:g.bottom,...!m&&f?{touchAction:"none"}:{}},...!m&&f&&{onPointerDown:P,onPointerUp:M,onPointerLeave:M,onPointerCancel:M},...m&&{onPointerDown:S,onPointerMove:_,onPointerUp:T,onPointerLeave:e=>{w&&T(e)},onPointerCancel:T},children:(0,n.jsx)("div",{className:(0,a.cn)(m&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(tr,{title:l,entity_id:i,icon:s,show_icon:u,size:c,conditions:d,onMoreClick:m?b:void 0})})})}let tu={red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30",amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",green:"border-green-400/50 dark:border-green-400/40 bg-green-500/25 dark:bg-green-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",blue:"border-blue-400/50 dark:border-blue-400/40 bg-blue-500/25 dark:bg-blue-900/30",violet:"border-violet-400/50 dark:border-violet-400/40 bg-violet-500/25 dark:bg-violet-900/30",slate:"border-slate-400/50 dark:border-slate-400/40 bg-slate-500/25 dark:bg-slate-900/30"};Object.keys(tu);let tc=["switch","light","input_boolean"],td={on:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",off:"border-white/10 dark:border-white/10 bg-white/5 dark:bg-black/40 opacity-90",neutral:"bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10"};function tm(e){var t,r,l;let{title:i="Pill",entity_id:o,icon:s,conditions:u,show_state:d=!0,className:m,onMoreClick:h}=e,b=(0,c.j)(e=>e.getState(o)),f=(0,c.j)(e=>e.setStates),x=null==b?void 0:b.state,g=null!=(r=null==b||null==(t=b.attributes)?void 0:t.unit_of_measurement)?r:"",p=null!=(l=o.split(".")[0])?l:"",w=tc.includes(p),v="on"===x,y=s&&eN[s]?eN[s]:eN.CircleDot,k=w?v?"Aan":"Uit":function(e){if(null==e||"unavailable"===e||"unknown"===e)return"—";let t=Number(e);return Number.isNaN(t)?(0,a.N)(e):Number.isInteger(t)?String(t):String(Math.round(100*t)/100)}(x),N=function(e,t){if(null==e||"unavailable"===e||"unknown"===e||!(null==t?void 0:t.length))return null;let r=Number(e),n=!Number.isNaN(r);for(let l of t){let t=l.value.trim();if(!t)continue;let a=Number(t),i=""!==t&&!Number.isNaN(a);if(n&&i)switch(l.operator){case"gt":if(r>a)return l.color;break;case"gte":if(r>=a)return l.color;break;case"lt":if(r<a)return l.color;break;case"lte":if(r<=a)return l.color;break;case"eq":if(r===a)return l.color;break;case"neq":if(r!==a)return l.color}else{let o=String(e).toLowerCase(),s=t.toLowerCase();switch(l.operator){case"eq":if(o===s)return l.color;break;case"neq":if(o!==s)return l.color;break;case"contains":if(o.includes(s)||s.includes(o))return l.color;break;case"gt":case"gte":case"lt":case"lte":if(n&&i&&("gt"===l.operator&&r>a||"gte"===l.operator&&r>=a||"lt"===l.operator&&r<a||"lte"===l.operator&&r<=a))return l.color}}}return null}(x,u),j=N&&tu[N]?tu[N]:w?v?td.on:td.off:td.neutral;async function C(e){if(e.stopPropagation(),!w)return;let t=!v;try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:o,domain:p,service:t?"turn_on":"turn_off",service_data:{entity_id:o}})})).ok){let e=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(e)&&f(e)}}catch(e){}}let P=!d;return(0,n.jsxs)("div",{className:(0,a.cn)("flex items-center h-9 rounded-full border text-sm font-medium shadow-lg backdrop-blur-xl text-white min-w-0 transition-colors duration-200",j,w&&"cursor-pointer hover:opacity-90 transition-opacity",P?h?"relative w-12 h-9 px-1.5 justify-center shrink-0":"relative w-9 h-9 p-0 justify-center shrink-0":"gap-2 pl-0.5 pr-3",m),...w&&{onClick:C,role:"button","aria-pressed":v},title:P?"".concat(i).concat(null!=x&&"unavailable"!==x?": ".concat(k):""):void 0,children:[(0,n.jsx)("div",{className:(0,a.cn)("shrink-0 items-center justify-center rounded-full bg-white/15 text-white flex","h-7 w-7"),children:(0,n.jsx)(y,{className:"h-4 w-4","aria-hidden":!0})}),!P&&(0,n.jsxs)("div",{className:"min-w-0 flex-1 flex items-center gap-2",children:[(0,n.jsx)("span",{className:"truncate text-white/95",children:i}),(0,n.jsxs)("span",{className:"tabular-nums text-white shrink-0",children:[k,g&&!w&&(0,n.jsx)("span",{className:"text-white/70 ml-0.5",children:g})]})]}),h&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h()},className:(0,a.cn)("rounded-full shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors",P?"absolute -right-0.5 -top-0.5 p-0.5":"p-1"),"aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-4 w-4","aria-hidden":!0})})]})}let th="dashboard.floatingPillCardPosition.";function tb(e){try{let t=localStorage.getItem(th+e);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-80}}catch(e){}return null}function tf(e,t){try{localStorage.setItem(th+e,JSON.stringify(t))}catch(e){}}function tx(e){let{widget:t,widgetIndex:r=0,editMode:l=!1,onRemove:i,onEdit:s,onEnterEditMode:u}=e,[c,d]=(0,o.useState)(()=>{var e;return null!=(e=tb(t.id))?e:{left:0,bottom:24}}),[m,h]=(0,o.useState)(!1),b=(0,o.useRef)({x:0,y:0,left:0,bottom:0,width:280,height:80}),f=(0,o.useRef)(!1),x=(0,o.useRef)(null),g=(0,o.useCallback)(()=>{null!=x.current&&(clearTimeout(x.current),x.current=null)},[]),p=(0,o.useCallback)(e=>{var t,r;!l&&u&&(g(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),x.current=setTimeout(()=>{x.current=null,u()},500))},[l,u,g]),w=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),g()},[g]);(0,o.useEffect)(()=>{if(f.current)return;f.current=!0;let e=window.innerWidth,r={maxLeft:e-280,maxBottom:window.innerHeight-80},n=tb(t.id);if(n)return void d(C(n,r));let l=C({left:(window.innerWidth-280)/2,bottom:(window.innerHeight-120)/2},r);d(l),tf(t.id,l)},[t.id,r]);let v=(0,o.useCallback)(e=>{var t,r,n;if(!l||(null==(t=(r=e.target).closest)?void 0:t.call(r,"button")))return;e.preventDefault();let a=e.currentTarget,i=a.offsetWidth,o=a.offsetHeight;h(!0),b.current={x:e.clientX,y:e.clientY,left:c.left,bottom:c.bottom,width:i,height:o},null==(n=a.setPointerCapture)||n.call(a,e.pointerId)},[c,l]),y=(0,o.useCallback)(e=>{if(!m)return;let t=e.clientX-b.current.x,r=e.clientY-b.current.y,n=Math.max(0,window.innerWidth-b.current.width),l=Math.max(0,window.innerHeight-b.current.height);d(C({left:Math.max(0,Math.min(b.current.left+t,n)),bottom:Math.max(0,Math.min(b.current.bottom-r,l))},{maxLeft:n,maxBottom:l}))},[m]),k=(0,o.useCallback)(e=>{var r,n;if(m){h(!1);let r=e.clientX-b.current.x,n=e.clientY-b.current.y,l=Math.max(0,window.innerWidth-b.current.width),a=Math.max(0,window.innerHeight-b.current.height),i=C({left:Math.max(0,Math.min(b.current.left+r,l)),bottom:Math.max(0,Math.min(b.current.bottom-n,a))},{maxLeft:l,maxBottom:a});d(i),tf(t.id,i)}null==(r=(n=e.currentTarget).releasePointerCapture)||r.call(n,e.pointerId)},[m,t.id]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 w-max max-w-[280px] shadow-xl rounded-2xl overflow-hidden bg-transparent",l&&"cursor-grab touch-none active:cursor-grabbing",l&&!m&&"animate-edit-wiggle"),style:{left:c.left,bottom:c.bottom,...!l&&u?{touchAction:"none"}:{}},...!l&&u&&{onPointerDown:p,onPointerUp:w,onPointerLeave:w,onPointerCancel:w},...l&&{onPointerDown:v,onPointerMove:y,onPointerUp:k,onPointerLeave:e=>{m&&k(e)},onPointerCancel:k},children:(0,n.jsx)("div",{className:(0,a.cn)(l&&"[&>div]:rounded-2xl [&>div]:shadow-none"),children:(0,n.jsx)(tm,{title:t.title,entity_id:t.entity_id,icon:t.icon,conditions:t.conditions,show_state:!1!==t.show_state,onMoreClick:l?s:void 0})})})}let tg="dashboard.floatingCardGroupPosition.";function tp(e){try{let t=localStorage.getItem(tg+e);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-120}}catch(e){}return null}function tw(e,t){try{localStorage.setItem(tg+e,JSON.stringify(t))}catch(e){}}let tv={start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between"};function ty(e){var t,r,l;let{group:i,widgetIndex:s=0,editMode:u=!1,onRemove:c,onEdit:d,onEnterEditMode:m}=e,h=null!=(t=i.alignment)?t:"start",b=null!=(r=i.children)?r:[],[f,x]=(0,o.useState)(()=>{var e;return null!=(e=tp(i.id))?e:{left:0,bottom:24}}),[g,p]=(0,o.useState)(!1),w=(0,o.useRef)({x:0,y:0,left:0,bottom:0,width:200,height:80}),v=(0,o.useRef)(!1),y=(0,o.useRef)(null),k=(0,o.useCallback)(()=>{null!=y.current&&(clearTimeout(y.current),y.current=null)},[]),N=(0,o.useCallback)(e=>{var t,r;!u&&m&&(k(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),y.current=setTimeout(()=>{y.current=null,m()},500))},[u,m,k]),j=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),k()},[k]);(0,o.useEffect)(()=>{if(v.current)return;v.current=!0;let e=window.innerWidth,t={maxLeft:e-200,maxBottom:window.innerHeight-80,minLeft:-24,minBottom:-24},r=tp(i.id);if(r)return void x(C(r,t));let n=C({left:(window.innerWidth-200)/2,bottom:(window.innerHeight-120)/2},t);x(n),tw(i.id,n)},[i.id,s]);let P=(0,o.useCallback)(e=>{var t,r,n;if(!u||(null==(t=(r=e.target).closest)?void 0:t.call(r,"[data-group-opts]")))return;e.preventDefault();let l=e.currentTarget;w.current={x:e.clientX,y:e.clientY,left:f.left,bottom:f.bottom,width:l.offsetWidth,height:l.offsetHeight},null==(n=l.setPointerCapture)||n.call(l,e.pointerId),p(!0)},[f,u]),M=(0,o.useCallback)(e=>{if(!g)return;let t=e.clientX-w.current.x,r=e.clientY-w.current.y,n=window.innerWidth,l=window.innerHeight,a=n-w.current.width,i=l-w.current.height;x(C({left:Math.max(-24,Math.min(w.current.left+t,a)),bottom:Math.max(-24,Math.min(w.current.bottom-r,i))},{maxLeft:a,maxBottom:i,minLeft:-24,minBottom:-24}))},[g]),S=(0,o.useCallback)(e=>{var t,r;if(g){p(!1);let t=e.clientX-w.current.x,r=e.clientY-w.current.y,n=window.innerWidth,l=window.innerHeight,a=n-w.current.width,o=l-w.current.height,s=C({left:Math.max(-24,Math.min(w.current.left+t,a)),bottom:Math.max(-24,Math.min(w.current.bottom-r,o))},{maxLeft:a,maxBottom:o,minLeft:-24,minBottom:-24});x(s),tw(i.id,s)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[g,i.id]);return(0,n.jsxs)("div",{className:(0,a.cn)("fixed z-30 w-max max-w-[90vw] shadow-xl rounded-2xl overflow-hidden relative",u&&"bg-white/10 dark:bg-black/50 backdrop-blur-xl border border-white/20 dark:border-white/10 cursor-grab touch-none active:cursor-grabbing",u&&!g&&"animate-edit-wiggle"),style:{left:f.left,bottom:f.bottom,...!u&&m?{touchAction:"none"}:{}},...!u&&m&&{onPointerDown:N,onPointerUp:j,onPointerLeave:j,onPointerCancel:j},...u&&{onPointerDown:P,onPointerMove:M,onPointerUp:S,onPointerLeave:e=>{g&&S(e)},onPointerCancel:S},children:[u&&d&&(0,n.jsx)("button",{type:"button","data-group-opts":!0,onClick:e=>{e.stopPropagation(),d()},className:"absolute right-2 top-2 z-10 p-1.5 rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",title:"Bewerken of verwijderen",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsxs)("div",{className:(0,a.cn)("flex flex-wrap items-center gap-2 p-2 min-h-[52px]",null!=(l=tv[h])?l:"justify-start"),children:[b.filter(e=>"pill_card"===e.type).map(e=>{var t,r;return(0,n.jsx)(tm,{title:null!=(t=e.title)?t:"Pill",entity_id:null!=(r=e.entity_id)?r:"",icon:e.icon,conditions:e.conditions,show_state:!1!==e.show_state,onMoreClick:void 0},e.id)}),u&&0===b.length&&(0,n.jsx)("button",{type:"button","data-group-opts":!0,onClick:e=>{e.stopPropagation(),null==d||d()},className:"text-sm text-white/60 hover:text-white/90 border border-dashed border-white/30 rounded-lg px-3 py-2",children:"+ Kaart toevoegen"})]})]})}let tk="dashboard.floatingClimateCardPosition";function tN(){try{let e=localStorage.getItem(tk);if(!e)return null;let t=JSON.parse(e);if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.bottom))return{left:t.left,bottom:t.bottom};if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.top))return{left:t.left,bottom:window.innerHeight-t.top-200}}catch(e){}return null}function tj(e){try{localStorage.setItem(tk,JSON.stringify(e))}catch(e){}}function tC(e){var t,r;let{widgets:l,title:i,entity_id:s,editMode:u=!1,onRemove:c,onEdit:d,onEnterEditMode:m}=e,h=null!=l?l:null!=i&&null!=s?[{id:"",title:i,entity_id:s,type:"climate_card_2"}]:[],b=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(500,Math.max(200,Math.round(t))):320}(null==(t=h[0])?void 0:t.width),f=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(400,Math.max(100,Math.round(t))):180}(null==(r=h[0])?void 0:r.height),[x,g]=(0,o.useState)(0),[p,w]=(0,o.useState)(0),[v,y]=(0,o.useState)(null),k=(0,o.useRef)(null),N=(0,o.useRef)(null),j=(0,o.useCallback)(()=>{null!=k.current&&(clearTimeout(k.current),k.current=null)},[]),P=(0,o.useCallback)(e=>{var t,r,n,l;!u&&m&&(null!=(t=(r=e.target).closest)&&t.call(r,"[data-climate-swipe-area]")||(j(),null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId),k.current=setTimeout(()=>{k.current=null,m()},500)))},[u,m,j]),M=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),j()},[j]);(0,o.useEffect)(()=>{0!==h.length&&g(e=>Math.min(e,Math.max(0,h.length-1)))},[h.length]),null!=h[x]||h[0];let S=h.length>1,_=(0,o.useCallback)(e=>{e===x||e<0||e>=h.length||g(e)},[x,h.length]),[T,A]=(0,o.useState)(()=>{var e;return null!=(e=tN())?e:{left:0,bottom:24}}),[I,H]=(0,o.useState)(!1),D=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),L=(0,o.useRef)(!1),W=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e={maxLeft:window.innerWidth-b,maxBottom:window.innerHeight-f-24};if(L.current)A(t=>{let r=C(t,e);return r.left!==t.left||r.bottom!==t.bottom?(tj(r),r):t});else{var t,r;L.current=!0;let n=tN();if(n){let t=C(n,e);A(t),tj(t);return}let l=C((t=b,r=f,{left:(window.innerWidth-t)/2,bottom:(window.innerHeight-r-24)/2}),e);A(l),tj(l)}},[b,f]);let O=(0,o.useCallback)(e=>{var t,r,n,l;u&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),H(!0),D.current={x:e.clientX,y:e.clientY,left:T.left,bottom:T.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[T,u]),z=window.innerWidth-b,R=window.innerHeight-f-24,Y=(0,o.useCallback)(e=>{if(!I)return;let t=e.clientX-D.current.x,r=e.clientY-D.current.y;A(C({left:Math.max(0,Math.min(D.current.left+t,z)),bottom:Math.max(0,Math.min(D.current.bottom-r,R))},{maxLeft:z,maxBottom:R}))},[I,z,R]),X=(0,o.useCallback)(e=>{var t,r;if(I){H(!1);let t=e.clientX-D.current.x,r=e.clientY-D.current.y,n=C({left:Math.max(0,Math.min(D.current.left+t,z)),bottom:Math.max(0,Math.min(D.current.bottom-r,R))},{maxLeft:z,maxBottom:R});A(n),tj(n)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[I,z,R]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 flex shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl",u&&"cursor-grab touch-none active:cursor-grabbing",u&&!I&&"animate-edit-wiggle"),style:{left:T.left,bottom:T.bottom,width:b,height:f,...!u&&m?{touchAction:"none"}:{}},...!u&&m&&{onPointerDown:P,onPointerUp:M,onPointerLeave:M,onPointerCancel:M},...u&&{onPointerDown:O,onPointerMove:Y,onPointerUp:X,onPointerLeave:e=>{I&&X(e)},onPointerCancel:X},children:(0,n.jsx)("div",{className:"flex flex-col min-w-0 flex-1 w-full h-full",children:(0,n.jsxs)("div",{"data-climate-swipe-area":!0,className:(0,a.cn)(u&&"[&>div]:rounded-t-none [&>div]:shadow-none [&_.rounded-2xl]:rounded-b-none","relative overflow-hidden",S&&"touch-none"),style:{touchAction:S?"none":void 0,perspective:"1000px",minHeight:f},onPointerDown:S?e=>{if(!u){var t,r;W.current={x:e.clientX,y:e.clientY},null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),m&&(N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{N.current=null,m()},500))}}:void 0,onPointerMove:S?e=>{if(W.current&&!u){let t=e.clientX-W.current.x,r=e.clientY-W.current.y;(Math.abs(t)>15||Math.abs(r)>15)&&(N.current&&(clearTimeout(N.current),N.current=null),Math.abs(t)>Math.abs(r)&&e.preventDefault())}}:void 0,onPointerUp:S?e=>{var t,r;if(N.current&&(clearTimeout(N.current),N.current=null),!W.current||u)return;let n=e.clientX-W.current.x,l=e.clientY-W.current.y;Math.abs(n)>50&&Math.abs(n)>Math.abs(l)&&(n>0?_(x-1):_(x+1)),W.current=null,null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)}:void 0,onPointerCancel:S?e=>{var t,r;N.current&&(clearTimeout(N.current),N.current=null),W.current=null,null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)}:void 0,onPointerLeave:S?()=>{N.current&&(clearTimeout(N.current),N.current=null)}:void 0,children:[(0,n.jsx)("div",{className:"relative w-full overflow-hidden",style:{minHeight:f},children:(0,n.jsx)("div",{className:"flex w-full h-full",style:{width:S?"".concat(100*h.length,"%"):"100%",transform:S?"translateX(-".concat(x*(100/h.length),"%)"):"none",transition:"transform ".concat(280,"ms ease-out")},children:h.map((e,t)=>(0,n.jsx)("div",{className:"shrink-0 w-full",style:S?{width:"".concat(100/h.length,"%")}:void 0,children:(0,n.jsx)(eM,{title:e.title,entity_id:e.entity_id,humidity_entity_id:e.humidity_entity_id,icon:e.icon,size:"md",onMoreClick:u?()=>e.id&&(null==d?void 0:d(e.id)):void 0})},e.id))})}),S&&(0,n.jsx)("div",{className:"absolute bottom-1 left-0 right-0 flex justify-center gap-1.5 pointer-events-none",children:h.map((e,t)=>(0,n.jsx)("span",{className:(0,a.cn)("h-1.5 w-1.5 rounded-full transition-colors duration-300",t===x?"bg-white":"bg-white/40"),"aria-hidden":!0},t))})]})})})}function tP(e){let{title:t,className:r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("flex w-full items-center py-1",r),"aria-hidden":!0,children:(0,n.jsx)("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 truncate w-full",children:t})})}let tM="dashboard.floatingTitleCardPosition";function tS(){try{let e=localStorage.getItem(tM);if(!e)return null;let t=JSON.parse(e);if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.bottom))return{left:t.left,bottom:t.bottom};if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.top))return{left:t.left,bottom:window.innerHeight-t.top-120}}catch(e){}return null}function t_(e){try{localStorage.setItem(tM,JSON.stringify(e))}catch(e){}}function tT(e){let{widgets:t,editMode:r=!1,onRemove:l,onEdit:i,onEnterEditMode:s}=e,[u,c]=(0,o.useState)(()=>{var e;return null!=(e=tS())?e:{left:0,bottom:24}}),[d,m]=(0,o.useState)(!1),h=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),b=(0,o.useRef)(!1),f=(0,o.useRef)(null),x=(0,o.useCallback)(()=>{null!=f.current&&(clearTimeout(f.current),f.current=null)},[]),g=(0,o.useCallback)(e=>{var t,n;!r&&s&&(x(),null==(t=(n=e.currentTarget).setPointerCapture)||t.call(n,e.pointerId),f.current=setTimeout(()=>{f.current=null,s()},500))},[r,s,x]),p=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),x()},[x]);(0,o.useEffect)(()=>{if(b.current)return;b.current=!0;let e={maxLeft:window.innerWidth-200,maxBottom:window.innerHeight-120},t=tS();if(t)return void c(C(t,e));let r=C({left:(window.innerWidth-200)/2,bottom:(window.innerHeight-120)/2},e);c(r),t_(r)},[]);let w=(0,o.useCallback)(e=>{var t,n,l,a;r&&(null!=(t=(n=e.target).closest)&&t.call(n,"button")||(e.preventDefault(),m(!0),h.current={x:e.clientX,y:e.clientY,left:u.left,bottom:u.bottom},null==(l=(a=e.currentTarget).setPointerCapture)||l.call(a,e.pointerId)))},[u,r]),v=window.innerWidth-200,y=(0,o.useCallback)(e=>{if(!d)return;let t=e.clientX-h.current.x,r=e.clientY-h.current.y,n=window.innerHeight-120;c(C({left:Math.max(0,Math.min(h.current.left+t,v)),bottom:Math.max(0,Math.min(h.current.bottom-r,n))},{maxLeft:v,maxBottom:n}))},[d,v]),k=(0,o.useCallback)(e=>{var t,r;if(d){m(!1);let t=e.clientX-h.current.x,r=e.clientY-h.current.y,n=window.innerHeight-120,l=C({left:Math.max(0,Math.min(h.current.left+t,v)),bottom:Math.max(0,Math.min(h.current.bottom-r,n))},{maxLeft:v,maxBottom:n});c(l),t_(l)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[d,v]);return 0===t.length?null:(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 flex flex-col",r&&"cursor-grab touch-none active:cursor-grabbing",r&&!d&&"animate-edit-wiggle"),style:{left:u.left,bottom:u.bottom,width:200,...!r&&s?{touchAction:"none"}:{}},...!r&&s&&{onPointerDown:g,onPointerUp:p,onPointerLeave:p,onPointerCancel:p},...r&&{onPointerDown:w,onPointerMove:y,onPointerUp:k,onPointerLeave:e=>{d&&k(e)},onPointerCancel:k},children:(0,n.jsx)("div",{className:"p-2 flex flex-col gap-1 max-h-[40vh] overflow-auto",children:t.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2 py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-200",children:[(0,n.jsx)("span",{className:"truncate flex-1 min-w-0",children:e.title||"Titel"}),r&&i&&(0,n.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),i(e.id)},className:"shrink-0 p-1.5 rounded-md text-gray-500 hover:bg-gray-200 dark:hover:bg-white/10 dark:text-gray-400","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-4 w-4"})})]},e.id))})})}function tA(e){var t;let{title:r="Kamer",entity_id:l,icon:i="Home",light_entity_id:s,background_image:d,icon_background_color:m,width:h,height:b,className:f,embedded:x,onMoreClick:g}=e,p=(0,c.j)(e=>l?e.getState(l):null),w=(0,c.j)(e=>s?e.getState(s):null),v=(0,c.j)(e=>e.setStates),y=(0,c.j)(e=>e.updateEntityState),[k,N]=(0,o.useState)(!1),j=(null==w?void 0:w.state)==="on",C=(0,o.useCallback)(async()=>{let e=await fetch("/api/ha/state").then(e=>e.json());Array.isArray(e)&&v(e)},[v]),P=(0,o.useCallback)(async()=>{if(s){N(!0);try{(await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:s,domain:"light",service:j?"turn_off":"turn_on",service_data:j?void 0:{brightness_pct:100}})})).ok&&(y(s,{state:j?"off":"on"}),await C())}finally{N(!1)}}},[s,j,y,C]),M=null!=(t=eN[i])?t:eN.Home,S=!!(null==l?void 0:l.trim()),_=Math.min((null!=h?h:280)/280,(null!=b?b:120)/120,2),T=Math.round(130*_),A=Math.round(52*_),I=S?function(e,t){if(null==e||"unavailable"===e||"unknown"===e)return"—";let r=Number(e);if(!Number.isNaN(r)){var n;let e=null!=(n=null==t?void 0:t.unit)?n:"";return Number.isInteger(r)?"".concat(r).concat(e?" ".concat(e):""):"".concat(Math.round(100*r)/100).concat(e?" ".concat(e):"")}return String(e)}(null==p?void 0:p.state,null==p?void 0:p.attributes):null;return(0,n.jsxs)("div",{className:(0,a.cn)("relative flex h-full w-full min-h-0 overflow-hidden rounded-2xl",x?"bg-transparent":"bg-white/10 dark:bg-black/50 shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10",!x&&!S&&"border-2 border-dashed border-gray-300 dark:border-white/20",f),style:null!=b?{minHeight:b}:void 0,children:[d&&(0,n.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-50",style:{backgroundImage:"url(".concat(d,")")},"aria-hidden":!0}),(0,n.jsx)("div",{className:"absolute left-0 bottom-0 translate-x-[-20%] translate-y-[20%] flex items-center justify-center rounded-full text-white shadow-lg",style:{backgroundColor:m||"#3B82F6",width:T,height:T},"aria-hidden":!0,children:(0,n.jsx)("span",{className:"flex items-center justify-center",style:{width:A,height:A},children:(0,n.jsx)(M,{className:"h-full w-full","aria-hidden":!0})})}),(0,n.jsx)("div",{className:"relative flex min-w-0 flex-1 flex-col",children:(0,n.jsxs)("div",{className:"flex flex-1 flex-col items-end justify-between min-w-0 px-4 pt-3 pb-3 text-right min-h-0",style:{paddingLeft:Math.max(24,.35*T)},children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 w-full justify-end min-w-0 shrink-0",children:[(0,n.jsxs)("div",{className:"min-w-0 flex-1 flex flex-col items-end",children:[(0,n.jsx)("p",{className:(0,a.cn)("text-base font-medium truncate w-full",x?"text-gray-900 dark:text-white/90":"text-gray-900 dark:text-white"),children:r}),(0,n.jsx)("p",{className:(0,a.cn)("text-xs truncate w-full mt-0.5",x?"text-gray-600 dark:text-white/70":"text-gray-500 dark:text-gray-400"),children:S?I:s?null:"Kies entiteiten in bewerken"})]}),g&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),g()},className:(0,a.cn)("p-1.5 rounded-lg shrink-0 transition-colors",x?"text-gray-500 hover:text-gray-800 hover:bg-black/5 dark:text-white/70 dark:hover:text-white dark:hover:bg-white/10":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-white/10"),"aria-label":"Bewerken",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})})]}),s&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),P()},disabled:k,className:(0,a.cn)("mt-auto flex shrink-0 items-center justify-center rounded-full h-9 w-9 transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400 focus-visible:ring-offset-2 disabled:opacity-70",x?j?"bg-[#FFD41D] text-white":"bg-gray-300 text-gray-600 dark:bg-white/20 dark:text-white/60":j?"bg-[#FFD41D] text-white shadow-sm":"bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-gray-400"),"aria-label":j?"Lamp uitzetten":"Lamp aanzetten",children:(0,n.jsx)(u.A,{className:"h-5 w-5 shrink-0",strokeWidth:1.5,fill:j?"currentColor":"none","aria-hidden":!0})})]})})]})}let tI="dashboard.floatingRoomCardPosition.";function tH(e){try{let t=localStorage.getItem(tI+e);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-200}}catch(e){}return null}function tD(e,t){try{localStorage.setItem(tI+e,JSON.stringify(t))}catch(e){}}function tL(e){let{widget:t,widgetIndex:r=0,editMode:l=!1,onRemove:i,onEdit:s,onEnterEditMode:u}=e,c=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(500,Math.max(200,Math.round(t))):280}(t.width),d=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(300,Math.max(80,Math.round(t))):120}(t.height),[m,h]=(0,o.useState)(()=>{var e;return null!=(e=tH(t.id))?e:{left:0,bottom:24}}),[b,f]=(0,o.useState)(!1),x=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),g=(0,o.useRef)(!1),p=(0,o.useRef)(!1),w=(0,o.useRef)(null),v=(0,o.useCallback)(()=>{null!=w.current&&(clearTimeout(w.current),w.current=null)},[]),y=(0,o.useCallback)(e=>{var t,r;!l&&u&&(v(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),w.current=setTimeout(()=>{w.current=null,u()},500))},[l,u,v]),k=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),v()},[v]);(0,o.useEffect)(()=>{var e,r;if(p.current)return;p.current=!0;let n={maxLeft:window.innerWidth-c,maxBottom:window.innerHeight-d-24},l=tH(t.id);if(l)return void h(C(l,n));let a=C((e=c,r=d,{left:(window.innerWidth-e)/2,bottom:(window.innerHeight-r-24)/2}),n);h(a),tD(t.id,a)},[t.id,r,c,d]);let N=(0,o.useCallback)(e=>{var t,r,n,a;l&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(g.current=!0,x.current={x:e.clientX,y:e.clientY,left:m.left,bottom:m.bottom},null==(n=(a=e.currentTarget).setPointerCapture)||n.call(a,e.pointerId)))},[m,l]),j=window.innerWidth-c,P=window.innerHeight-d-24,M=(0,o.useCallback)(e=>{if(!g.current)return;if(!b){let t=e.clientX-x.current.x,r=e.clientY-x.current.y;if(!(Math.abs(t)>6||Math.abs(r)>6))return;e.preventDefault(),f(!0)}let t=e.clientX-x.current.x,r=e.clientY-x.current.y;h(C({left:Math.max(0,Math.min(x.current.left+t,j)),bottom:Math.max(0,Math.min(x.current.bottom-r,P))},{maxLeft:j,maxBottom:P}))},[b,j,P]),S=(0,o.useCallback)(e=>{var r,n;if(g.current=!1,b){e.preventDefault(),f(!1);let r=e.clientX-x.current.x,n=e.clientY-x.current.y,l=C({left:Math.max(0,Math.min(x.current.left+r,j)),bottom:Math.max(0,Math.min(x.current.bottom-n,P))},{maxLeft:j,maxBottom:P});h(l),tD(t.id,l)}null==(r=(n=e.currentTarget).releasePointerCapture)||r.call(n,e.pointerId)},[b,j,P,t.id]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden backdrop-blur-2xl border flex transition-colors duration-200","bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10",l&&"cursor-grab touch-none active:cursor-grabbing",l&&!b&&"animate-edit-wiggle"),style:{left:m.left,bottom:m.bottom,width:c,minHeight:d,...!l&&u?{touchAction:"none"}:{}},...!l&&u&&{onPointerDown:y,onPointerUp:k,onPointerLeave:k,onPointerCancel:k},...l&&{onPointerDown:N,onPointerMove:M,onPointerUp:S,onPointerLeave:e=>{g.current=!1,b&&S(e)},onPointerCancel:S},children:(0,n.jsx)("div",{className:(0,a.cn)("shrink-0 flex flex-col w-full",l&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(tA,{title:t.title,entity_id:t.entity_id,icon:t.icon,light_entity_id:t.light_entity_id,background_image:t.background_image,icon_background_color:t.icon_background_color,width:c,height:d,embedded:!0,onMoreClick:l?s:void 0})})})}function tW(e){var t,r;let n=(0,c.j)(t=>t.getState(e));if(!n)return{value:void 0,unit:""};let l=n.state;return{value:null!=l&&"unavailable"!==l&&"unknown"!==l?Number(l):void 0,unit:null!=(r=null==(t=n.attributes)?void 0:t.unit_of_measurement)?r:""}}function tO(e,t){if(null==e||Number.isNaN(e))return"—";let r=Math.round(100*e)/100;return t?"".concat(r," ").concat(t):String(r)}function tz(e){var t,r,l;let{title:i="Gas",entity_id:o,current_entity_id:s,icon:u="Fuel",icon_background_color:c,max_value:d=10,className:m,onMoreClick:h}=e,b=tW(o),f=tW(null!=s?s:""),x=null!=(t=f.value)?t:0,g=null!=(r=b.value)?r:0,p=b.unit||f.unit||"",w=d>0?Math.min(100,x/d*100):0,v=null!=(l=eN[u])?l:eN.Fuel,y=c&&/^#[0-9A-Fa-f]{6}$/.test(c)?c:"#3B82F6";return(0,n.jsxs)("div",{className:(0,a.cn)("flex w-full flex-1 min-h-0 overflow-hidden rounded-2xl min-h-[130px]","bg-white/10 dark:bg-black/50 text-gray-900 dark:text-white shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10",m),children:[(0,n.jsxs)("div",{className:"flex flex-1 min-w-0 flex-col p-4",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,n.jsx)("div",{className:"flex shrink-0 items-center justify-center h-10 w-10 rounded-xl",style:{backgroundColor:"".concat(y,"20"),color:y},children:(0,n.jsx)(v,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white truncate max-w-full",children:i})]}),h&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h()},className:"p-1.5 rounded-lg shrink-0 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-5 w-5","aria-hidden":!0})})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600 dark:text-white/70 tabular-nums mt-1",children:[tO(x,p)," • ",tO(g,p)]})]}),(0,n.jsx)("div",{className:"relative shrink-0 self-center w-5 h-[110px] my-3 mx-2 bg-white/20 dark:bg-white/10 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 rounded-full transition-all duration-300",style:{height:"".concat(w,"%"),minHeight:4*(w>0),backgroundColor:y}})})]})}let tR="dashboard.floatingNutsCardPosition.";function tY(e){try{let t=localStorage.getItem(tR+e);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-200}}catch(e){}return null}function tX(e,t){try{localStorage.setItem(tR+e,JSON.stringify(t))}catch(e){}}function tF(e){let{widget:t,widgetIndex:r=0,editMode:l=!1,onRemove:i,onEdit:s,onEnterEditMode:u}=e,c=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(400,Math.max(150,Math.round(t))):250}(t.width),d=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(300,Math.max(80,Math.round(t))):130}(t.height),[m,h]=(0,o.useState)(()=>{var e;return null!=(e=tY(t.id))?e:{left:0,bottom:24}}),[b,f]=(0,o.useState)(!1),x=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),g=(0,o.useRef)(!1),p=(0,o.useRef)(null),w=(0,o.useCallback)(()=>{null!=p.current&&(clearTimeout(p.current),p.current=null)},[]),v=(0,o.useCallback)(e=>{var t,r;!l&&u&&(w(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),p.current=setTimeout(()=>{p.current=null,u()},500))},[l,u,w]),y=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),w()},[w]);(0,o.useEffect)(()=>{var e,r;if(g.current)return;g.current=!0;let n={maxLeft:window.innerWidth-c,maxBottom:window.innerHeight-d-24},l=tY(t.id);if(l)return void h(C(l,n));let a=C((e=c,r=d,{left:(window.innerWidth-e)/2,bottom:(window.innerHeight-r-24)/2}),n);h(a),tX(t.id,a)},[t.id,c,d]);let k=(0,o.useCallback)(e=>{var t,r,n,a;l&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),f(!0),x.current={x:e.clientX,y:e.clientY,left:m.left,bottom:m.bottom},null==(n=(a=e.currentTarget).setPointerCapture)||n.call(a,e.pointerId)))},[m,l]),N=(0,o.useCallback)(e=>{if(!b)return;let t=e.clientX-x.current.x,r=e.clientY-x.current.y,n=window.innerWidth-c,l=window.innerHeight-d-24;h(C({left:Math.max(0,Math.min(x.current.left+t,n)),bottom:Math.max(0,Math.min(x.current.bottom-r,l))},{maxLeft:n,maxBottom:l}))},[b,c,d]),j=(0,o.useCallback)(e=>{var r,n;if(b){f(!1);let r=e.clientX-x.current.x,n=e.clientY-x.current.y,l=window.innerWidth-c,a=window.innerHeight-d-24,i=C({left:Math.max(0,Math.min(x.current.left+r,l)),bottom:Math.max(0,Math.min(x.current.bottom-n,a))},{maxLeft:l,maxBottom:a});h(i),tX(t.id,i)}null==(r=(n=e.currentTarget).releasePointerCapture)||r.call(n,e.pointerId)},[b,t.id,c,d]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",l&&"cursor-grab touch-none active:cursor-grabbing",l&&!b&&"animate-edit-wiggle"),style:{left:m.left,bottom:m.bottom,width:c,height:d,...!l&&u?{touchAction:"none"}:{}},...!l&&u&&{onPointerDown:v,onPointerUp:y,onPointerLeave:y,onPointerCancel:y},...l&&{onPointerDown:k,onPointerMove:N,onPointerUp:j,onPointerLeave:e=>{b&&j(e)},onPointerCancel:j},children:(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col h-full min-h-0",l&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(tz,{title:t.title,entity_id:t.entity_id,current_entity_id:t.current_entity_id,icon:t.icon,icon_background_color:t.icon_background_color,max_value:t.max_value,onMoreClick:l?s:void 0})})})}let tU={red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30",amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",green:"border-green-400/50 dark:border-green-400/40 bg-green-500/25 dark:bg-green-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",blue:"border-blue-400/50 dark:border-blue-400/40 bg-blue-500/25 dark:bg-blue-900/30",violet:"border-violet-400/50 dark:border-violet-400/40 bg-violet-500/25 dark:bg-violet-900/30",purple:"border-purple-400/50 dark:border-purple-400/40 bg-purple-500/25 dark:bg-purple-900/30",slate:"border-slate-400/50 dark:border-slate-400/40 bg-slate-500/25 dark:bg-slate-900/30"},tJ={red:"text-red-600 dark:text-red-300",amber:"text-amber-600 dark:text-amber-400",green:"text-green-600 dark:text-green-300",emerald:"text-emerald-600 dark:text-emerald-300",blue:"text-blue-600 dark:text-blue-300",violet:"text-violet-600 dark:text-violet-300",purple:"text-purple-600 dark:text-purple-300",slate:"text-slate-600 dark:text-slate-300"},tB={amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",purple:"border-purple-400/50 dark:border-purple-400/40 bg-purple-500/25 dark:bg-purple-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30"},tE={amber:"text-amber-600 dark:text-amber-400",purple:"text-purple-600 dark:text-purple-300",emerald:"text-emerald-600 dark:text-emerald-300",red:"text-red-600 dark:text-red-300"};function tq(e){let{title:t="Stat",entity_id:r,label:l,icon:i,color:o="amber",conditions:s,size:u="md",className:d,onMoreClick:m}=e,h=(0,c.j)(e=>e.states[r]);(0,c.j)(e=>e.updatedAt);let b=null==h?void 0:h.state,{display:f}=function(e){var t,r;let n=(0,c.j)(t=>t.states[e]);(0,c.j)(e=>e.updatedAt);let l=null==n?void 0:n.state,a=null!=(r=null==n||null==(t=n.attributes)?void 0:t.unit_of_measurement)?r:"";if(null==l||"unavailable"===l||"unknown"===l)return{display:"—"};let i=Number(l);if(!Number.isNaN(i)){let e=Math.round(10*i)/10;return{display:a?"".concat(e," ").concat(a):String(e)}}let o=String(l);return{display:o.charAt(0).toUpperCase()+o.slice(1)}}(r),x=i&&eN[i]?eN[i]:eN.Sun,g=function(e,t){if(null==e||"unavailable"===e||"unknown"===e||!(null==t?void 0:t.length))return null;let r=Number(e),n=!Number.isNaN(r);for(let l of t){let t=l.value.trim();if(!t)continue;let a=Number(t),i=""!==t&&!Number.isNaN(a);if(n&&i)switch(l.operator){case"gt":if(r>a)return l.color;break;case"gte":if(r>=a)return l.color;break;case"lt":if(r<a)return l.color;break;case"lte":if(r<=a)return l.color;break;case"eq":if(r===a)return l.color;break;case"neq":if(r!==a)return l.color}else{let o=String(e).toLowerCase(),s=t.toLowerCase();switch(l.operator){case"eq":if(o===s)return l.color;break;case"neq":if(o!==s)return l.color;break;case"contains":if(o.includes(s)||s.includes(o))return l.color;break;case"gt":case"gte":case"lt":case"lte":if(n&&i&&("gt"===l.operator&&r>a||"gte"===l.operator&&r>=a||"lt"===l.operator&&r<a||"lte"===l.operator&&r<=a))return l.color}}}return null}(b,s),p=g&&tU[g]?tU[g]:tB[o],w=g&&tJ[g]?tJ[g]:tE[o],v=(0,a.cn)("h-3.5 w-3.5 shrink-0",w);return(0,n.jsxs)("div",{className:(0,a.cn)("relative flex items-center justify-center p-4","sm"===u&&"text-sm","md"===u&&"text-base","lg"===u&&"text-lg",d),children:[(0,n.jsxs)("div",{className:(0,a.cn)("inline-flex items-center gap-2 rounded-full border backdrop-blur-xl shadow-lg px-3 py-1.5","text-gray-900 dark:text-white",p),children:[(0,n.jsx)(x,{className:v,"aria-hidden":!0}),(0,n.jsxs)("div",{className:"flex flex-col items-start gap-0.5",children:[(0,n.jsx)("span",{className:"text-xs font-bold tabular-nums leading-none text-inherit",children:f}),(0,n.jsx)("span",{className:"text-[9px] font-medium leading-none opacity-80",children:null!=l?l:t})]})]}),m&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),m()},className:"absolute right-2 bottom-2 p-1.5 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-900/5 dark:hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-4 w-4","aria-hidden":!0})})]})}Object.keys(tU);let tK="dashboard.floatingStatPillCardPosition.";function tG(e){try{let t=localStorage.getItem(tK+e);if(!t)return null;let r=JSON.parse(t);if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.bottom))return{left:r.left,bottom:r.bottom};if("number"==typeof(null==r?void 0:r.left)&&"number"==typeof(null==r?void 0:r.top))return{left:r.left,bottom:window.innerHeight-r.top-120}}catch(e){}return null}function tV(e,t){try{localStorage.setItem(tK+e,JSON.stringify(t))}catch(e){}}function t$(e){let{widgetId:t,widgetIndex:r=0,title:l,entity_id:i,label:s,icon:u,color:c="amber",conditions:d,size:m="md",editMode:h=!1,onRemove:b,onEdit:f,onEnterEditMode:x}=e,[g,p]=(0,o.useState)(()=>{var e;return null!=(e=tG(t))?e:{left:0,bottom:0}}),[w,v]=(0,o.useState)(!1),y=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),k=(0,o.useRef)(!1),N=(0,o.useRef)(null),j=(0,o.useCallback)(()=>{null!=N.current&&(clearTimeout(N.current),N.current=null)},[]),P=(0,o.useCallback)(e=>{var t,r;!h&&x&&(j(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),N.current=setTimeout(()=>{N.current=null,x()},500))},[h,x,j]),M=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),j()},[j]);(0,o.useEffect)(()=>{if(k.current)return;k.current=!0;let e={maxLeft:window.innerWidth-260,maxBottom:window.innerHeight-120},n=tG(t);if(n)return void p(C(n,e));let l=C(function(e){let t=window.innerWidth-260;return{left:Math.min(276*e,t/2),bottom:(window.innerHeight-120)/2}}(r),e);p(l),tV(t,l)},[t,r]);let S=(0,o.useCallback)(e=>{var t,r,n,l;h&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),v(!0),y.current={x:e.clientX,y:e.clientY,left:g.left,bottom:g.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[g,h]),_=(0,o.useCallback)(e=>{if(!w)return;let t=e.clientX-y.current.x,r=e.clientY-y.current.y,n=window.innerWidth-260,l=window.innerHeight-120;p(C({left:Math.max(0,Math.min(y.current.left+t,n)),bottom:Math.max(0,Math.min(y.current.bottom-r,l))},{maxLeft:n,maxBottom:l}))},[w]),T=(0,o.useCallback)(e=>{var r,n;if(w){v(!1);let r=e.clientX-y.current.x,n=e.clientY-y.current.y,l=window.innerWidth-260,a=window.innerHeight-120,i=C({left:Math.max(0,Math.min(y.current.left+r,l)),bottom:Math.max(0,Math.min(y.current.bottom-n,a))},{maxLeft:l,maxBottom:a});p(i),tV(t,i)}null==(r=(n=e.currentTarget).releasePointerCapture)||r.call(n,e.pointerId)},[w,t]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 w-[260px] overflow-visible bg-transparent",h&&"cursor-grab touch-none active:cursor-grabbing",h&&!w&&"animate-edit-wiggle"),style:{left:g.left,bottom:g.bottom,...!h&&x?{touchAction:"none"}:{}},...!h&&x&&{onPointerDown:P,onPointerUp:M,onPointerLeave:M,onPointerCancel:M},...h&&{onPointerDown:S,onPointerMove:_,onPointerUp:T,onPointerLeave:e=>{w&&T(e)},onPointerCancel:T},children:(0,n.jsx)("div",{className:(0,a.cn)(h&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(tq,{title:l,entity_id:i,label:s,icon:u,color:c,conditions:d,size:m,onMoreClick:h?f:void 0})})})}var tZ=r(60890),tQ=r(89559);function t0(e){var t,r;let{title:l="Camera",entity_id:i,size:s="md",refresh:u=10,show_title:d=!0,className:m,onMoreClick:h}=e,b=(0,c.j)(e=>e.getState(i)),f=null!=(r=null==b||null==(t=b.attributes)?void 0:t.friendly_name)?r:i,[x,g]=(0,o.useState)(0),p=i?"/api/ha/camera-image?entity_id=".concat(encodeURIComponent(i),"&t=").concat(x):null;return(0,o.useEffect)(()=>{if(!u||u<1)return;let e=setInterval(()=>g(e=>e+1),1e3*u);return()=>clearInterval(e)},[u]),(0,n.jsxs)("div",{className:(0,a.cn)("flex flex-col overflow-hidden rounded-2xl bg-black/80 dark:bg-black/90 text-white shadow-xl border border-white/20 dark:border-white/10","sm"===s&&"text-sm","md"===s&&"text-base","lg"===s&&"text-lg",m),children:[(0,n.jsxs)("div",{className:"relative flex-1 min-h-0 w-full bg-black overflow-hidden",children:[p?(0,n.jsx)(eX.default,{src:p,alt:l,fill:!0,sizes:"(max-width: 640px) 100vw, 640px",className:"object-cover",unoptimized:!0}):(0,n.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-white/50",children:[(0,n.jsx)(tZ.A,{className:"h-12 w-12","aria-hidden":!0}),(0,n.jsx)("span",{className:"sr-only",children:"Geen camera"})]}),(0,n.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[(0,n.jsx)("button",{type:"button",onClick:function(){g(e=>e+1)},className:"p-1.5 rounded-lg bg-black/50 hover:bg-black/70 text-white/90 transition-colors","aria-label":"Ververs",children:(0,n.jsx)(tQ.A,{className:"h-4 w-4","aria-hidden":!0})}),h&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h()},className:"p-1.5 rounded-lg bg-black/50 hover:bg-black/70 text-white/90 transition-colors","aria-label":"Opties",children:(0,n.jsx)(W.A,{className:"h-4 w-4","aria-hidden":!0})})]})]}),d&&(0,n.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between gap-2 shrink-0",children:[(0,n.jsx)("p",{className:"font-medium truncate text-white/90",children:l}),(0,n.jsx)("p",{className:"text-xs text-white/60 truncate max-w-[40%]",children:f})]})]})}let t1="dashboard.floatingCameraCardPosition";function t2(){try{let e=localStorage.getItem(t1);if(!e)return null;let t=JSON.parse(e);if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.bottom))return{left:t.left,bottom:t.bottom};if("number"==typeof(null==t?void 0:t.left)&&"number"==typeof(null==t?void 0:t.top))return{left:t.left,bottom:window.innerHeight-t.top-270}}catch(e){}return null}function t5(e){try{localStorage.setItem(t1,JSON.stringify(e))}catch(e){}}function t4(e){let{title:t,entity_id:r,refresh:l=10,show_title:i=!0,width:s,height:u,editMode:c=!1,onRemove:d,onEdit:m,onEnterEditMode:h}=e,b=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(600,Math.max(200,Math.round(t))):360}(s),f=function(e){let t=Number(e);return Number.isFinite(t)?Math.min(450,Math.max(150,Math.round(t))):270}(u),[x,g]=(0,o.useState)(()=>{var e;return null!=(e=t2())?e:{left:0,bottom:0}}),[p,w]=(0,o.useState)(!1),v=(0,o.useRef)({x:0,y:0,left:0,bottom:0}),y=(0,o.useRef)(!1),k=(0,o.useRef)(null),N=(0,o.useCallback)(()=>{null!=k.current&&(clearTimeout(k.current),k.current=null)},[]),j=(0,o.useCallback)(e=>{var t,r;!c&&h&&(N(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),k.current=setTimeout(()=>{k.current=null,h()},500))},[c,h,N]),P=(0,o.useCallback)(e=>{var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),N()},[N]);(0,o.useEffect)(()=>{var e,t;if(y.current)return;y.current=!0;let r={maxLeft:window.innerWidth-b,maxBottom:window.innerHeight-f-24},n=t2();if(n)return void g(C(n,r));let l=C((e=b,t=f,{left:(window.innerWidth-e)/2,bottom:(window.innerHeight-t-24)/2}),r);g(l),t5(l)},[b,f]);let M=(0,o.useCallback)(e=>{var t,r,n,l;c&&(null!=(t=(r=e.target).closest)&&t.call(r,"button")||(e.preventDefault(),w(!0),v.current={x:e.clientX,y:e.clientY,left:x.left,bottom:x.bottom},null==(n=(l=e.currentTarget).setPointerCapture)||n.call(l,e.pointerId)))},[x,c]),S=window.innerWidth-b,_=window.innerHeight-f-24,T=(0,o.useCallback)(e=>{if(!p)return;let t=e.clientX-v.current.x,r=e.clientY-v.current.y;g(C({left:Math.max(0,Math.min(v.current.left+t,S)),bottom:Math.max(0,Math.min(v.current.bottom-r,_))},{maxLeft:S,maxBottom:_}))},[p,S,_]),A=(0,o.useCallback)(e=>{var t,r;if(p){w(!1);let t=e.clientX-v.current.x,r=e.clientY-v.current.y,n=C({left:Math.max(0,Math.min(v.current.left+t,S)),bottom:Math.max(0,Math.min(v.current.bottom-r,_))},{maxLeft:S,maxBottom:_});g(n),t5(n)}null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId)},[p,S,_]);return(0,n.jsx)("div",{className:(0,a.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-black/90 backdrop-blur-2xl",c&&"cursor-grab touch-none active:cursor-grabbing",c&&!p&&"animate-edit-wiggle"),style:{left:x.left,bottom:x.bottom,width:b,height:f,...!c&&h?{touchAction:"none"}:{}},...!c&&h&&{onPointerDown:j,onPointerUp:P,onPointerLeave:P,onPointerCancel:P},...c&&{onPointerDown:M,onPointerMove:T,onPointerUp:A,onPointerLeave:e=>{p&&A(e)},onPointerCancel:A},children:(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col h-full min-h-0",c&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,n.jsx)(t0,{title:t,entity_id:r,refresh:l,show_title:i,size:"md",onMoreClick:c?m:void 0,className:"flex-1 min-h-0"})})})}},71650:(e,t,r)=>{r.d(t,{n:()=>i});var n=r(95155),l=r(93420),a=r(64269);function i(e){let{className:t}=e;return(0,l.j)(e=>null!=e.error)?(0,n.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-full bg-red-500/90 px-2.5 py-0.5 text-xs font-medium text-white",t),children:"Offline"}):null}},91065:(e,t,r)=>{r.d(t,{j:()=>a});var n=r(95155),l=r(64269);function a(e){let{children:t,className:r,as:a="div"}=e;return(0,n.jsx)(a,{className:(0,l.cn)("glass-card rounded-card border border-white/60 p-4 dark:border-white/10","transition-shadow duration-150 hover:shadow-lg dark:hover:shadow-glass-dark",r),children:t})}}}]);