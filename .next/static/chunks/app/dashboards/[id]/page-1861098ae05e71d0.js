(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{48442:(e,t,r)=>{Promise.resolve().then(r.bind(r,51537))},51537:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var a=r(95155),i=r(20063),d=r(99776),l=r(22454),n=r(80549),o=r(75448),s=r(12115),c=r(47650),g=r(23812),u=r.n(g);r(97517),r(98805);var x=r(40583),h=r(32893),y=r(17666),m=r(85449),b=r(59427),p=r(46705),_=r(80598),v=r(26327),k=r(78192),w=r(65993),j=r(97703),f=r(91456),N=r(6191),C=r(65229),F=r(5917),E=r(18514),S=r(14635),A=r(93420),z=r(71650),B=r(64269);let D=[{type:"title_card",label:"Titel",Icon:x.A},{type:"climate_card_2",label:"Klimaat",Icon:h.A},{type:"light_card",label:"Lamp",Icon:y.A},{type:"media_card",label:"Media",Icon:m.A},{type:"solar_card",label:"Zonnepanelen",Icon:b.A},{type:"energy_monitor_card",label:"Afbeeldingskaart",Icon:b.A},{type:"stat_pill_card",label:"Stat pill",Icon:p.A},{type:"sensor_card",label:"Sensor",Icon:_.A},{type:"weather_card",label:"Weer",Icon:v.A},{type:"vacuum_card",label:"Stofzuiger",Icon:k.A},{type:"pill_card",label:"Pill",Icon:p.A},{type:"room_card",label:"Kamer",Icon:w.A},{type:"nuts_card",label:"Nuts (Gas/Water)",Icon:j.A},{type:"card_group",label:"Kaartgroep",Icon:f.A}],I={title_card:"",energy_usage:"sensor",light_control:"light",wifi:"sensor",solar_charge:"sensor",climate:"climate",climate_card:"climate",climate_card_2:"climate",light_card:"light",lighting_brightness:"light",media_card:"media_player",solar_card:"sensor",energy_monitor_card:"sensor",stat_pill_card:"sensor",sensor_card:"sensor",weather_card:"weather",vacuum_card:"vacuum",pill_card:"switch",room_card:"",nuts_card:"sensor",card_group:""},M=["switch","light","input_boolean","sensor"];function L(e){if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}function W(e){let{type:t,title:r,entity_id:i,consumption_entity_id:d,humidity_entity_id:l,show_icon:n,script_ids:o,script_names:s,cleaned_area_entity_id:c,light_entity_id:g,background_image:u,background_image_dark:x,image_conditions:h,icon:y,size:m,conditions:b,current_entity_id:p,max_value:_,grid_entity_id:v,minimal:k,label:w,color:j}=e,f=null!=m?m:"md",N=(0,A.j)(e=>e.getState(i)),C=(null==N?void 0:N.state)!=null?Number(N.state):void 0,F=(null==N?void 0:N.state)==="on"?"on":"off";switch(t){case"title_card":return(0,a.jsx)(S.Pm,{title:r});case"energy_usage":return(0,a.jsx)(S.uK,{title:r,entity_id:i,size:f,value:C});case"light_control":return(0,a.jsx)(S.oz,{title:r,entity_id:i,size:f,value:C,state:(null==N?void 0:N.state)==="on"?"on":"off"});case"wifi":return(0,a.jsx)(S.Y$,{title:r,entity_id:i,size:f,value:F});case"solar_charge":return(0,a.jsx)(S.gu,{title:r,entity_id:i,size:f,value:C});case"climate":return(0,a.jsx)(S.uU,{title:r,entity_id:i,size:f,value:C});case"lighting_brightness":return(0,a.jsx)(S.MW,{title:r,entity_id:i,size:f,value:C});case"media_card":return(0,a.jsx)(S.$F,{title:r,entity_id:i,size:f});case"climate_card":case"climate_card_2":return(0,a.jsx)(S.S4,{title:r,entity_id:i,humidity_entity_id:l,size:f});case"light_card":return(0,a.jsx)(S.lu,{title:r,entity_id:i,icon:y,size:f});case"solar_card":return(0,a.jsx)(S.y,{title:r,entity_id:i,consumption_entity_id:d,size:f});case"energy_monitor_card":return(0,a.jsx)(S.vA,{title:r,entity_id:i,background_image:u,background_image_dark:x,image_conditions:h,minimal:k,size:f});case"stat_pill_card":return(0,a.jsx)(S.wU,{title:r,entity_id:i,label:w,icon:y,color:null!=j?j:"amber",size:f});case"weather_card":return(0,a.jsx)(S.Fy,{title:r,entity_id:i,show_icon:n,size:f});case"vacuum_card":return(0,a.jsx)(S.Oo,{title:r,entity_id:i,script_ids:o,script_names:s,cleaned_area_entity_id:c,icon:y,size:f});case"sensor_card":return(0,a.jsx)(S.j1,{title:r,entity_id:i,icon:y,show_icon:n,size:f,conditions:b});case"room_card":return(0,a.jsx)(S.Kq,{title:r,entity_id:i,icon:y,light_entity_id:g,background_image:u});case"nuts_card":return(0,a.jsx)(S.Hm,{title:r,entity_id:i,current_entity_id:p,icon:y,max_value:_});default:return(0,a.jsx)("div",{className:"rounded-card border border-dashed p-4 text-sm text-gray-500",children:r||t})}}function T(){var e,t,r,g,x,h,y,m,b,p,_,v,k,w,j,f,T,K,R,P,V,G,O,q,U,Z,H,$,Y,J,Q,X,ee,et,er,ea;let ei=(0,i.useParams)(),ed=(0,i.useRouter)(),el=(0,d.jE)(),en=null==ei?void 0:ei.id,[eo,es]=(0,s.useState)(!1),[ec,eg]=(0,s.useState)([]),[eu,ex]=(0,s.useState)([]),[eh,ey]=(0,s.useState)(""),[em,eb]=(0,s.useState)(""),[ep,e_]=(0,s.useState)(!1),[ev,ek]=(0,s.useState)([]),[ew,ej]=(0,s.useState)(!1),[ef,eN]=(0,s.useState)("type"),[eC,eF]=(0,s.useState)(null),[eE,eS]=(0,s.useState)(""),[eA,ez]=(0,s.useState)(""),[eB,eD]=(0,s.useState)(""),[eI,eM]=(0,s.useState)(null),[eL,eW]=(0,s.useState)(null),[eT,eK]=(0,s.useState)({title:"",entity_id:"",consumption_entity_id:"",grid_entity_id:"",humidity_entity_id:"",show_icon:!0,show_state:!0,script_ids:[],script_names:{},cleaned_area_entity_id:"",current_entity_id:"",light_entity_id:"",background_image:"",background_image_dark:"",icon_background_color:"",width:void 0,height:void 0,icon:"",size:"md",conditions:[],image_conditions:[],minimal:!1,scale:1,label:"",color:"amber"}),[eR,eP]=(0,s.useState)(""),[eV,eG]=(0,s.useState)(""),[eO,eq]=(0,s.useState)(""),[eU,eZ]=(0,s.useState)(""),[eH,e$]=(0,s.useState)("general"),eY=(0,s.useRef)(null);function eJ(){null!=eY.current&&(clearTimeout(eY.current),eY.current=null)}function eQ(e){var t,r;eo||(e.preventDefault(),null==(t=(r=e.currentTarget).setPointerCapture)||t.call(r,e.pointerId),eJ(),eY.current=setTimeout(()=>{eY.current=null,es(!0)},500))}function eX(e){var t,r;null==(t=(r=e.currentTarget).releasePointerCapture)||t.call(r,e.pointerId),eJ()}let e0=eI?eu.find(e=>e.id===eI):null;(0,s.useEffect)(()=>{eI||eW(null)},[eI]),(0,s.useEffect)(()=>{var e,t,r,a,i,d,l,n,o,s,c,g,u,x,h,y,m,b,p,_,v,k,w,j,f,N,C,F,E,S,A,z,B;if((null==e0?void 0:e0.type)==="card_group"&&eL){let l=(null!=(e=e0.children)?e:[]).find(e=>e.id===eL);l&&(eK({title:null!=(t=l.title)?t:"",entity_id:null!=(r=l.entity_id)?r:"",consumption_entity_id:"",humidity_entity_id:"",show_icon:!0,script_ids:[],script_names:{},cleaned_area_entity_id:"",icon:null!=(a=l.icon)?a:"",size:"md",conditions:null!=(i=l.conditions)?i:[],show_state:!1!==l.show_state}),eZ(null!=(d=l.icon)?d:""));return}e0&&(eK({title:null!=(l=e0.title)?l:"",entity_id:null!=(n=e0.entity_id)?n:"",consumption_entity_id:null!=(o=e0.consumption_entity_id)?o:"",grid_entity_id:null!=(s=e0.grid_entity_id)?s:"",humidity_entity_id:null!=(c=e0.humidity_entity_id)?c:"",show_icon:!1!==e0.show_icon,script_ids:null!=(g=e0.script_ids)?g:[],script_names:null!=(u=e0.script_names)?u:{},cleaned_area_entity_id:null!=(x=e0.cleaned_area_entity_id)?x:"",light_entity_id:null!=(h=e0.light_entity_id)?h:"",background_image:null!=(y=e0.background_image)?y:"",background_image_dark:null!=(m=e0.background_image_dark)?m:"",icon_background_color:null!=(b=e0.icon_background_color)?b:"",width:null!=(p=e0.width)?p:void 0,height:null!=(_=e0.height)?_:void 0,icon:null!=(v=e0.icon)?v:"",size:null!=(k=e0.size)?k:"md",conditions:null!=(w=e0.conditions)?w:[],image_conditions:null!=(j=e0.image_conditions)?j:[],show_state:!1!==e0.show_state,current_entity_id:null!=(f=e0.current_entity_id)?f:"",max_value:null!=(N=e0.max_value)?N:void 0,minimal:null!=(C=e0.minimal)&&C,scale:null!=(F=e0.scale)?F:1,label:null!=(E=e0.label)?E:"",color:null!=(S=e0.color)?S:"amber"}),eP(""),eG("vacuum_card"===e0.type&&null!=(A=e0.icon)?A:""),eq("sensor_card"===e0.type&&null!=(z=e0.icon)?z:""),eZ("pill_card"===e0.type&&null!=(B=e0.icon)?B:""),eD(""),ez(""),"sensor_card"===e0.type&&e$("general"))},[null==e0?void 0:e0.id,null==e0?void 0:e0.title,null==e0?void 0:e0.entity_id,null==e0?void 0:e0.consumption_entity_id,null==e0?void 0:e0.grid_entity_id,null==e0?void 0:e0.humidity_entity_id,null==e0?void 0:e0.show_icon,null==e0?void 0:e0.show_state,null==e0?void 0:e0.script_ids,null==e0?void 0:e0.script_names,null==e0?void 0:e0.cleaned_area_entity_id,null==e0?void 0:e0.light_entity_id,null==e0?void 0:e0.background_image,null==e0?void 0:e0.background_image_dark,null==e0?void 0:e0.image_conditions,null==e0?void 0:e0.icon_background_color,null==e0?void 0:e0.width,null==e0?void 0:e0.height,null==e0?void 0:e0.icon,null==e0?void 0:e0.size,null==e0?void 0:e0.conditions,null==e0?void 0:e0.type,null==e0?void 0:e0.children,null==e0?void 0:e0.current_entity_id,null==e0?void 0:e0.max_value,null==e0?void 0:e0.minimal,null==e0?void 0:e0.scale,null==e0?void 0:e0.label,null==e0?void 0:e0.color,eL]);let{data:e2,isLoading:e1,error:e5}=(0,l.I)({queryKey:["dashboard",en],queryFn:async()=>{let e=await fetch("/api/dashboards/".concat(en));if(!e.ok)throw Error("Failed to load");return e.json()},enabled:!!en});(0,s.useEffect)(()=>{var e,t;if(!e2||ep)return;let r=L(e2.widgets);ex(r);let a=function(e){if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}(e2.layout);a.length>0?eg(a):r.length>0&&eg(r.map((e,t)=>({i:e.id,x:t%3*4,y:2*Math.floor(t/3),w:4,h:2}))),ey(null!=(e=e2.welcomeTitle)?e:""),eb(null!=(t=e2.welcomeSubtitle)?t:""),e_(!0)},[e2,ep]),(0,s.useEffect)(()=>{eo&&fetch("/api/ha/entities").then(e=>e.json()).then(e=>Array.isArray(e)?ek(e):ek([])).catch(()=>ek([]))},[eo]);let e4=(0,A.j)(e=>e.requestRefresh);(0,s.useEffect)(()=>{e2&&L(e2.widgets).some(e=>"stat_pill_card"===e.type)&&e4()},[e2,e4]),(0,s.useEffect)(()=>{e5&&en&&ed.replace("/dashboards")},[e5,en,ed]);let e3=(0,n.n)({mutationFn:async e=>{let t=await fetch("/api/dashboards/".concat(en),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout:JSON.stringify(e.layout),widgets:JSON.stringify(e.widgets),...void 0!==e.welcomeTitle&&{welcomeTitle:e.welcomeTitle||null},...void 0!==e.welcomeSubtitle&&{welcomeSubtitle:e.welcomeSubtitle||null}})});if(!t.ok)throw Error("Save failed");return t.json()},onSuccess:()=>{el.invalidateQueries({queryKey:["dashboard",en]})}}),e9=ec.filter(e=>{var t;let r=null==(t=eu.find(t=>t.id===e.i))?void 0:t.type;return"media_card"!==r&&"climate_card"!==r&&"climate_card_2"!==r&&"light_card"!==r&&"solar_card"!==r&&"energy_monitor_card"!==r&&"stat_pill_card"!==r&&"sensor_card"!==r&&"weather_card"!==r&&"vacuum_card"!==r&&"title_card"!==r&&"pill_card"!==r&&"room_card"!==r&&"nuts_card"!==r&&"card_group"!==r}),e6=new Map(ec.map(e=>[e.i,e]));function e7(e,t,r){let a=(0,B.$)(),i={id:a,type:e,title:null!=r?r:e.replace(/_/g," "),entity_id:t,..."card_group"===e&&{children:[],alignment:"start"}},d=0===ec.length?0:Math.max(...ec.map(e=>e.y+e.h)),l="title_card"===e,n=[...eu,i],o="solar_card"===e||"energy_monitor_card"===e||"sensor_card"===e||"weather_card"===e||"climate_card"===e||"climate_card_2"===e||"light_card"===e||"vacuum_card"===e||"title_card"===e||"pill_card"===e||"room_card"===e||"nuts_card"===e||"card_group"===e?ec:[...ec,{i:a,x:0,y:d,w:l?12:4,h:l?1:2}];return ex(n),eg(o),ej(!1),eN("type"),eF(null),e3.mutate({layout:o,widgets:n,welcomeTitle:eh,welcomeSubtitle:em}),"room_card"===e||"nuts_card"===e||"energy_monitor_card"===e||"stat_pill_card"===e?a:void 0}let e8=eC?I[eC]:null,te="pill_card"===eC?ev.filter(e=>M.some(t=>e.entity_id.startsWith(t+"."))):null!=e8?ev.filter(e=>e.entity_id.startsWith(e8+".")):ev;function tt(e){ex(t=>t.filter(t=>t.id!==e)),eg(t=>t.filter(t=>t.i!==e))}if(!en)return(0,a.jsx)(o.AppShell,{activeTab:"/dashboards",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Invalid dashboard id."})});if(e1||e5)return(0,a.jsx)(o.AppShell,{activeTab:"/dashboards",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e5?"Dashboard not found, redirecting…":"Loading…"})});let tr=(0,a.jsx)(a.Fragment,{children:eo?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",onClick:()=>ej(!0),className:"flex h-8 w-8 items-center justify-center rounded-full text-white hover:opacity-90",style:{backgroundColor:"#4D2FB2"},"aria-label":"Kaart toevoegen",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})}),ew&&"undefined"!=typeof document&&(0,c.createPortal)((0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-[300] bg-black/50 backdrop-blur-xl","aria-hidden":!0,onClick:()=>{ej(!1),eN("type"),eF(null),eS("")}}),(0,a.jsxs)("div",{className:"fixed left-1/2 top-1/2 z-[301] w-full max-w-md -translate-x-1/2 -translate-y-1/2 rounded-xl border border-gray-200 bg-white p-4 shadow-xl dark:border-white/10 dark:bg-black/50 dark:backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"type"===ef?"Kaart toevoegen":"Kies entity"}),(0,a.jsx)("button",{type:"button",onClick:()=>{ej(!1),eN("type"),eF(null),eS("")},className:"p-1.5 rounded-lg text-gray-500 hover:bg-gray-100 dark:hover:bg-white/10 dark:text-gray-400","aria-label":"Sluiten",children:(0,a.jsx)(C.A,{className:"h-5 w-5"})})]}),"type"===ef?(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:D.map(e=>{let{type:t,label:r,Icon:i}=e;return(0,a.jsxs)("button",{type:"button",onClick:()=>{if("title_card"===t){e7("title_card","","Titel"),ej(!1);return}if("card_group"===t){e7("card_group","","Kaartgroep"),ej(!1);return}if("room_card"===t){let e=e7("room_card","","Kamer");e&&eM(e);return}if("energy_monitor_card"===t){let e=e7("energy_monitor_card","","Afbeeldingskaart");e&&eM(e),ej(!1);return}eF(t),eN("entity")},className:"flex flex-col items-center gap-2 rounded-xl border border-gray-200 bg-gray-50/80 py-4 px-3 transition-colors hover:border-[#4D2FB2]/40 hover:bg-[#4D2FB2]/5 dark:border-white/10 dark:bg-white/5 dark:hover:border-[#4D2FB2]/50 dark:hover:bg-[#4D2FB2]/10",children:[(0,a.jsx)(i,{className:"h-7 w-7 text-gray-600 dark:text-gray-400"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 text-center leading-tight",children:r})]},t)})}):(0,a.jsxs)("div",{className:"flex flex-col max-h-[60vh]",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{eN("type"),eF(null),eS("")},className:"mb-3 self-start px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg",children:"← Terug"}),(0,a.jsx)("input",{type:"text",value:eE,onChange:e=>eS(e.target.value),placeholder:"Zoek op naam of entity_id (bijv. sensor.woonkamer)…",className:"mb-2 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",autoFocus:!0}),(0,a.jsx)("div",{className:"overflow-auto rounded-lg border border-gray-200 dark:border-white/10 divide-y divide-gray-100 dark:divide-white/5 max-h-[50vh]",children:(()=>{let e=eE.trim().toLowerCase(),t=e?te.filter(t=>{var r,a;return(null!=(a=null==(r=t.attributes)?void 0:r.friendly_name)?a:t.entity_id).toLowerCase().includes(e)||t.entity_id.toLowerCase().includes(e)}):te;return 0===t.length?(0,a.jsx)("p",{className:"px-4 py-6 text-sm text-gray-500 dark:text-gray-400 text-center",children:0===te.length?"Geen entities gevonden. Controleer je HA-verbinding in Instellingen.":"Geen resultaten voor je zoekopdracht."}):t.map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("button",{type:"button",onClick:()=>{if(eC){var t,r;let a=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id,i=e7(eC,e.entity_id,"nuts_card"===eC?a||"Gas":"energy_monitor_card"===eC?a||"Afbeeldingskaart":"stat_pill_card"===eC?a||"Stat":void 0);("nuts_card"===eC||"stat_pill_card"===eC)&&i&&eM(i)}ej(!1),eN("type"),eF(null),eS("")},className:"block w-full px-4 py-2.5 text-left text-sm hover:bg-gray-100 dark:hover:bg-white/10 truncate",title:e.entity_id,children:i},e.entity_id)})})()})]})]})]}),document.body)]}),(0,a.jsx)("div",{className:"relative z-[60]",children:(0,a.jsx)("button",{type:"button",onClick:()=>{eM(null),eW(null),es(!1),e3.mutate({layout:ec,widgets:eu,welcomeTitle:eh,welcomeSubtitle:em})},disabled:e3.isPending,className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-200 dark:bg-white/10 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-white/20","aria-label":"Done editing",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})})]}):(0,a.jsx)("button",{type:"button",onClick:()=>es(!0),className:"flex h-8 w-8 items-center justify-center rounded-full text-white hover:opacity-90",style:{backgroundColor:"#4D2FB2"},"aria-label":"Edit dashboard",children:(0,a.jsx)(E.A,{className:"h-4 w-4"})})}),ta=eu.some(e=>"card_group"===e.type);return(0,a.jsx)(o.AppShell,{activeTab:"/dashboards",headerEndAction:tr,welcomeTitle:eh||void 0,welcomeSubtitle:em||void 0,welcomeEditable:eo,onWelcomeChange:eo?e=>{let{title:t,subtitle:r}=e;ey(t),eb(r)}:void 0,contentNoScroll:ta,children:(0,a.jsxs)("div",{className:"space-y-6 overflow-x-hidden min-h-0",children:[(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)(z.n,{})}),(0,a.jsx)("div",{className:"rounded-card overflow-hidden",children:(0,a.jsx)(u(),{className:"layout",layout:e9,onLayoutChange:e=>{eg(t=>[...e,...t.filter(e=>{var t;let r=null==(t=eu.find(t=>t.id===e.i))?void 0:t.type;return"media_card"===r||"climate_card"===r||"climate_card_2"===r||"title_card"===r||"pill_card"===r||"room_card"===r||"nuts_card"===r||"card_group"===r})])},cols:12,rowHeight:52,width:1200,margin:[6,4],containerPadding:[0,0],isDraggable:eo,isResizable:eo,draggableHandle:eo?".tile-drag-handle":void 0,children:eu.filter(e=>"media_card"!==e.type&&"climate_card"!==e.type&&"climate_card_2"!==e.type&&"light_card"!==e.type&&"solar_card"!==e.type&&"energy_monitor_card"!==e.type&&"stat_pill_card"!==e.type&&"weather_card"!==e.type&&"vacuum_card"!==e.type&&"title_card"!==e.type&&"pill_card"!==e.type&&"room_card"!==e.type&&"nuts_card"!==e.type&&"card_group"!==e.type).map(e=>e6.get(e.id)?(0,a.jsxs)("div",{className:"relative h-full w-full",...!eo&&{onPointerDown:eQ,onPointerUp:eX,onPointerLeave:eX,onPointerCancel:eX,onContextMenu:e=>e.preventDefault(),style:{touchAction:"none"}},children:[eo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",onClick:()=>eM(e.id),className:"absolute -right-8 -top-1 z-10 flex h-6 w-6 items-center justify-center rounded-full bg-gray-600 text-white shadow hover:bg-gray-700","aria-label":"Edit tile",children:(0,a.jsx)(E.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)("button",{type:"button",onClick:()=>tt(e.id),className:"absolute -right-1 -top-1 z-10 flex h-6 w-6 items-center justify-center rounded-full bg-red-500 text-white shadow hover:bg-red-600","aria-label":"Remove tile",children:(0,a.jsx)(C.A,{className:"h-3.5 w-3.5"})})]}),(0,a.jsx)("div",{className:(0,B.cn)("h-full w-full",eo&&"tile-drag-handle cursor-grab touch-none"),children:(0,a.jsx)(W,{type:e.type,title:e.title,entity_id:e.entity_id,consumption_entity_id:e.consumption_entity_id,humidity_entity_id:e.humidity_entity_id,show_icon:e.show_icon,script_ids:e.script_ids,script_names:e.script_names,cleaned_area_entity_id:e.cleaned_area_entity_id,light_entity_id:e.light_entity_id,background_image:e.background_image,background_image_dark:e.background_image_dark,image_conditions:e.image_conditions,icon:e.icon,size:e.size,conditions:e.conditions,current_entity_id:e.current_entity_id,max_value:e.max_value,grid_entity_id:e.grid_entity_id,minimal:e.minimal,label:e.label,color:e.color})})]},e.id):null)})}),(()=>{var e;let t=eu.find(e=>"media_card"===e.type);return t?(0,a.jsx)(S.LG,{title:null!=(e=t.title)?e:"Media",entity_id:t.entity_id,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(t.id):void 0,onRemove:eo?()=>tt(t.id):void 0}):null})(),(()=>{let e=eu.filter(e=>"climate_card"===e.type||"climate_card_2"===e.type);return e.length>0?(0,a.jsx)(S.e_,{widgets:e.map(e=>{var t;return{id:e.id,title:null!=(t=e.title)?t:"Climate",entity_id:e.entity_id,humidity_entity_id:e.humidity_entity_id,icon:e.icon,type:"climate_card_2"===e.type?"climate_card_2":"climate_card",width:e.width,height:e.height}}),editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?e=>eM(e):void 0,onRemove:eo?e=>tt(e):void 0}):null})(),eu.filter(e=>"light_card"===e.type).map((e,t)=>{var r;return(0,a.jsx)(S.NH,{widget:{id:e.id,title:null!=(r=e.title)?r:"Lamp",entity_id:e.entity_id,icon:e.icon},widgetIndex:t,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:()=>{es(!0),eM(e.id)},onRemove:eo?()=>tt(e.id):void 0},e.id)}),(()=>{var e;let t=eu.find(e=>"solar_card"===e.type);return t?(0,a.jsx)(S.oW,{title:null!=(e=t.title)?e:"Zonnepanelen",entity_id:t.entity_id,consumption_entity_id:t.consumption_entity_id,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(t.id):void 0,onRemove:eo?()=>tt(t.id):void 0}):null})(),(()=>{var e;let t=eu.find(e=>"energy_monitor_card"===e.type);return t?(0,a.jsx)(S.j$,{title:null!=(e=t.title)?e:"Afbeeldingskaart",entity_id:t.entity_id,background_image:t.background_image,background_image_dark:t.background_image_dark,image_conditions:t.image_conditions,minimal:t.minimal,scale:t.scale,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(t.id):void 0,onRemove:eo?()=>tt(t.id):void 0}):null})(),"undefined"!=typeof document&&eu.some(e=>"stat_pill_card"===e.type)&&(0,c.createPortal)(eu.filter(e=>"stat_pill_card"===e.type).map((e,t)=>{var r,i,d;return(0,a.jsx)(S.M1,{widgetId:e.id,widgetIndex:t,title:null!=(r=e.title)?r:"Stat",entity_id:e.entity_id,label:e.label,icon:e.icon,color:null!=(i=e.color)?i:"amber",conditions:e.conditions,size:null!=(d=e.size)?d:"md",editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(e.id):void 0,onRemove:eo?()=>tt(e.id):void 0},e.id)}),document.body),"undefined"!=typeof document&&eu.some(e=>"sensor_card"===e.type)&&(0,c.createPortal)(eu.filter(e=>"sensor_card"===e.type).map((e,t)=>{var r,i;return(0,a.jsx)(S.$e,{widgetId:e.id,widgetIndex:t,title:null!=(r=e.title)?r:"Sensor",entity_id:e.entity_id,icon:e.icon,show_icon:!1!==e.show_icon,size:null!=(i=e.size)?i:"md",conditions:e.conditions,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(e.id):void 0,onRemove:eo?()=>tt(e.id):void 0},e.id)}),document.body),(()=>{var e;let t=eu.find(e=>"weather_card"===e.type);return t?(0,a.jsx)(S.h9,{title:null!=(e=t.title)?e:"Weather",entity_id:t.entity_id,show_icon:t.show_icon,width:t.width,height:t.height,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(t.id):void 0,onRemove:eo?()=>tt(t.id):void 0}):null})(),(()=>{var e;let t=eu.find(e=>"vacuum_card"===e.type);return t?(0,a.jsx)(S.kC,{title:null!=(e=t.title)?e:"Stofzuiger",entity_id:t.entity_id,script_ids:t.script_ids,script_names:t.script_names,cleaned_area_entity_id:t.cleaned_area_entity_id,icon:t.icon,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(t.id):void 0,onRemove:eo?()=>tt(t.id):void 0}):null})(),eu.filter(e=>"room_card"===e.type).map((e,t)=>{var r;return(0,a.jsx)(S._l,{widget:{id:e.id,title:null!=(r=e.title)?r:"Kamer",entity_id:e.entity_id,icon:e.icon,light_entity_id:e.light_entity_id,background_image:e.background_image,icon_background_color:e.icon_background_color,width:e.width,height:e.height},widgetIndex:t,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(e.id):void 0,onRemove:eo?()=>tt(e.id):void 0},e.id)}),eu.filter(e=>"nuts_card"===e.type).map((e,t)=>{var r,i,d;return(0,a.jsx)(S.le,{widget:{id:e.id,title:null!=(r=e.title)?r:"Gas",entity_id:e.entity_id,current_entity_id:e.current_entity_id,icon:e.icon,icon_background_color:e.icon_background_color,max_value:e.max_value,width:null!=(i=e.width)?i:250,height:null!=(d=e.height)?d:130},widgetIndex:t,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(e.id):void 0,onRemove:eo?()=>tt(e.id):void 0},e.id)}),(()=>{let e=eu.filter(e=>"title_card"===e.type);return e.length>0?(0,a.jsx)(S.b5,{widgets:e.map(e=>{var t;return{id:e.id,title:null!=(t=e.title)?t:"Titel"}}),editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?e=>eM(e):void 0,onRemove:eo?e=>tt(e):void 0}):null})(),eu.filter(e=>"pill_card"===e.type).map((e,t)=>{var r;return(0,a.jsx)(S.Gp,{widget:{id:e.id,title:null!=(r=e.title)?r:"Pill",entity_id:e.entity_id,icon:e.icon,conditions:e.conditions,show_state:e.show_state},widgetIndex:t,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(e.id):void 0,onRemove:eo?()=>tt(e.id):void 0},e.id)}),"undefined"!=typeof document&&(0,c.createPortal)(eu.filter(e=>"card_group"===e.type).map((e,t)=>(0,a.jsx)(S.IF,{group:e,widgetIndex:t,editMode:eo,onEnterEditMode:()=>es(!0),onEdit:eo?()=>eM(e.id):void 0,onRemove:eo?()=>tt(e.id):void 0},e.id)),document.body),eI&&e0&&"undefined"!=typeof document&&(0,c.createPortal)((0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-xl","aria-hidden":!0,onClick:()=>{(null==e0?void 0:e0.type)==="card_group"&&eL?eW(null):eM(null)}}),(0,a.jsxs)("div",{className:"fixed left-1/2 top-1/2 z-50 w-full max-w-sm -translate-x-1/2 -translate-y-1/2 rounded-xl border border-gray-200 bg-white p-4 shadow-xl dark:border-white/10 dark:bg-black/50 dark:backdrop-blur-xl",children:[(0,a.jsx)("h3",{className:"mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100",children:"title_card"===e0.type?"Titel bewerken":"card_group"===e0.type?eL?"Kaart in groep bewerken":"Kaartgroep bewerken":"Edit tile"}),(0,a.jsxs)("div",{className:"space-y-3",children:["title_card"===e0.type?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Tekst"}),(0,a.jsx)("input",{type:"text",value:eT.title,onChange:e=>eK(t=>({...t,title:e.target.value})),placeholder:"Bijv. Woonkamer, Verlichting",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"})]}):"card_group"===e0.type?eL?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Naam"}),(0,a.jsx)("input",{type:"text",value:eT.title,onChange:e=>eK(t=>({...t,title:e.target.value})),placeholder:"Bijv. Woonkamer, Verlichting",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Entity"}),(0,a.jsx)("select",{value:eT.entity_id,onChange:e=>eK(t=>({...t,entity_id:e.target.value})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",children:ev.filter(e=>M.some(t=>e.entity_id.startsWith(t+"."))).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)})})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between gap-3 cursor-pointer",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Toon entiteitstatus"}),(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":!1!==eT.show_state,onClick:()=>eK(e=>({...e,show_state:!1===e.show_state})),className:(0,B.cn)("relative inline-flex h-6 w-11 shrink-0 rounded-full border border-gray-200 dark:border-white/10 transition-colors focus:outline-none focus:ring-2 focus:ring-[#4D2FB2] focus:ring-offset-2 dark:focus:ring-offset-gray-900",!1!==eT.show_state?"bg-[#4D2FB2] border-transparent":"bg-gray-200 dark:bg-gray-600"),children:(0,a.jsx)("span",{className:(0,B.cn)("pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow ring-0 transition translate-x-0.5",!1!==eT.show_state?"translate-x-5":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("input",{type:"text",value:eU,onChange:e=>eZ(e.target.value),onFocus:()=>{var e;return eZ(eU||(null!=(e=eT.icon)?e:""))},placeholder:"Zoek icoon (bijv. CircleDot, Sun…)",className:"mb-2 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsxs)("div",{className:"max-h-32 overflow-auto rounded-lg border border-gray-200 dark:border-white/10 flex flex-wrap gap-1.5 p-1.5",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{eK(e=>({...e,icon:void 0})),eZ("")},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",eT.icon?"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20":"bg-[#4D2FB2] text-white"),children:"Default (CircleDot)"}),S.CY.filter(e=>e.toLowerCase().includes((eU||"").toLowerCase())).map(e=>{var t;return(0,a.jsx)("button",{type:"button",onClick:()=>{eK(t=>({...t,icon:e})),eZ(e)},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=eT.icon)?t:"CircleDot")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:e},e)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Voorwaardelijke kleur (eerste match)"}),(null!=(e=eT.conditions)?e:[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border border-gray-200 dark:border-white/10 p-2 mb-1.5",children:[(0,a.jsx)("select",{value:e.operator,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,operator:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.z4.map(e=>{var t;return(0,a.jsx)("option",{value:e,children:null!=(t=S.qc[e])?t:e},e)})}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,value:e.target.value}:r)}}),placeholder:"Waarde",className:"w-20 rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs"}),(0,a.jsx)("select",{value:e.color,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,color:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.gO.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var r;return{...e,conditions:(null!=(r=e.conditions)?r:[]).filter((e,r)=>r!==t)}}),className:"p-1 rounded text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Verwijder voorwaarde",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var t;return{...e,conditions:[...null!=(t=e.conditions)?t:[],{operator:"eq",value:"",color:"green"}]}}),className:"rounded-lg border border-dashed border-gray-300 dark:border-white/20 px-3 py-2 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 w-full",children:"+ Voeg voorwaarde toe"})]})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Uitlijning"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5 rounded-lg border border-gray-200 dark:border-white/10 p-1.5",children:["start","center","end","between"].map(e=>{var t;return(0,a.jsx)("button",{type:"button",onClick:()=>{let t=eu.map(t=>t.id===e0.id?{...t,alignment:e}:t);ex(t),e3.mutate({layout:ec,widgets:t,welcomeTitle:eh,welcomeSubtitle:em})},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=e0.alignment)?t:"start")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:"start"===e?"Links":"center"===e?"Midden":"end"===e?"Rechts":"Tussen"},e)})}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 pt-1",children:"Kaarten in groep"}),(0,a.jsx)("ul",{className:"space-y-1 max-h-32 overflow-auto rounded-lg border border-gray-200 dark:border-white/10 divide-y divide-gray-100 dark:divide-white/5",children:(null!=(t=e0.children)?t:[]).map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between gap-2 px-3 py-2 text-sm",children:[(0,a.jsx)("span",{className:"truncate text-gray-900 dark:text-gray-100",children:e.title||e.entity_id}),(0,a.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eW(e.id),className:"p-1 rounded text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-white/10","aria-label":"Bewerken",title:"Kaart bewerken",children:(0,a.jsx)(E.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{type:"button",onClick:()=>{var t;let r=(null!=(t=e0.children)?t:[]).filter(t=>t.id!==e.id),a=eu.map(e=>e.id===e0.id?{...e,children:r}:e);ex(a),e3.mutate({layout:ec,widgets:a,welcomeTitle:eh,welcomeSubtitle:em})},className:"p-1 rounded text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Verwijderen",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]})]},e.id))}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Kaart toevoegen"}),(0,a.jsx)("input",{type:"text",value:eB,onChange:e=>eD(e.target.value),placeholder:"Zoek op naam of entity_id (bijv. sensor.woonkamer)…",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("div",{className:"max-h-40 overflow-auto rounded-lg border border-gray-200 dark:border-white/10 divide-y divide-gray-100 dark:divide-white/5",children:ev.filter(e=>M.some(t=>e.entity_id.startsWith(t+"."))).filter(e=>{var t,r;let a=eB.trim().toLowerCase();return!a||(null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id).toLowerCase().includes(a)||e.entity_id.toLowerCase().includes(a)}).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("button",{type:"button",onClick:()=>{var t;let r={id:(0,B.$)(),type:"pill_card",title:i,entity_id:e.entity_id},a=[...null!=(t=e0.children)?t:[],r],d=eu.map(e=>e.id===e0.id?{...e,children:a}:e);ex(d),e3.mutate({layout:ec,widgets:d,welcomeTitle:eh,welcomeSubtitle:em}),eD("")},className:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-white/10 truncate",children:i},e.entity_id)})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Name"}),(0,a.jsx)("input",{type:"text",value:eT.title,onChange:e=>eK(t=>({...t,title:e.target.value})),placeholder:"Tile name",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"})]}),(null!=e0.entity_id||"energy_monitor_card"===e0.type)&&"title_card"!==e0.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"solar_card"===e0.type?"Yield (opbrengst)":"energy_monitor_card"===e0.type?"Entity voor voorwaarden (bijv. weather.home)":"stat_pill_card"===e0.type?"Sensor":"Entity"}),(0,a.jsx)("input",{type:"text",value:eA,onChange:e=>ez(e.target.value),placeholder:"Zoek op naam of entity_id (bijv. sensor.woonkamer)…",className:"mb-2 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("select",{value:eT.entity_id,onChange:e=>eK(t=>({...t,entity_id:e.target.value})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",children:(()=>{let e="pill_card"===e0.type?ev.filter(e=>M.some(t=>e.entity_id.startsWith(t+"."))):"room_card"===e0.type?ev:"energy_monitor_card"===e0.type?ev.filter(e=>e.entity_id.startsWith("weather.")||e.entity_id.startsWith("sensor.")):ev.filter(e=>{var t;return e.entity_id.startsWith((null!=(t=I[e0.type])?t:"sensor")+".")}),t=eA.trim().toLowerCase();if(t){e=e.filter(e=>{var r,a;return(null!=(a=null==(r=e.attributes)?void 0:r.friendly_name)?a:e.entity_id).toLowerCase().includes(t)||e.entity_id.toLowerCase().includes(t)});let r=eT.entity_id;if(r&&!e.some(e=>e.entity_id===r)){let t=ev.find(e=>e.entity_id===r);t&&(e=[t,...e])}}let r=e.map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)});return"energy_monitor_card"===e0.type?[(0,a.jsx)("option",{value:"",children:"Geen (alleen standaardafbeelding)"},""),...r]:r})()})]}),"light_card"===e0.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5 rounded-lg border border-gray-200 dark:border-white/10 p-1.5",children:S.e0.map(e=>{var t;let r="lightbulb"===e?"Lightbulb":"spotlight"===e?"Spotlight":"lamp"===e?"Lamp":"lamp-ceiling"===e?"Plafond":"lamp-desk"===e?"Bureau":"lamp-floor"===e?"Vloer":"lamp-wall-down"===e?"Wall down":"Wall up";return(0,a.jsx)("button",{type:"button",onClick:()=>eK(t=>({...t,icon:e})),className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=eT.icon)?t:"lightbulb")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:r},e)})})]}),"room_card"===e0.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5 rounded-lg border border-gray-200 dark:border-white/10 p-1.5 max-h-32 overflow-auto",children:S.CY.filter(e=>e.toLowerCase().includes((eR||"").toLowerCase())).map(e=>{var t;return(0,a.jsx)("button",{type:"button",onClick:()=>eK(t=>({...t,icon:e})),className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=eT.icon)?t:"Home")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:e},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Licht-entiteit (optioneel)"}),(0,a.jsxs)("select",{value:null!=(r=eT.light_entity_id)?r:"",onChange:e=>eK(t=>({...t,light_entity_id:e.target.value||void 0})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",children:[(0,a.jsx)("option",{value:"",children:"Geen"}),ev.filter(e=>e.entity_id.startsWith("light.")||e.entity_id.startsWith("group.")).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Achtergrondafbeelding (URL, optioneel)"}),(0,a.jsx)("input",{type:"url",value:null!=(g=eT.background_image)?g:"",onChange:e=>eK(t=>({...t,background_image:e.target.value||void 0})),placeholder:"https://...",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Kleur icoon-badge"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:eT.icon_background_color&&/^#[0-9A-Fa-f]{6}$/.test(eT.icon_background_color)?eT.icon_background_color:"#3B82F6",onChange:e=>eK(t=>({...t,icon_background_color:e.target.value})),className:"h-10 w-14 cursor-pointer rounded border border-gray-200 dark:border-white/10 bg-transparent"}),(0,a.jsx)("input",{type:"text",value:null!=(x=eT.icon_background_color)?x:"",onChange:e=>eK(t=>({...t,icon_background_color:e.target.value||void 0})),placeholder:"#3B82F6",className:"flex-1 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Breedte kaart (px)"}),(0,a.jsx)("input",{type:"number",min:200,max:500,step:10,value:null!=(h=eT.width)?h:280,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,width:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"280",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"200–500 px (standaard 280)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Hoogte kaart (px)"}),(0,a.jsx)("input",{type:"number",min:80,max:300,step:10,value:null!=(y=eT.height)?y:120,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,height:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"120",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"80–300 px (standaard 120)"})]})]}),("climate_card_2"===e0.type||"climate_card"===e0.type)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("select",{value:null!=(m=eT.icon)?m:"Thermometer",onChange:e=>eK(t=>({...t,icon:e.target.value||void 0})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 dark:border-white/10 dark:bg-white/5 dark:text-gray-200",children:S.Ev.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Luchtvochtigheid (optioneel)"}),(0,a.jsxs)("select",{value:null!=(b=eT.humidity_entity_id)?b:"",onChange:e=>eK(t=>({...t,humidity_entity_id:e.target.value||void 0})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",children:[(0,a.jsx)("option",{value:"",children:"Geen"}),ev.filter(e=>e.entity_id.startsWith("sensor.")).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Breedte kaart (px)"}),(0,a.jsx)("input",{type:"number",min:200,max:500,step:10,value:null!=(p=eT.width)?p:320,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,width:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"320",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"200–500 px (standaard 320)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Hoogte kaart (px)"}),(0,a.jsx)("input",{type:"number",min:100,max:400,step:10,value:null!=(_=eT.height)?_:180,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,height:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"180",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"100–400 px (standaard 180)"})]})]}),"solar_card"===e0.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Consumption (verbruik, optioneel)"}),(0,a.jsxs)("select",{value:null!=(v=eT.consumption_entity_id)?v:"",onChange:e=>eK(t=>({...t,consumption_entity_id:e.target.value||void 0})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",children:[(0,a.jsx)("option",{value:"",children:"Geen"}),ev.filter(e=>e.entity_id.startsWith("sensor.")).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)})]})]}),"energy_monitor_card"===e0.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Achtergrondafbeelding light mode (URL)"}),(0,a.jsx)("input",{type:"text",value:null!=(k=eT.background_image)?k:"",onChange:e=>eK(t=>({...t,background_image:e.target.value||void 0})),placeholder:"/energy-house.png of https://...",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Achtergrondafbeelding dark mode (URL, optioneel)"}),(0,a.jsx)("input",{type:"text",value:null!=(w=eT.background_image_dark)?w:"",onChange:e=>eK(t=>({...t,background_image_dark:e.target.value||void 0})),placeholder:"Leeg =zelfde als light mode",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Plaats afbeeldingen in public/ of gebruik externe URLs."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"energy-minimal",checked:null!=(j=eT.minimal)&&j,onChange:e=>eK(t=>({...t,minimal:e.target.checked})),className:"rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),(0,a.jsx)("label",{htmlFor:"energy-minimal",className:"text-sm text-gray-700 dark:text-gray-300",children:"Minimalistisch (alleen afbeelding, geen titel of rand)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:["Schaalfactor (",(null!=(f=eT.scale)?f:1).toFixed(1),"\xd7)"]}),(0,a.jsx)("input",{type:"range",min:"0.5",max:"1.5",step:"0.1",value:null!=(T=eT.scale)?T:1,onChange:e=>eK(t=>({...t,scale:parseFloat(e.target.value)})),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Voorwaarden (afbeelding bij waarde)"}),(0,a.jsx)("p",{className:"mb-2 text-xs text-gray-500 dark:text-gray-400",children:"Eerste voorwaarde die klopt bepaalt de afbeelding. Bijv. sunny → zon.jpg, rainy → regen.jpg. Entity hierboven moet zijn ingesteld."}),(null!=(K=eT.image_conditions)?K:[]).map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"flex flex-wrap items-start gap-2 rounded-lg border border-gray-200 dark:border-white/10 p-2 mb-2",children:[(0,a.jsx)("select",{value:e.operator,onChange:e=>eK(r=>{var a;return{...r,image_conditions:(null!=(a=r.image_conditions)?a:[]).map((r,a)=>a===t?{...r,operator:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.z4.map(e=>{var t;return(0,a.jsx)("option",{value:e,children:null!=(t=S.qc[e])?t:e},e)})}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:e=>eK(r=>{var a;return{...r,image_conditions:(null!=(a=r.image_conditions)?a:[]).map((r,a)=>a===t?{...r,value:e.target.value}:r)}}),placeholder:"Waarde (bijv. sunny)",className:"flex-1 min-w-[80px] rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs"}),(0,a.jsx)("input",{type:"text",value:e.image,onChange:e=>eK(r=>{var a;return{...r,image_conditions:(null!=(a=r.image_conditions)?a:[]).map((r,a)=>a===t?{...r,image:e.target.value}:r)}}),placeholder:"Afbeelding (URL)",className:"flex-1 min-w-[100px] rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs"}),(0,a.jsx)("input",{type:"text",value:null!=(r=e.image_dark)?r:"",onChange:e=>eK(r=>{var a;return{...r,image_conditions:(null!=(a=r.image_conditions)?a:[]).map((r,a)=>a===t?{...r,image_dark:e.target.value||void 0}:r)}}),placeholder:"Dark (optioneel)",className:"w-24 rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs"}),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var r;return{...e,image_conditions:(null!=(r=e.image_conditions)?r:[]).filter((e,r)=>r!==t)}}),className:"p-1 rounded text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:(0,a.jsx)(C.A,{className:"h-3.5 w-3.5"})})]},t)}),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var t;return{...e,image_conditions:[...null!=(t=e.image_conditions)?t:[],{operator:"eq",value:"",image:"",image_dark:void 0}]}}),className:"rounded-lg border border-dashed border-gray-300 dark:border-white/20 px-3 py-2 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 w-full",children:"+ Voorwaarde toevoegen"})]})]}),"stat_pill_card"===e0.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Label (onder de waarde)"}),(0,a.jsx)("input",{type:"text",value:null!=(R=eT.label)?R:"",onChange:e=>eK(t=>({...t,label:e.target.value||void 0})),placeholder:"Opbrengst, Verbruik, ...",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("select",{value:null!=(P=eT.icon)?P:"Sun",onChange:e=>eK(t=>({...t,icon:e.target.value||void 0})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 dark:border-white/10 dark:bg-white/5 dark:text-gray-200",children:S.Ev.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Kleur (standaard)"}),(0,a.jsxs)("select",{value:null!=(V=eT.color)?V:"amber",onChange:e=>eK(t=>({...t,color:e.target.value})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 dark:border-white/10 dark:bg-white/5 dark:text-gray-200",children:[(0,a.jsx)("option",{value:"amber",children:"Amber (geel)"}),(0,a.jsx)("option",{value:"purple",children:"Paars"}),(0,a.jsx)("option",{value:"emerald",children:"Smaragd (groen)"}),(0,a.jsx)("option",{value:"red",children:"Rood"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Voorwaarden (kleur aanpassen bij waarde)"}),(0,a.jsx)("p",{className:"mb-2 text-xs text-gray-500 dark:text-gray-400",children:"Eerste voorwaarde die klopt bepaalt de kleur. Bijv. plastic = groen, papier = blauw."}),(null!=(G=eT.conditions)?G:[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border border-gray-200 dark:border-white/10 p-2 mb-2",children:[(0,a.jsx)("select",{value:e.operator,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,operator:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.z4.map(e=>{var t;return(0,a.jsx)("option",{value:e,children:null!=(t=S.qc[e])?t:e},e)})}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,value:e.target.value}:r)}}),placeholder:"Waarde (bijv. plastic)",className:"w-24 rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs"}),(0,a.jsx)("select",{value:e.color,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,color:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.gO.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var r;return{...e,conditions:(null!=(r=e.conditions)?r:[]).filter((e,r)=>r!==t)}}),className:"p-1 rounded text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Verwijder voorwaarde",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var t;return{...e,conditions:[...null!=(t=e.conditions)?t:[],{operator:"eq",value:"",color:"green"}]}}),className:"rounded-lg border border-dashed border-gray-300 dark:border-white/20 px-3 py-2 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 w-full",children:"+ Voeg voorwaarde toe"})]})]}),"vacuum_card"===e0.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Vacuum Room (scripts)"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Kies scripts en geef ze optioneel een weergavenaam."}),(0,a.jsxs)("div",{className:"max-h-32 overflow-auto rounded-lg border border-gray-200 dark:border-white/10 p-2 space-y-1 mb-2",children:[ev.filter(e=>e.entity_id.startsWith("script.")).map(e=>{var t,r,i;let d=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id,l=(null!=(i=eT.script_ids)?i:[]).includes(e.entity_id);return(0,a.jsxs)("label",{className:"flex items-center gap-2 py-1.5 px-2 rounded hover:bg-gray-100 dark:hover:bg-white/5 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:l,onChange:()=>{var t,r;let a=null!=(t=eT.script_ids)?t:[],i={...null!=(r=eT.script_names)?r:{}};l&&delete i[e.entity_id],eK(t=>({...t,script_ids:l?a.filter(t=>t!==e.entity_id):[...a,e.entity_id],script_names:i}))},className:"h-4 w-4 rounded border-gray-300 dark:border-white/20 text-[#4D2FB2] focus:ring-[#4D2FB2]"}),(0,a.jsx)("span",{className:"text-sm truncate shrink-0 max-w-[140px]",title:e.entity_id,children:d})]},e.entity_id)}),0===ev.filter(e=>e.entity_id.startsWith("script.")).length&&(0,a.jsx)("p",{className:"text-xs text-gray-500 py-2",children:"Geen scripts gevonden. Sla eerst een verbinding op."})]}),(null!=(O=eT.script_ids)?O:[]).length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Naam per script (optioneel)"}),(null!=(q=eT.script_ids)?q:[]).map(e=>{var t,r,i,d;let l=ev.find(t=>t.entity_id===e),n=null!=(i=null==l||null==(t=l.attributes)?void 0:t.friendly_name)?i:e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-28 truncate shrink-0",title:e,children:n}),(0,a.jsx)("input",{type:"text",value:null!=(d=null==(r=eT.script_names)?void 0:r[e])?d:"",onChange:t=>eK(r=>{var a;return{...r,script_names:{...null!=(a=r.script_names)?a:{},[e]:t.target.value||void 0}}}),placeholder:n,className:"flex-1 min-w-0 rounded-lg border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1.5 text-sm"})]},e)})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Sensor onder status (bijv. cleaned area)"}),(0,a.jsxs)("select",{value:null!=(U=eT.cleaned_area_entity_id)?U:"",onChange:e=>eK(t=>({...t,cleaned_area_entity_id:e.target.value||void 0})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",children:[(0,a.jsx)("option",{value:"",children:"Geen"}),ev.filter(e=>e.entity_id.startsWith("sensor.")).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("input",{type:"text",value:eV,onChange:e=>eG(e.target.value),onFocus:()=>{var e;return eG(eV||(null!=(e=eT.icon)?e:""))},placeholder:"Zoek icoon (bijv. home, bot, sparkles…)",className:"mb-2 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsxs)("div",{className:"max-h-40 overflow-auto rounded-lg border border-gray-200 dark:border-white/10 flex flex-wrap gap-1.5 p-1.5",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{eK(e=>({...e,icon:void 0})),eG("")},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",eT.icon?"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20":"bg-[#4D2FB2] text-white"),children:"Geen (Sparkles)"}),S.ZN.filter(e=>e.toLowerCase().includes((eV||"").toLowerCase())).map(e=>{var t;return(0,a.jsx)("button",{type:"button",onClick:()=>{eK(t=>({...t,icon:e})),eG(e)},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=eT.icon)?t:"Sparkles")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:e},e)})]})]})]}),"sensor_card"===e0.type&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex rounded-lg border border-gray-200 dark:border-white/10 p-0.5 mb-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e$("general"),className:(0,B.cn)("flex-1 rounded-md py-1.5 text-xs font-medium transition-colors","general"===eH?"bg-[#4D2FB2] text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10"),children:"Algemeen"}),(0,a.jsx)("button",{type:"button",onClick:()=>e$("conditions"),className:(0,B.cn)("flex-1 rounded-md py-1.5 text-xs font-medium transition-colors","conditions"===eH?"bg-[#4D2FB2] text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10"),children:"Conditionele voorwaarden"})]}),"general"===eH&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("input",{type:"text",value:eO,onChange:e=>eq(e.target.value),onFocus:()=>{var e;return eq(eO||(null!=(e=eT.icon)?e:""))},placeholder:"Zoek icoon (bijv. gauge, thermometer…)",className:"mb-2 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsxs)("div",{className:"max-h-40 overflow-auto rounded-lg border border-gray-200 dark:border-white/10 flex flex-wrap gap-1.5 p-1.5",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{eK(e=>({...e,icon:void 0})),eq("")},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",eT.icon?"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20":"bg-[#4D2FB2] text-white"),children:"Default (Gauge)"}),S.CY.filter(e=>e.toLowerCase().includes((eO||"").toLowerCase())).map(e=>{var t;return(0,a.jsx)("button",{type:"button",onClick:()=>{eK(t=>({...t,icon:e})),eq(e)},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=eT.icon)?t:"Gauge")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:e},e)})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Grootte"}),(0,a.jsxs)("select",{value:null!=(Z=eT.size)?Z:"md",onChange:e=>eK(t=>({...t,size:e.target.value})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500",children:[(0,a.jsx)("option",{value:"sm",children:"Klein"}),(0,a.jsx)("option",{value:"md",children:"Normaal"}),(0,a.jsx)("option",{value:"lg",children:"Groot"})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"sensor-show-icon",checked:!1!==eT.show_icon,onChange:e=>eK(t=>({...t,show_icon:e.target.checked})),className:"rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),(0,a.jsx)("label",{htmlFor:"sensor-show-icon",className:"text-sm text-gray-700 dark:text-gray-300",children:"Icoon tonen"})]})]}),"conditions"===eH&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Eerste voorwaarde die klopt bepaalt de kaartkleur. Getallen en tekst worden ondersteund."}),(null!=(H=eT.conditions)?H:[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border border-gray-200 dark:border-white/10 p-2",children:[(0,a.jsx)("select",{value:e.operator,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,operator:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.z4.map(e=>{var t;return(0,a.jsx)("option",{value:e,children:null!=(t=S.qc[e])?t:e},e)})}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,value:e.target.value}:r)}}),placeholder:"Waarde",className:"w-20 rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs"}),(0,a.jsx)("select",{value:e.color,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,color:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.gO.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var r;return{...e,conditions:(null!=(r=e.conditions)?r:[]).filter((e,r)=>r!==t)}}),className:"p-1 rounded text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Verwijder voorwaarde",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var t;return{...e,conditions:[...null!=(t=e.conditions)?t:[],{operator:"gte",value:"",color:"green"}]}}),className:"rounded-lg border border-dashed border-gray-300 dark:border-white/20 px-3 py-2 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 w-full",children:"+ Voeg voorwaarde toe"})]})]}),"pill_card"===e0.type&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center justify-between gap-3 cursor-pointer",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Toon entiteitstatus"}),(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":!1!==eT.show_state,onClick:()=>eK(e=>({...e,show_state:!1===e.show_state})),className:(0,B.cn)("relative inline-flex h-6 w-11 shrink-0 rounded-full border border-gray-200 dark:border-white/10 transition-colors focus:outline-none focus:ring-2 focus:ring-[#4D2FB2] focus:ring-offset-2 dark:focus:ring-offset-gray-900",!1!==eT.show_state?"bg-[#4D2FB2] border-transparent":"bg-gray-200 dark:bg-gray-600"),children:(0,a.jsx)("span",{className:(0,B.cn)("pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow ring-0 transition translate-x-0.5",!1!==eT.show_state?"translate-x-5":"translate-x-1")})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 -mt-2",children:"Toon of verberg de waarde (Aan/Uit of sensorwaarde) op de pill."}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("input",{type:"text",value:eU,onChange:e=>eZ(e.target.value),onFocus:()=>{var e;return eZ(eU||(null!=(e=eT.icon)?e:""))},placeholder:"Zoek icoon (bijv. CircleDot, Sun…)",className:"mb-2 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsxs)("div",{className:"max-h-32 overflow-auto rounded-lg border border-gray-200 dark:border-white/10 flex flex-wrap gap-1.5 p-1.5",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{eK(e=>({...e,icon:void 0})),eZ("")},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",eT.icon?"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20":"bg-[#4D2FB2] text-white"),children:"Default (CircleDot)"}),S.CY.filter(e=>e.toLowerCase().includes((eU||"").toLowerCase())).map(e=>{var t;return(0,a.jsx)("button",{type:"button",onClick:()=>{eK(t=>({...t,icon:e})),eZ(e)},className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=eT.icon)?t:"CircleDot")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:e},e)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Voorwaardelijke kleur (eerste match)"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Bepaal de pill-kleur op basis van de entity state."}),(null!=($=eT.conditions)?$:[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border border-gray-200 dark:border-white/10 p-2 mb-1.5",children:[(0,a.jsx)("select",{value:e.operator,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,operator:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.z4.map(e=>{var t;return(0,a.jsx)("option",{value:e,children:null!=(t=S.qc[e])?t:e},e)})}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,value:e.target.value}:r)}}),placeholder:"Waarde",className:"w-20 rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs"}),(0,a.jsx)("select",{value:e.color,onChange:e=>eK(r=>{var a;return{...r,conditions:(null!=(a=r.conditions)?a:[]).map((r,a)=>a===t?{...r,color:e.target.value}:r)}}),className:"rounded border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-gray-200 px-2 py-1 text-xs",children:S.gO.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var r;return{...e,conditions:(null!=(r=e.conditions)?r:[]).filter((e,r)=>r!==t)}}),className:"p-1 rounded text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Verwijder voorwaarde",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>eK(e=>{var t;return{...e,conditions:[...null!=(t=e.conditions)?t:[],{operator:"eq",value:"",color:"green"}]}}),className:"rounded-lg border border-dashed border-gray-300 dark:border-white/20 px-3 py-2 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 w-full",children:"+ Voeg voorwaarde toe"})]})]}),"weather_card"===e0.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Toon icoon"}),(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":!1!==eT.show_icon,onClick:()=>eK(e=>({...e,show_icon:!1===e.show_icon})),className:(0,B.cn)("relative inline-flex h-6 w-11 shrink-0 rounded-full border-2 border-transparent transition-colors focus:outline-none focus:ring-2 focus:ring-[#4D2FB2] focus:ring-offset-2",!1!==eT.show_icon?"bg-[#4D2FB2]":"bg-gray-200 dark:bg-gray-600"),children:(0,a.jsx)("span",{className:(0,B.cn)("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition",!1!==eT.show_icon?"translate-x-5":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Breedte kaart (px)"}),(0,a.jsx)("input",{type:"number",min:200,max:500,step:10,value:null!=(Y=eT.width)?Y:320,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,width:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"320",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"200–500 px (standaard 320)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Hoogte kaart (px)"}),(0,a.jsx)("input",{type:"number",min:100,max:400,step:10,value:null!=(J=eT.height)?J:180,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,height:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"180",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder-gray-500 dark:border-white/10 dark:bg-white/5 dark:text-gray-200 dark:placeholder-gray-500"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"100–400 px (standaard 180)"})]})]}),"nuts_card"===e0.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Icoon"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5 rounded-lg border border-gray-200 dark:border-white/10 p-1.5 max-h-32 overflow-auto",children:["Fuel","Droplets","Zap","Gauge","Thermometer"].filter(e=>S.Ev.includes(e)).map(e=>{var t;return(0,a.jsx)("button",{type:"button",onClick:()=>eK(t=>({...t,icon:e})),className:(0,B.cn)("rounded-md px-2 py-1 text-xs",(null!=(t=eT.icon)?t:"Fuel")===e?"bg-[#4D2FB2] text-white":"bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20"),children:e},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Kleur icoon"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:eT.icon_background_color&&/^#[0-9A-Fa-f]{6}$/.test(eT.icon_background_color)?eT.icon_background_color:"#3B82F6",onChange:e=>eK(t=>({...t,icon_background_color:e.target.value})),className:"h-8 w-12 cursor-pointer rounded border border-gray-200 dark:border-white/20 bg-white dark:bg-white/5"}),(0,a.jsx)("input",{type:"text",value:null!=(Q=eT.icon_background_color)?Q:"#3B82F6",onChange:e=>eK(t=>({...t,icon_background_color:e.target.value||void 0})),placeholder:"#3B82F6",className:"flex-1 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 dark:border-white/10 dark:bg-white/5 dark:text-gray-200"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Breedte \xd7 hoogte (px)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"number",min:150,max:400,step:10,value:null!=(X=eT.width)?X:250,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,width:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"250",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 dark:text-gray-200"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"Breedte"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"number",min:80,max:300,step:10,value:null!=(ee=eT.height)?ee:130,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,height:null==t||Number.isNaN(t)?void 0:t}))},placeholder:"130",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5 dark:text-gray-200"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"Hoogte"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Entity dagverbruik (totaal per dag)"}),(0,a.jsxs)("select",{value:null!=(et=eT.entity_id)?et:"",onChange:e=>eK(t=>({...t,entity_id:e.target.value})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 dark:border-white/10 dark:bg-white/5 dark:text-gray-200",children:[(0,a.jsx)("option",{value:"",children:"Kies entity…"}),ev.filter(e=>e.entity_id.startsWith("sensor.")).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Entity huidig verbruik (optioneel)"}),(0,a.jsxs)("select",{value:null!=(er=eT.current_entity_id)?er:"",onChange:e=>eK(t=>({...t,current_entity_id:e.target.value||void 0})),className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 dark:border-white/10 dark:bg-white/5 dark:text-gray-200",children:[(0,a.jsx)("option",{value:"",children:"Geen (toont 0 voor huidig)"}),ev.filter(e=>e.entity_id.startsWith("sensor.")).map(e=>{var t,r;let i=null!=(r=null==(t=e.attributes)?void 0:t.friendly_name)?r:e.entity_id;return(0,a.jsx)("option",{value:e.entity_id,children:i},e.entity_id)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Max waarde voor bar (optioneel)"}),(0,a.jsx)("input",{type:"number",min:1,step:.1,value:null!=(ea=eT.max_value)?ea:10,onChange:e=>{let t=""===e.target.value?void 0:Number(e.target.value);eK(e=>({...e,max_value:null!=t&&!Number.isNaN(t)&&t>0?t:void 0}))},placeholder:"10",className:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 dark:border-white/10 dark:bg-white/5 dark:text-gray-200"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:"Schaal voor verticale verbruiksbalk"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-between gap-2 pt-1",children:"card_group"===e0.type&&eL?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",onClick:()=>eW(null),className:"rounded-lg border border-gray-200 px-3 py-1.5 text-sm text-gray-700 dark:border-white/10 dark:text-gray-300",children:"Terug"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{var e;let t=(null!=(e=e0.children)?e:[]).filter(e=>e.id!==eL),r=eu.map(e=>e.id===e0.id?{...e,children:t}:e);ex(r),eW(null),e3.mutate({layout:ec,widgets:r,welcomeTitle:eh,welcomeSubtitle:em})},className:"rounded-lg px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Kaart uit groep verwijderen",children:"Verwijderen"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e,t;let r={title:eT.title,entity_id:eT.entity_id,icon:eT.icon||void 0,conditions:(null!=(e=eT.conditions)?e:[]).length>0?eT.conditions:void 0,show_state:!1!==eT.show_state},a=(null!=(t=e0.children)?t:[]).map(e=>e.id===eL?{...e,...r}:e),i=eu.map(e=>e.id===e0.id?{...e,children:a}:e);ex(i),eW(null),e3.mutate({layout:ec,widgets:i,welcomeTitle:eh,welcomeSubtitle:em})},className:"rounded-lg bg-[#4D2FB2] px-3 py-1.5 text-sm text-white hover:opacity-90",children:"Opslaan"})]})]}):"card_group"===e0.type?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",onClick:()=>{let e=eu.filter(e=>e.id!==eI),t=ec.filter(e=>e.i!==eI);ex(e),eg(t),eM(null),e3.mutate({layout:t,widgets:e,welcomeTitle:eh,welcomeSubtitle:em})},className:"rounded-lg px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Kaartgroep verwijderen",children:"Verwijderen"}),(0,a.jsx)("button",{type:"button",onClick:()=>eM(null),className:"rounded-lg border border-gray-200 px-3 py-1.5 text-sm text-gray-700 dark:border-white/10 dark:text-gray-300",children:"Annuleren"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",onClick:()=>{let e=eu.filter(e=>e.id!==eI),t=ec.filter(e=>e.i!==eI);ex(e),eg(t),eM(null),e3.mutate({layout:t,widgets:e,welcomeTitle:eh,welcomeSubtitle:em})},className:"rounded-lg px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":"Kaart verwijderen",children:"Verwijderen"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eM(null),className:"rounded-lg border border-gray-200 px-3 py-1.5 text-sm text-gray-700 dark:border-white/10 dark:text-gray-300",children:"Annuleren"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e,t,r,a,i,d,l,n,o;let s={title:eT.title,...null!=e0.entity_id&&"energy_monitor_card"!==e0.type&&{entity_id:eT.entity_id},..."solar_card"===e0.type&&{consumption_entity_id:eT.consumption_entity_id||void 0},..."energy_monitor_card"===e0.type&&{entity_id:eT.entity_id||void 0,background_image:eT.background_image||void 0,background_image_dark:eT.background_image_dark||void 0,image_conditions:(null!=(e=eT.image_conditions)?e:[]).filter(e=>{var t;return null==(t=e.image)?void 0:t.trim()}).length>0?(null!=(t=eT.image_conditions)?t:[]).filter(e=>{var t;return null==(t=e.image)?void 0:t.trim()}):void 0,minimal:null!=(r=eT.minimal)&&r,scale:null!=(a=eT.scale)?a:1},..."stat_pill_card"===e0.type&&{label:eT.label||void 0,icon:eT.icon||void 0,color:eT.color||void 0,conditions:(null!=(i=eT.conditions)?i:[]).length>0?eT.conditions:void 0},...("climate_card_2"===e0.type||"climate_card"===e0.type)&&{humidity_entity_id:eT.humidity_entity_id||void 0,icon:eT.icon||void 0,width:null!=eT.width&&eT.width>0?eT.width:void 0,height:null!=eT.height&&eT.height>0?eT.height:void 0},..."light_card"===e0.type&&{icon:eT.icon||void 0},..."weather_card"===e0.type&&{show_icon:!1!==eT.show_icon,width:null!=eT.width&&eT.width>0?eT.width:void 0,height:null!=eT.height&&eT.height>0?eT.height:void 0},..."vacuum_card"===e0.type&&{script_ids:null!=(d=eT.script_ids)?d:[],script_names:null!=(l=eT.script_names)?l:{},cleaned_area_entity_id:eT.cleaned_area_entity_id||void 0,icon:eT.icon||void 0},..."sensor_card"===e0.type&&{icon:eT.icon||void 0,show_icon:!1!==eT.show_icon,size:eT.size||void 0,conditions:(null!=(n=eT.conditions)?n:[]).length>0?eT.conditions:void 0},..."pill_card"===e0.type&&{icon:eT.icon||void 0,conditions:(null!=(o=eT.conditions)?o:[]).length>0?eT.conditions:void 0,show_state:!1!==eT.show_state},..."nuts_card"===e0.type&&{icon:eT.icon||void 0,icon_background_color:eT.icon_background_color||void 0,entity_id:eT.entity_id||void 0,current_entity_id:eT.current_entity_id||void 0,max_value:null!=eT.max_value&&eT.max_value>0?eT.max_value:void 0,width:null!=eT.width&&eT.width>0?eT.width:void 0,height:null!=eT.height&&eT.height>0?eT.height:void 0},..."room_card"===e0.type&&{icon:eT.icon||void 0,light_entity_id:eT.light_entity_id||void 0,background_image:eT.background_image||void 0,icon_background_color:eT.icon_background_color||void 0,width:null!=eT.width&&eT.width>0?eT.width:void 0,height:null!=eT.height&&eT.height>0?eT.height:void 0}};ex(e=>e.map(e=>e.id===eI?{...e,...s}:e)),eM(null);let c=eu.map(e=>e.id===eI?{...e,...s}:e);e3.mutate({layout:ec,widgets:c,welcomeTitle:eh,welcomeSubtitle:em})},className:"rounded-lg bg-[#4D2FB2] px-3 py-1.5 text-sm text-white hover:opacity-90",children:"Opslaan"})]})]})})]})]})]}),document.body)]})})}}},e=>{e.O(0,[4177,1315,4909,2619,3482,1328,495,5448,5356,8441,1255,7358],()=>e(e.s=48442)),_N_E=e.O()}]);