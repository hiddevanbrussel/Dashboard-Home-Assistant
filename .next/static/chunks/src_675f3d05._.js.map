{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/stores/theme-store.ts"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { persist } from \"zustand/middleware\";\r\n\r\nexport type ThemeMode = \"auto\" | \"light\" | \"dark\";\r\n\r\ntype ThemeStore = {\r\n  mode: ThemeMode;\r\n  setMode: (mode: ThemeMode) => void;\r\n  resolved: \"light\" | \"dark\";\r\n  setResolved: (resolved: \"light\" | \"dark\") => void;\r\n};\r\n\r\nexport const useThemeStore = create<ThemeStore>()(\r\n  persist(\r\n    (set) => ({\r\n      mode: \"auto\",\r\n      resolved: \"light\",\r\n      setMode: (mode) => set({ mode }),\r\n      setResolved: (resolved) => set({ resolved }),\r\n    }),\r\n    { name: \"dashboard-theme\" }\r\n  )\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAWO,MAAM,gBAAgB,IAAA,qJAAM,IACjC,IAAA,2JAAO,EACL,CAAC,MAAQ,CAAC;QACR,MAAM;QACN,UAAU;QACV,SAAS,CAAC,OAAS,IAAI;gBAAE;YAAK;QAC9B,aAAa,CAAC,WAAa,IAAI;gBAAE;YAAS;IAC5C,CAAC,GACD;IAAE,MAAM;AAAkB","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/theme-provider.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useThemeStore } from \"@/stores/theme-store\";\r\nimport { useCallback, useEffect } from \"react\";\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n  const { mode, resolved, setResolved } = useThemeStore();\r\n\r\n  const applyTheme = useCallback(() => {\r\n    const root = document.documentElement;\r\n    let next: \"light\" | \"dark\" = resolved;\r\n\r\n    if (mode === \"auto\") {\r\n      next =\r\n        typeof window !== \"undefined\" &&\r\n        window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n          ? \"dark\"\r\n          : \"light\";\r\n    } else {\r\n      next = mode;\r\n    }\r\n\r\n    root.classList.remove(\"light\", \"dark\");\r\n    root.classList.add(next);\r\n    setResolved(next);\r\n  }, [mode, resolved, setResolved]);\r\n\r\n  useEffect(() => {\r\n    applyTheme();\r\n  }, [applyTheme]);\r\n\r\n  useEffect(() => {\r\n    if (mode !== \"auto\") return;\r\n    const mq = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n    const handler = () => applyTheme();\r\n    mq.addEventListener(\"change\", handler);\r\n    return () => mq.removeEventListener(\"change\", handler);\r\n  }, [mode, applyTheme]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen transition-theme duration-theme\" data-theme={resolved}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS,cAAc,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IAC5B,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,IAAA,mJAAa;IAErD,MAAM,aAAa,IAAA,4KAAW;iDAAC;YAC7B,MAAM,OAAO,SAAS,eAAe;YACrC,IAAI,OAAyB;YAE7B,IAAI,SAAS,QAAQ;gBACnB,OACE,aAAkB,eAClB,OAAO,UAAU,CAAC,gCAAgC,OAAO,GACrD,SACA;YACR,OAAO;gBACL,OAAO;YACT;YAEA,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;YAC/B,KAAK,SAAS,CAAC,GAAG,CAAC;YACnB,YAAY;QACd;gDAAG;QAAC;QAAM;QAAU;KAAY;IAEhC,IAAA,0KAAS;mCAAC;YACR;QACF;kCAAG;QAAC;KAAW;IAEf,IAAA,0KAAS;mCAAC;YACR,IAAI,SAAS,QAAQ;YACrB,MAAM,KAAK,OAAO,UAAU,CAAC;YAC7B,MAAM;mDAAU,IAAM;;YACtB,GAAG,gBAAgB,CAAC,UAAU;YAC9B;2CAAO,IAAM,GAAG,mBAAmB,CAAC,UAAU;;QAChD;kCAAG;QAAC;QAAM;KAAW;IAErB,qBACE,6LAAC;QAAI,WAAU;QAA+C,cAAY;kBACvE;;;;;;AAGP;GAvCgB;;QAC0B,mJAAa;;;KADvC","debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/stores/screensaver-store.ts"],"sourcesContent":["const STORAGE_KEY_DELAY = \"dashboard.screensaverDelaySeconds\";\r\nconst STORAGE_KEY_LEGACY_MINUTES = \"dashboard.screensaverMinutes\";\r\nconst STORAGE_KEY_BACKGROUND = \"dashboard.screensaverBackground\";\r\n\r\n/** Screensaver timeout in seconden. 0 = disabled. */\r\nexport function getScreensaverDelaySeconds(): number {\r\n  if (typeof window === \"undefined\") return 0;\r\n  try {\r\n    let v = localStorage.getItem(STORAGE_KEY_DELAY);\r\n    if (v === null) {\r\n      const legacy = localStorage.getItem(STORAGE_KEY_LEGACY_MINUTES);\r\n      if (legacy !== null) {\r\n        const min = parseInt(legacy, 10);\r\n        if (Number.isFinite(min) && min >= 0) {\r\n          const sec = min * 60;\r\n          localStorage.setItem(STORAGE_KEY_DELAY, String(sec));\r\n          localStorage.removeItem(STORAGE_KEY_LEGACY_MINUTES);\r\n          return sec;\r\n        }\r\n      }\r\n      return 0;\r\n    }\r\n    const n = parseInt(v, 10);\r\n    return Number.isFinite(n) && n >= 0 ? n : 0;\r\n  } catch {\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport function setScreensaverDelaySeconds(seconds: number): void {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY_DELAY, String(Math.max(0, Math.round(seconds))));\r\n    window.dispatchEvent(new CustomEvent(\"screensaver-setting-changed\"));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n\r\n/** Screensaver background image URL. Empty string = geen afbeelding. */\r\nexport function getScreensaverBackgroundImage(): string {\r\n  if (typeof window === \"undefined\") return \"\";\r\n  try {\r\n    const v = localStorage.getItem(STORAGE_KEY_BACKGROUND);\r\n    return typeof v === \"string\" ? v : \"\";\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport function setScreensaverBackgroundImage(url: string): void {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY_BACKGROUND, url || \"\");\r\n    window.dispatchEvent(new CustomEvent(\"screensaver-setting-changed\"));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n\r\nconst STORAGE_KEY_CLOCK24 = \"dashboard.screensaverClock24h\";\r\n\r\n/** Klok 24-uurs (true) of 12-uurs am/pm (false). Default true. */\r\nexport function getScreensaverClock24h(): boolean {\r\n  if (typeof window === \"undefined\") return true;\r\n  try {\r\n    const v = localStorage.getItem(STORAGE_KEY_CLOCK24);\r\n    if (v === \"false\") return false;\r\n    if (v === \"true\") return true;\r\n    return true;\r\n  } catch {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport function setScreensaverClock24h(value: boolean): void {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY_CLOCK24, value ? \"true\" : \"false\");\r\n    window.dispatchEvent(new CustomEvent(\"screensaver-setting-changed\"));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n\r\nconst STORAGE_KEY_WEATHER_ENTITY = \"dashboard.screensaverWeatherEntityId\";\r\n\r\n/** Weather entity voor screensaver (bijv. weather.home). Leeg = fallback naar header-temperatuurentity. */\r\nexport function getScreensaverWeatherEntityId(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  try {\r\n    const v = localStorage.getItem(STORAGE_KEY_WEATHER_ENTITY);\r\n    return v && v.length > 0 ? v : null;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function setScreensaverWeatherEntityId(entityId: string | null): void {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY_WEATHER_ENTITY, entityId ?? \"\");\r\n    window.dispatchEvent(new CustomEvent(\"screensaver-setting-changed\"));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n\r\nconst STORAGE_KEY_PEXELS_ENABLED = \"dashboard.screensaverPexelsEnabled\";\r\nconst STORAGE_KEY_PEXELS_QUERY = \"dashboard.screensaverPexelsQuery\";\r\nconst STORAGE_KEY_PEXELS_API_KEY = \"dashboard.screensaverPexelsApiKey\";\r\n\r\n/** Pexels-foto's gebruiken als screensaver-achtergrond (alleen als er geen custom afbeelding is). */\r\nexport function getScreensaverPexelsEnabled(): boolean {\r\n  if (typeof window === \"undefined\") return false;\r\n  try {\r\n    return localStorage.getItem(STORAGE_KEY_PEXELS_ENABLED) === \"true\";\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function setScreensaverPexelsEnabled(enabled: boolean): void {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY_PEXELS_ENABLED, enabled ? \"true\" : \"false\");\r\n    window.dispatchEvent(new CustomEvent(\"screensaver-setting-changed\"));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n\r\n/** Zoekterm voor Pexels (bijv. \"nature landscape\", \"mountains\"). */\r\nexport function getScreensaverPexelsQuery(): string {\r\n  if (typeof window === \"undefined\") return \"nature landscape\";\r\n  try {\r\n    const v = localStorage.getItem(STORAGE_KEY_PEXELS_QUERY);\r\n    return typeof v === \"string\" && v.trim() ? v.trim() : \"nature landscape\";\r\n  } catch {\r\n    return \"nature landscape\";\r\n  }\r\n}\r\n\r\nexport function setScreensaverPexelsQuery(query: string): void {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY_PEXELS_QUERY, query.trim() || \"nature landscape\");\r\n    window.dispatchEvent(new CustomEvent(\"screensaver-setting-changed\"));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n\r\n/** Pexels API-key (gratis op pexels.com/api). Opgeslagen lokaal, niet op de server. */\r\nexport function getScreensaverPexelsApiKey(): string {\r\n  if (typeof window === \"undefined\") return \"\";\r\n  try {\r\n    const v = localStorage.getItem(STORAGE_KEY_PEXELS_API_KEY);\r\n    return typeof v === \"string\" ? v : \"\";\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport function setScreensaverPexelsApiKey(apiKey: string): void {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY_PEXELS_API_KEY, apiKey.trim());\r\n    window.dispatchEvent(new CustomEvent(\"screensaver-setting-changed\"));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/stores/entity-state-store.ts"],"sourcesContent":["import { create } from \"zustand\";\n\nexport type EntityState = {\n  entity_id: string;\n  state: string;\n  attributes: Record<string, unknown>;\n};\n\ntype EntityStateStore = {\n  states: Record<string, EntityState>;\n  updatedAt: number | null;\n  error: string | null;\n  setStates: (entities: EntityState[]) => void;\n  /** Optimistic update voor één entity (bijv. direct aan/uit tonen). */\n  updateEntityState: (entityId: string, patch: Partial<Pick<EntityState, \"state\" | \"attributes\">>) => void;\n  setError: (error: string | null) => void;\n  getState: (entityId: string) => EntityState | undefined;\n  isOffline: () => boolean;\n};\n\nexport const useEntityStateStore = create<EntityStateStore>((set, get) => ({\n  states: {},\n  updatedAt: null,\n  error: null,\n  setStates: (entities) => {\n    const states: Record<string, EntityState> = {};\n    for (const e of entities) {\n      states[e.entity_id] = e;\n    }\n    set({ states, updatedAt: Date.now(), error: null });\n  },\n  updateEntityState: (entityId, patch) => {\n    const current = get().states[entityId];\n    if (!current) return;\n    set({\n      states: {\n        ...get().states,\n        [entityId]: { ...current, ...patch },\n      },\n      updatedAt: Date.now(),\n    });\n  },\n  setError: (error) => set({ error }),\n  getState: (entityId) => get().states[entityId],\n  isOffline: () => get().error != null,\n}));\n"],"names":[],"mappings":";;;;AAAA;;AAoBO,MAAM,sBAAsB,IAAA,qJAAM,EAAmB,CAAC,KAAK,MAAQ,CAAC;QACzE,QAAQ,CAAC;QACT,WAAW;QACX,OAAO;QACP,WAAW,CAAC;YACV,MAAM,SAAsC,CAAC;YAC7C,KAAK,MAAM,KAAK,SAAU;gBACxB,MAAM,CAAC,EAAE,SAAS,CAAC,GAAG;YACxB;YACA,IAAI;gBAAE;gBAAQ,WAAW,KAAK,GAAG;gBAAI,OAAO;YAAK;QACnD;QACA,mBAAmB,CAAC,UAAU;YAC5B,MAAM,UAAU,MAAM,MAAM,CAAC,SAAS;YACtC,IAAI,CAAC,SAAS;YACd,IAAI;gBACF,QAAQ;oBACN,GAAG,MAAM,MAAM;oBACf,CAAC,SAAS,EAAE;wBAAE,GAAG,OAAO;wBAAE,GAAG,KAAK;oBAAC;gBACrC;gBACA,WAAW,KAAK,GAAG;YACrB;QACF;QACA,UAAU,CAAC,QAAU,IAAI;gBAAE;YAAM;QACjC,UAAU,CAAC,WAAa,MAAM,MAAM,CAAC,SAAS;QAC9C,WAAW,IAAM,MAAM,KAAK,IAAI;IAClC,CAAC","debugId":null}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/screensaver.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport {\r\n  Cloud,\r\n  CloudFog,\r\n  CloudLightning,\r\n  CloudRain,\r\n  CloudSnow,\r\n  Moon,\r\n  Sun,\r\n  Wind,\r\n} from \"lucide-react\";\r\nimport { getScreensaverDelaySeconds, getScreensaverBackgroundImage, getScreensaverClock24h, getScreensaverWeatherEntityId, getScreensaverPexelsEnabled, getScreensaverPexelsQuery, getScreensaverPexelsApiKey } from \"@/stores/screensaver-store\";\r\nimport { useEntityStateStore } from \"@/stores/entity-state-store\";\r\n\r\n/** Standaard achtergrond wanneer er geen afbeelding is geüpload (zet bestand in public/default-screensaver.png). */\r\nconst DEFAULT_SCREENSAVER_IMAGE = \"/default-screensaver.png\";\r\n\r\nconst ACTIVITY_EVENTS = [\"mousemove\", \"mousedown\", \"keydown\", \"touchstart\", \"scroll\", \"click\"] as const;\r\n\r\nfunction useIdleScreensaver() {\r\n  const [active, setActive] = useState(false);\r\n  const [timeoutSeconds, setTimeoutSeconds] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const sec = getScreensaverDelaySeconds();\r\n    setTimeoutSeconds(sec);\r\n    const onSettingChange = () => setTimeoutSeconds(getScreensaverDelaySeconds());\r\n    const onActivate = () => setActive(true);\r\n    window.addEventListener(\"screensaver-setting-changed\", onSettingChange);\r\n    window.addEventListener(\"screensaver-activate\", onActivate);\r\n    return () => {\r\n      window.removeEventListener(\"screensaver-setting-changed\", onSettingChange);\r\n      window.removeEventListener(\"screensaver-activate\", onActivate);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (timeoutSeconds <= 0) {\r\n      setActive(false);\r\n      return;\r\n    }\r\n    const delayMs = timeoutSeconds * 1000;\r\n    let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n    const resetTimer = () => {\r\n      setActive(false);\r\n      if (timeoutId) clearTimeout(timeoutId);\r\n      timeoutId = setTimeout(() => setActive(true), delayMs);\r\n    };\r\n\r\n    resetTimer();\r\n\r\n    const onActivity = () => resetTimer();\r\n    for (const ev of ACTIVITY_EVENTS) {\r\n      window.addEventListener(ev, onActivity, { passive: true });\r\n    }\r\n\r\n    return () => {\r\n      for (const ev of ACTIVITY_EVENTS) {\r\n        window.removeEventListener(ev, onActivity);\r\n      }\r\n      if (timeoutId) clearTimeout(timeoutId);\r\n    };\r\n  }, [timeoutSeconds]);\r\n\r\n  return { active, setActive };\r\n}\r\n\r\nfunction ScreensaverWeatherIcon({ state }: { state: string }) {\r\n  const s = state?.toLowerCase() ?? \"\";\r\n  const iconClass = \"h-6 w-6 shrink-0 text-white/90\";\r\n  if (s === \"sunny\" || s === \"clear\") return <Sun className={iconClass} aria-hidden />;\r\n  if (s === \"clear-night\") return <Moon className={iconClass} aria-hidden />;\r\n  if (s === \"fog\" || s === \"mist\") return <CloudFog className={iconClass} aria-hidden />;\r\n  if (s === \"rainy\" || s === \"pouring\" || s === \"hail\") return <CloudRain className={iconClass} aria-hidden />;\r\n  if (s === \"snowy\" || s === \"snowy-rainy\") return <CloudSnow className={iconClass} aria-hidden />;\r\n  if (s === \"lightning\" || s === \"lightning-rainy\") return <CloudLightning className={iconClass} aria-hidden />;\r\n  if (s === \"windy\" || s === \"windy-variant\") return <Wind className={iconClass} aria-hidden />;\r\n  if (s === \"cloudy\" || s === \"partlycloudy\" || s === \"exceptional\") return <Cloud className={iconClass} aria-hidden />;\r\n  return <Cloud className={iconClass} aria-hidden />;\r\n}\r\n\r\nfunction ScreensaverWeather() {\r\n  const entityId =\r\n    getScreensaverWeatherEntityId() ??\r\n    (typeof window !== \"undefined\" ? localStorage.getItem(\"dashboard.headerTemperatureEntityId\") : null) ??\r\n    \"weather.home\";\r\n  const entity = useEntityStateStore((s) => s.getState(entityId));\r\n\r\n  const condition = (entity?.state as string) ?? \"\";\r\n  const temperature =\r\n    entity?.attributes?.temperature != null\r\n      ? Number(entity.attributes.temperature)\r\n      : (entity?.state != null && entityId.startsWith(\"sensor.\") ? Number(entity.state) : undefined);\r\n  const tempStr =\r\n    temperature != null && !Number.isNaN(temperature)\r\n      ? `${Math.round(temperature)}°`\r\n      : null;\r\n\r\n  if (!tempStr && !condition) return null;\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2 text-white/90 drop-shadow-md\">\r\n      {(condition || entityId.startsWith(\"weather.\")) && (\r\n        <ScreensaverWeatherIcon state={condition} />\r\n      )}\r\n      {tempStr && (\r\n        <span className=\"text-xl font-light tabular-nums\">{tempStr}</span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ScreensaverClock() {\r\n  const [time, setTime] = useState(() => new Date());\r\n  const use24h = getScreensaverClock24h();\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => setTime(new Date()), 1000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const timeStr = use24h\r\n    ? `${time.getHours().toString().padStart(2, \"0\")}:${time.getMinutes().toString().padStart(2, \"0\")}`\r\n    : `${(time.getHours() % 12 || 12)}:${time.getMinutes().toString().padStart(2, \"0\")}`;\r\n  const ampm = use24h ? null : (time.getHours() < 12 ? \"am\" : \"pm\");\r\n\r\n  const dateStr = time.toLocaleDateString(\"nl-NL\", {\r\n    weekday: \"long\",\r\n    day: \"numeric\",\r\n    month: \"long\",\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-end gap-1\">\r\n      <time\r\n        dateTime={time.toISOString()}\r\n        className=\"text-5xl sm:text-6xl font-light tabular-nums text-white/90 drop-shadow-md\"\r\n      >\r\n        {timeStr}\r\n        {ampm != null && (\r\n          <span className=\"ml-1.5 text-lg sm:text-xl font-normal text-white/70\">\r\n            {ampm}\r\n          </span>\r\n        )}\r\n      </time>\r\n      <span className=\"text-sm text-white/50 tabular-nums\">{dateStr}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ScreensaverOverlay({ onDismiss }: { onDismiss: () => void }) {\r\n  const customBg = getScreensaverBackgroundImage();\r\n  const pexelsEnabled = getScreensaverPexelsEnabled();\r\n  const pexelsQuery = getScreensaverPexelsQuery();\r\n  const [pexelsImage, setPexelsImage] = useState<string | null>(null);\r\n  const [pexelsAttribution, setPexelsAttribution] = useState<{ url: string; photographer: string } | null>(null);\r\n  const [imageFailed, setImageFailed] = useState(false);\r\n  const [pexelsError, setPexelsError] = useState(false);\r\n\r\n  const pexelsApiKey = getScreensaverPexelsApiKey();\r\n\r\n  useEffect(() => {\r\n    if (customBg || !pexelsEnabled || !pexelsApiKey) return;\r\n    setPexelsError(false);\r\n    fetch(`/api/pexels/photo?query=${encodeURIComponent(pexelsQuery)}`, {\r\n      headers: { \"X-Pexels-Api-Key\": pexelsApiKey },\r\n    })\r\n      .then((r) => r.json())\r\n      .then((data) => {\r\n        if (data?.imageUrl) {\r\n          setPexelsImage(data.imageUrl);\r\n          setPexelsAttribution(data.pexelsUrl && data.photographer ? { url: data.pexelsUrl, photographer: data.photographer } : null);\r\n        } else {\r\n          setPexelsError(true);\r\n        }\r\n      })\r\n      .catch(() => setPexelsError(true));\r\n  }, [customBg, pexelsEnabled, pexelsQuery, pexelsApiKey]);\r\n\r\n  const backgroundImage = customBg || pexelsImage || DEFAULT_SCREENSAVER_IMAGE;\r\n  const useGradient = imageFailed || (pexelsEnabled && !customBg && (pexelsError && !pexelsImage || !pexelsApiKey));\r\n\r\n  return (\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      aria-label=\"Screensaver aanraken om te sluiten\"\r\n      className=\"fixed inset-0 z-[9999] flex items-end justify-end p-8 cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50\"\r\n      style={\r\n        useGradient\r\n          ? { background: \"linear-gradient(to bottom right, #111827, #1f2937, #000)\" }\r\n          : undefined\r\n      }\r\n      onClick={onDismiss}\r\n      onKeyDown={(e) => {\r\n        if (e.key === \"Enter\" || e.key === \" \") onDismiss();\r\n      }}\r\n    >\r\n      {!useGradient && (\r\n        <>\r\n          <div\r\n            className=\"absolute inset-0 bg-cover bg-center bg-no-repeat\"\r\n            style={{ backgroundImage: `url(${backgroundImage})` }}\r\n            aria-hidden\r\n          />\r\n          <img\r\n            src={backgroundImage}\r\n            alt=\"\"\r\n            className=\"sr-only\"\r\n            onError={() => setImageFailed(true)}\r\n          />\r\n          <div className=\"absolute inset-0 bg-black/50\" aria-hidden />\r\n        </>\r\n      )}\r\n      <div className=\"relative z-10 flex flex-col items-end gap-4\">\r\n        <ScreensaverWeather />\r\n        <ScreensaverClock />\r\n        {pexelsAttribution && (\r\n          <a\r\n            href={pexelsAttribution.url}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"text-xs text-white/50 hover:text-white/70 transition-colors\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            Photo by {pexelsAttribution.photographer} on Pexels\r\n          </a>\r\n        )}\r\n        {pexelsEnabled && !pexelsAttribution && !pexelsError && (\r\n          <a\r\n            href=\"https://www.pexels.com\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"text-xs text-white/50 hover:text-white/70 transition-colors\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            Photos provided by Pexels\r\n          </a>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function ScreensaverProvider({ children }: { children: React.ReactNode }) {\r\n  const { active, setActive } = useIdleScreensaver();\r\n\r\n  const dismiss = useCallback(() => setActive(false), []);\r\n\r\n  return (\r\n    <>\r\n      {children}\r\n      {active &&\r\n        typeof document !== \"undefined\" &&\r\n        createPortal(\r\n          <ScreensaverOverlay onDismiss={dismiss} />,\r\n          document.body\r\n        )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 820, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/hooks/use-entity-state.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useEntityStateStore } from \"@/stores/entity-state-store\";\r\n\r\nconst POLL_INTERVAL_MS = 5000;\r\n\r\n/**\r\n * Poll GET /api/ha/state and update entity state store.\r\n * Call once from a provider or dashboard layout so widgets can read live state.\r\n */\r\nexport function useEntityStatePolling(connectionId?: string) {\r\n  const setStates = useEntityStateStore((s) => s.setStates);\r\n  const setError = useEntityStateStore((s) => s.setError);\r\n  const intervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\r\n\r\n  useEffect(() => {\r\n    const url = connectionId\r\n      ? `/api/ha/state?connectionId=${encodeURIComponent(connectionId)}`\r\n      : \"/api/ha/state\";\r\n\r\n    function poll() {\r\n      fetch(url)\r\n        .then((res) => {\r\n          if (!res.ok) throw new Error(\"Fetch failed\");\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (Array.isArray(data)) setStates(data);\r\n        })\r\n        .catch(() => setError(\"No connection\"));\r\n    }\r\n\r\n    poll();\r\n    intervalRef.current = setInterval(poll, POLL_INTERVAL_MS);\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [connectionId, setStates, setError]);\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAKA,MAAM,mBAAmB;AAMlB,SAAS,sBAAsB,YAAqB;;IACzD,MAAM,YAAY,IAAA,mKAAmB;gEAAC,CAAC,IAAM,EAAE,SAAS;;IACxD,MAAM,WAAW,IAAA,mKAAmB;+DAAC,CAAC,IAAM,EAAE,QAAQ;;IACtD,MAAM,cAAc,IAAA,uKAAM,EAAwC;IAElE,IAAA,0KAAS;2CAAC;YACR,MAAM,MAAM,eACR,AAAC,8BAA8D,OAAjC,mBAAmB,iBACjD;YAEJ,SAAS;gBACP,MAAM,KACH,IAAI;4DAAC,CAAC;wBACL,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;wBAC7B,OAAO,IAAI,IAAI;oBACjB;2DACC,IAAI;4DAAC,CAAC;wBACL,IAAI,MAAM,OAAO,CAAC,OAAO,UAAU;oBACrC;2DACC,KAAK;4DAAC,IAAM,SAAS;;YAC1B;YAEA;YACA,YAAY,OAAO,GAAG,YAAY,MAAM;YACxC;mDAAO;oBACL,IAAI,YAAY,OAAO,EAAE,cAAc,YAAY,OAAO;gBAC5D;;QACF;0CAAG;QAAC;QAAc;QAAW;KAAS;AACxC;GA5BgB;;QACI,mKAAmB;QACpB,mKAAmB","debugId":null}},
    {"offset": {"line": 884, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/providers.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\r\nimport { useState } from \"react\";\r\nimport { ThemeProvider } from \"./theme-provider\";\r\nimport { ScreensaverProvider } from \"./screensaver\";\r\nimport { useEntityStatePolling } from \"@/hooks/use-entity-state\";\r\n\r\nexport function Providers({ children }: { children: React.ReactNode }) {\r\n  const [queryClient] = useState(\r\n    () =>\r\n      new QueryClient({\r\n        defaultOptions: {\r\n          queries: { staleTime: 60 * 1000 },\r\n        },\r\n      })\r\n  );\r\n\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <ThemeProvider>\r\n        <EntityStatePoller />\r\n        <ScreensaverProvider>{children}</ScreensaverProvider>\r\n      </ThemeProvider>\r\n    </QueryClientProvider>\r\n  );\r\n}\r\n\r\nfunction EntityStatePoller() {\r\n  useEntityStatePolling();\r\n  return null;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQO,SAAS,UAAU,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IACxB,MAAM,CAAC,YAAY,GAAG,IAAA,yKAAQ;8BAC5B,IACE,IAAI,+LAAW,CAAC;gBACd,gBAAgB;oBACd,SAAS;wBAAE,WAAW,KAAK;oBAAK;gBAClC;YACF;;IAGJ,qBACE,6LAAC,gNAAmB;QAAC,QAAQ;kBAC3B,cAAA,6LAAC,2JAAa;;8BACZ,6LAAC;;;;;8BACD,6LAAC,2JAAmB;8BAAE;;;;;;;;;;;;;;;;;AAI9B;GAlBgB;KAAA;AAoBhB,SAAS;;IACP,IAAA,kKAAqB;IACrB,OAAO;AACT;IAHS;;QACP,kKAAqB;;;MADd","debugId":null}},
    {"offset": {"line": 966, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/lib/onboarding-completed.ts"],"sourcesContent":["const KEY = \"onboarding_completed\";\r\n\r\nexport function setOnboardingCompleted(): void {\r\n  if (typeof window === \"undefined\") return;\r\n  window.localStorage.setItem(KEY, \"true\");\r\n}\r\n\r\nexport function getOnboardingCompleted(): boolean {\r\n  if (typeof window === \"undefined\") return false;\r\n  return window.localStorage.getItem(KEY) === \"true\";\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,MAAM;AAEL,SAAS;IACd;;IACA,OAAO,YAAY,CAAC,OAAO,CAAC,KAAK;AACnC;AAEO,SAAS;IACd;;IACA,OAAO,OAAO,YAAY,CAAC,OAAO,CAAC,SAAS;AAC9C","debugId":null}},
    {"offset": {"line": 990, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/onboarding-guard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getOnboardingCompleted, setOnboardingCompleted } from \"@/lib/onboarding-completed\";\r\n\r\nexport function OnboardingGuard({ children }: { children: React.ReactNode }) {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [allowed, setAllowed] = useState<boolean | null>(null);\r\n\r\n  useEffect(() => {\r\n    const completed = getOnboardingCompleted();\r\n    const isOnboardingStart = pathname === \"/onboarding/start\";\r\n    const isOnboardingWizard = pathname === \"/onboarding\";\r\n\r\n    if (completed || isOnboardingStart || isOnboardingWizard) {\r\n      setAllowed(true);\r\n      return;\r\n    }\r\n\r\n    // Geen onboarding-flag in localStorage: check of er al een dashboard is (bijv. eerste start na deploy met bestaande data)\r\n    fetch(\"/api/dashboard\")\r\n      .then((r) => r.json())\r\n      .then((d) => {\r\n        if (d?.id) {\r\n          setOnboardingCompleted();\r\n          setAllowed(true);\r\n          if (pathname === \"/\" || pathname === \"/dashboards\") {\r\n            router.replace(`/dashboards/${d.id}`);\r\n          }\r\n        } else {\r\n          router.replace(\"/onboarding/start\");\r\n          setAllowed(false);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        router.replace(\"/onboarding/start\");\r\n        setAllowed(false);\r\n      });\r\n  }, [pathname, router]);\r\n\r\n  if (allowed === null || !allowed) {\r\n    return (\r\n      <div className=\"flex min-h-screen items-center justify-center bg-page-light dark:bg-dark-page\">\r\n        <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-accent-yellow dark:border-accent-green border-t-transparent\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS,gBAAgB,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IAC9B,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAiB;IAEvD,IAAA,0KAAS;qCAAC;YACR,MAAM,YAAY,IAAA,kKAAsB;YACxC,MAAM,oBAAoB,aAAa;YACvC,MAAM,qBAAqB,aAAa;YAExC,IAAI,aAAa,qBAAqB,oBAAoB;gBACxD,WAAW;gBACX;YACF;YAEA,0HAA0H;YAC1H,MAAM,kBACH,IAAI;6CAAC,CAAC,IAAM,EAAE,IAAI;4CAClB,IAAI;6CAAC,CAAC;oBACL,IAAI,cAAA,wBAAA,EAAG,EAAE,EAAE;wBACT,IAAA,kKAAsB;wBACtB,WAAW;wBACX,IAAI,aAAa,OAAO,aAAa,eAAe;4BAClD,OAAO,OAAO,CAAC,AAAC,eAAmB,OAAL,EAAE,EAAE;wBACpC;oBACF,OAAO;wBACL,OAAO,OAAO,CAAC;wBACf,WAAW;oBACb;gBACF;4CACC,KAAK;6CAAC;oBACL,OAAO,OAAO,CAAC;oBACf,WAAW;gBACb;;QACJ;oCAAG;QAAC;QAAU;KAAO;IAErB,IAAI,YAAY,QAAQ,CAAC,SAAS;QAChC,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBAAO;kBAAG;;AACZ;GA7CgB;;QACG,oJAAW;QACb,kJAAS;;;KAFV","debugId":null}},
    {"offset": {"line": 1082, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/page-background.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { useThemeStore } from \"@/stores/theme-store\";\r\n\r\ntype BackgroundData = {\r\n  background: string | null;\r\n  backgroundLight: string | null;\r\n  backgroundDark: string | null;\r\n};\r\n\r\nfunction fetchBackground(): Promise<BackgroundData> {\r\n  return fetch(\"/api/dashboard\")\r\n    .then((r) => r.json())\r\n    .then((d) => ({\r\n      background: d?.background ?? null,\r\n      backgroundLight: d?.backgroundLight ?? null,\r\n      backgroundDark: d?.backgroundDark ?? null,\r\n    }))\r\n    .catch(() => ({ background: null, backgroundLight: null, backgroundDark: null }));\r\n}\r\n\r\nconst PageBackgroundContext = createContext<string | null>(null);\r\n\r\nexport function usePageBackground() {\r\n  return useContext(PageBackgroundContext);\r\n}\r\n\r\nexport function PageBackgroundProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const [data, setData] = useState<BackgroundData>({\r\n    background: null,\r\n    backgroundLight: null,\r\n    backgroundDark: null,\r\n  });\r\n  const resolved = useThemeStore((s) => s.resolved);\r\n\r\n  useEffect(() => {\r\n    fetchBackground().then(setData);\r\n    const onUpdate = () => fetchBackground().then(setData);\r\n    window.addEventListener(\"page-background-changed\", onUpdate);\r\n    return () => window.removeEventListener(\"page-background-changed\", onUpdate);\r\n  }, []);\r\n\r\n  const url =\r\n    (resolved === \"dark\" ? data.backgroundDark : data.backgroundLight) ??\r\n    data.background ??\r\n    null;\r\n\r\n  return (\r\n    <PageBackgroundContext.Provider value={url}>\r\n      {url ? (\r\n        <div\r\n          className=\"fixed inset-0 -z-10 bg-cover bg-center bg-no-repeat\"\r\n          style={{ backgroundImage: `url(${url})` }}\r\n          aria-hidden\r\n        />\r\n      ) : null}\r\n      {children}\r\n    </PageBackgroundContext.Provider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAWA,SAAS;IACP,OAAO,MAAM,kBACV,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,IAClB,IAAI,CAAC,CAAC;YACO,eACK,oBACD;eAHJ;YACZ,YAAY,CAAA,gBAAA,cAAA,wBAAA,EAAG,UAAU,cAAb,2BAAA,gBAAiB;YAC7B,iBAAiB,CAAA,qBAAA,cAAA,wBAAA,EAAG,eAAe,cAAlB,gCAAA,qBAAsB;YACvC,gBAAgB,CAAA,oBAAA,cAAA,wBAAA,EAAG,cAAc,cAAjB,+BAAA,oBAAqB;QACvC;OACC,KAAK,CAAC,IAAM,CAAC;YAAE,YAAY;YAAM,iBAAiB;YAAM,gBAAgB;QAAK,CAAC;AACnF;AAEA,MAAM,sCAAwB,IAAA,8KAAa,EAAgB;AAEpD,SAAS;;IACd,OAAO,IAAA,2KAAU,EAAC;AACpB;GAFgB;AAIT,SAAS,uBAAuB,KAItC;QAJsC,EACrC,QAAQ,EAGT,GAJsC;;IAKrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAiB;QAC/C,YAAY;QACZ,iBAAiB;QACjB,gBAAgB;IAClB;IACA,MAAM,WAAW,IAAA,mJAAa;0DAAC,CAAC,IAAM,EAAE,QAAQ;;IAEhD,IAAA,0KAAS;4CAAC;YACR,kBAAkB,IAAI,CAAC;YACvB,MAAM;6DAAW,IAAM,kBAAkB,IAAI,CAAC;;YAC9C,OAAO,gBAAgB,CAAC,2BAA2B;YACnD;oDAAO,IAAM,OAAO,mBAAmB,CAAC,2BAA2B;;QACrE;2CAAG,EAAE;QAGH,MAAA;IADF,MAAM,MACJ,CAAA,QAAA,CAAA,OAAC,aAAa,SAAS,KAAK,cAAc,GAAG,KAAK,eAAe,cAAjE,kBAAA,OACA,KAAK,UAAU,cADf,mBAAA,QAEA;IAEF,qBACE,6LAAC,sBAAsB,QAAQ;QAAC,OAAO;;YACpC,oBACC,6LAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,iBAAiB,AAAC,OAAU,OAAJ,KAAI;gBAAG;gBACxC,aAAW;;;;;uBAEX;YACH;;;;;;;AAGP;IApCgB;;QAUG,mJAAa;;;KAVhB","debugId":null}}]
}