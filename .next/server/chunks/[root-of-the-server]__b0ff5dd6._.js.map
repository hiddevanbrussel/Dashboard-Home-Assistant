{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = globalThis as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient();\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAChE,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/app/api/dashboards/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/prisma\";\r\n\r\n/**\r\n * GET /api/dashboards/[id] – Get one dashboard.\r\n */\r\nexport async function GET(\r\n  _request: Request,\r\n  { params }: { params: Promise<{ id: string }> }\r\n) {\r\n  const { id } = await params;\r\n  const dashboard = await prisma.dashboard.findUnique({ where: { id } });\r\n  if (!dashboard) {\r\n    return NextResponse.json({ error: \"Not found\" }, { status: 404 });\r\n  }\r\n  return NextResponse.json({\r\n    id: dashboard.id,\r\n    name: dashboard.name,\r\n    theme: dashboard.theme,\r\n    layout: dashboard.layout,\r\n    widgets: dashboard.widgets,\r\n    background: dashboard.background,\r\n    welcomeTitle: dashboard.welcomeTitle ?? null,\r\n    welcomeSubtitle: dashboard.welcomeSubtitle ?? null,\r\n    createdAt: dashboard.createdAt.toISOString(),\r\n    updatedAt: dashboard.updatedAt.toISOString(),\r\n  });\r\n}\r\n\r\n/**\r\n * PUT /api/dashboards/[id] – Update dashboard (name, theme, layout, widgets, background).\r\n */\r\nexport async function PUT(\r\n  request: Request,\r\n  { params }: { params: Promise<{ id: string }> }\r\n) {\r\n  const { id } = await params;\r\n  let body: {\r\n    name?: string;\r\n    theme?: string;\r\n    layout?: string | null;\r\n    widgets?: string | null;\r\n    background?: string | null;\r\n    welcomeTitle?: string | null;\r\n    welcomeSubtitle?: string | null;\r\n  } = {};\r\n  try {\r\n    body = await request.json();\r\n  } catch {\r\n    return NextResponse.json({ error: \"Invalid JSON\" }, { status: 400 });\r\n  }\r\n\r\n  const baseData = {\r\n    ...(body.name != null && { name: body.name }),\r\n    ...(body.theme != null && { theme: body.theme }),\r\n    ...(body.layout !== undefined && { layout: body.layout }),\r\n    ...(body.widgets !== undefined && { widgets: body.widgets }),\r\n    ...(body.background !== undefined && { background: body.background }),\r\n  };\r\n  const welcomeData = {\r\n    ...(body.welcomeTitle !== undefined && { welcomeTitle: body.welcomeTitle }),\r\n    ...(body.welcomeSubtitle !== undefined && { welcomeSubtitle: body.welcomeSubtitle }),\r\n  };\r\n\r\n  let dashboard;\r\n  try {\r\n    dashboard = await prisma.dashboard.update({\r\n      where: { id },\r\n      data: { ...baseData, ...welcomeData },\r\n    });\r\n  } catch (err) {\r\n    const message = err instanceof Error ? err.message : String(err);\r\n    if (message.includes(\"welcomeTitle\") || message.includes(\"welcomeSubtitle\") || message.includes(\"no such column\")) {\r\n      dashboard = await prisma.dashboard.update({\r\n        where: { id },\r\n        data: baseData,\r\n      });\r\n    } else {\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  return NextResponse.json({\r\n    id: dashboard.id,\r\n    name: dashboard.name,\r\n    theme: dashboard.theme,\r\n    layout: dashboard.layout,\r\n    widgets: dashboard.widgets,\r\n    background: dashboard.background,\r\n    welcomeTitle: dashboard.welcomeTitle ?? null,\r\n    welcomeSubtitle: dashboard.welcomeSubtitle ?? null,\r\n  });\r\n}\r\n\r\n/**\r\n * DELETE /api/dashboards/[id] – Delete dashboard.\r\n */\r\nexport async function DELETE(\r\n  _request: Request,\r\n  { params }: { params: Promise<{ id: string }> }\r\n) {\r\n  const { id } = await params;\r\n  await prisma.dashboard.delete({ where: { id } });\r\n  return NextResponse.json({ ok: true });\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}