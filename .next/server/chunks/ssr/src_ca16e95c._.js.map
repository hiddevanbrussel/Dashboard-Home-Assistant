{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/layout/sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Home, Settings } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nconst mainIcons = [\r\n  { href: \"/dashboards\", icon: Home, label: \"Home\" },\r\n  { href: \"/settings\", icon: Settings, label: \"Configuratie\" },\r\n] as const;\r\n\r\ntype SidebarProps = {\r\n  activeHref?: string;\r\n  className?: string;\r\n};\r\n\r\nexport function Sidebar({ activeHref, className }: SidebarProps) {\r\n  return (\r\n    <aside\r\n      className={cn(\r\n        \"flex w-14 flex-col items-center gap-2 rounded-full bg-gray-900/90 py-3 dark:bg-black/40\",\r\n        className\r\n      )}\r\n      aria-label=\"Sidebar\"\r\n    >\r\n      {mainIcons.map(({ href, icon: Icon, label }) => {\r\n        const isActive = activeHref === href;\r\n        return (\r\n          <Link\r\n            key={label}\r\n            href={href}\r\n            aria-label={label}\r\n            className={cn(\r\n              \"flex h-10 w-10 items-center justify-center rounded-full transition-all duration-150\",\r\n              isActive\r\n                ? \"bg-white text-gray-900\"\r\n                : \"text-white/80 hover:bg-white/15 hover:text-white\"\r\n            )}\r\n          >\r\n            <Icon className=\"h-5 w-5\" />\r\n          </Link>\r\n        );\r\n      })}\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAMA,MAAM,YAAY;IAChB;QAAE,MAAM;QAAe,MAAM,2MAAI;QAAE,OAAO;IAAO;IACjD;QAAE,MAAM;QAAa,MAAM,sNAAQ;QAAE,OAAO;IAAe;CAC5D;AAOM,SAAS,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAgB;IAC7D,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,2FACA;QAEF,cAAW;kBAEV,UAAU,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE;YACzC,MAAM,WAAW,eAAe;YAChC,qBACE,8OAAC,uKAAI;gBAEH,MAAM;gBACN,cAAY;gBACZ,WAAW,IAAA,yHAAE,EACX,uFACA,WACI,2BACA;0BAGN,cAAA,8OAAC;oBAAK,WAAU;;;;;;eAVX;;;;;QAaX;;;;;;AAGN","debugId":null}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/layout/floating-toolbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ZoomIn, ZoomOut, Search, X } from \"lucide-react\";\r\n\r\ntype FloatingToolbarProps = {\r\n  className?: string;\r\n  showFamilyHub?: boolean;\r\n};\r\n\r\nexport function FloatingToolbar({\r\n  className,\r\n  showFamilyHub = true,\r\n}: FloatingToolbarProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"fixed bottom-6 left-1/2 z-50 flex -translate-x-1/2 items-center gap-2 rounded-full bg-gray-900/90 px-3 py-2 shadow-lg dark:bg-black/50\",\r\n        className\r\n      )}\r\n      role=\"toolbar\"\r\n      aria-label=\"Floating toolbar\"\r\n    >\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Zoom in\"\r\n        className=\"flex h-9 w-9 items-center justify-center rounded-full text-white/90 hover:bg-white/15 hover:text-white\"\r\n      >\r\n        <ZoomIn className=\"h-4 w-4\" />\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Zoom out\"\r\n        className=\"flex h-9 w-9 items-center justify-center rounded-full text-white/90 hover:bg-white/15 hover:text-white\"\r\n      >\r\n        <ZoomOut className=\"h-4 w-4\" />\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Search\"\r\n        className=\"flex h-9 w-9 items-center justify-center rounded-full text-white/90 hover:bg-white/15 hover:text-white\"\r\n      >\r\n        <Search className=\"h-4 w-4\" />\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Close\"\r\n        className=\"flex h-9 w-9 items-center justify-center rounded-full text-white/90 hover:bg-white/15 hover:text-white\"\r\n      >\r\n        <X className=\"h-4 w-4\" />\r\n      </button>\r\n      {showFamilyHub && (\r\n        <>\r\n          <div className=\"mx-1 h-6 w-px bg-white/20\" />\r\n          <div className=\"flex -space-x-2\">\r\n            {[1, 2, 3].map((i) => (\r\n              <div\r\n                key={i}\r\n                className=\"h-8 w-8 rounded-full border-2 border-gray-900 bg-gray-500 dark:border-dark-page\"\r\n                aria-hidden\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAHA;;;;AAUO,SAAS,gBAAgB,EAC9B,SAAS,EACT,gBAAgB,IAAI,EACC;IACrB,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,0IACA;QAEF,MAAK;QACL,cAAW;;0BAEX,8OAAC;gBACC,MAAK;gBACL,cAAW;gBACX,WAAU;0BAEV,cAAA,8OAAC,oNAAM;oBAAC,WAAU;;;;;;;;;;;0BAEpB,8OAAC;gBACC,MAAK;gBACL,cAAW;gBACX,WAAU;0BAEV,cAAA,8OAAC,uNAAO;oBAAC,WAAU;;;;;;;;;;;0BAErB,8OAAC;gBACC,MAAK;gBACL,cAAW;gBACX,WAAU;0BAEV,cAAA,8OAAC,gNAAM;oBAAC,WAAU;;;;;;;;;;;0BAEpB,8OAAC;gBACC,MAAK;gBACL,cAAW;gBACX,WAAU;0BAEV,cAAA,8OAAC,iMAAC;oBAAC,WAAU;;;;;;;;;;;YAEd,+BACC;;kCACE,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;kCACZ;4BAAC;4BAAG;4BAAG;yBAAE,CAAC,GAAG,CAAC,CAAC,kBACd,8OAAC;gCAEC,WAAU;gCACV,aAAW;+BAFN;;;;;;;;;;;;;;;;;;AAUrB","debugId":null}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/layout/app-shell.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Sidebar } from \"./sidebar\";\r\nimport { FloatingToolbar } from \"./floating-toolbar\";\r\n\r\ntype AppShellProps = {\r\n  children: React.ReactNode;\r\n  activeTab?: string;\r\n  showSidebar?: boolean;\r\n  showFloatingToolbar?: boolean;\r\n  className?: string;\r\n};\r\n\r\nexport function AppShell({\r\n  children,\r\n  activeTab = \"/dashboards\",\r\n  showSidebar = true,\r\n  showFloatingToolbar = false,\r\n  className,\r\n}: AppShellProps) {\r\n  return (\r\n    <div className={cn(\"flex min-h-screen flex-col bg-page-light dark:bg-dark-page\", className)}>\r\n      <div className=\"flex flex-1 overflow-hidden\">\r\n        {showSidebar && (\r\n          <div className=\"flex shrink-0 flex-col items-center py-4 pl-3\">\r\n            <Sidebar activeHref={activeTab} />\r\n          </div>\r\n        )}\r\n        <main className=\"flex-1 overflow-auto p-4\">{children}</main>\r\n      </div>\r\n\r\n      {showFloatingToolbar && <FloatingToolbar />}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAcO,SAAS,SAAS,EACvB,QAAQ,EACR,YAAY,aAAa,EACzB,cAAc,IAAI,EAClB,sBAAsB,KAAK,EAC3B,SAAS,EACK;IACd,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,8DAA8D;;0BAC/E,8OAAC;gBAAI,WAAU;;oBACZ,6BACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,kJAAO;4BAAC,YAAY;;;;;;;;;;;kCAGzB,8OAAC;wBAAK,WAAU;kCAA4B;;;;;;;;;;;;YAG7C,qCAAuB,8OAAC,sKAAe;;;;;;;;;;;AAG9C","debugId":null}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/layout/hero-section.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype HeroSectionProps = {\r\n  title: string;\r\n  subtitle: string;\r\n  /** \"light\" | \"dark\" = gradient (geen afbeelding), string = URL (eigen upload of /hero-...) */\r\n  backgroundImage?: \"light\" | \"dark\" | string;\r\n  className?: string;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst gradientLight =\r\n  \"linear-gradient(135deg, rgba(246,210,92,0.4) 0%, rgba(180,139,255,0.3) 50%, rgba(100,120,140,0.5) 100%)\";\r\nconst gradientDark =\r\n  \"linear-gradient(135deg, rgba(43,63,75,0.9) 0%, rgba(31,47,58,0.95) 50%, rgba(107,228,107,0.15) 100%)\";\r\n\r\nexport function HeroSection({\r\n  title,\r\n  subtitle,\r\n  backgroundImage,\r\n  className,\r\n  children,\r\n}: HeroSectionProps) {\r\n  const useGradient =\r\n    backgroundImage === \"light\" || backgroundImage === \"dark\";\r\n  const bgUrl =\r\n    backgroundImage && !useGradient ? backgroundImage : undefined;\r\n\r\n  return (\r\n    <section\r\n      className={cn(\r\n        \"relative flex min-h-[320px] flex-col justify-end rounded-card overflow-hidden\",\r\n        className\r\n      )}\r\n    >\r\n      {useGradient && (\r\n        <div\r\n          className=\"absolute inset-0\"\r\n          style={{\r\n            background:\r\n              backgroundImage === \"dark\" ? gradientDark : gradientLight,\r\n          }}\r\n          aria-hidden\r\n        />\r\n      )}\r\n      {bgUrl && (\r\n        <div\r\n          className=\"absolute inset-0 bg-cover bg-center bg-no-repeat\"\r\n          style={{ backgroundImage: `url(${bgUrl})` }}\r\n          aria-hidden\r\n        />\r\n      )}\r\n      <div\r\n        className=\"absolute inset-0 bg-hero-overlay dark:bg-dark-card/60\"\r\n        aria-hidden\r\n      />\r\n      <div className=\"relative z-10 p-8\">\r\n        <h1 className=\"text-hero-title font-bold tracking-tight text-white drop-shadow-sm\">\r\n          {title}\r\n        </h1>\r\n        <p className=\"mt-2 text-hero-subtitle text-white/95\">{subtitle}</p>\r\n        {children}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAaA,MAAM,gBACJ;AACF,MAAM,eACJ;AAEK,SAAS,YAAY,EAC1B,KAAK,EACL,QAAQ,EACR,eAAe,EACf,SAAS,EACT,QAAQ,EACS;IACjB,MAAM,cACJ,oBAAoB,WAAW,oBAAoB;IACrD,MAAM,QACJ,mBAAmB,CAAC,cAAc,kBAAkB;IAEtD,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iFACA;;YAGD,6BACC,8OAAC;gBACC,WAAU;gBACV,OAAO;oBACL,YACE,oBAAoB,SAAS,eAAe;gBAChD;gBACA,aAAW;;;;;;YAGd,uBACC,8OAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,iBAAiB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBAAC;gBAC1C,aAAW;;;;;;0BAGf,8OAAC;gBACC,WAAU;gBACV,aAAW;;;;;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCACX;;;;;;kCAEH,8OAAC;wBAAE,WAAU;kCAAyC;;;;;;oBACrD;;;;;;;;;;;;;AAIT","debugId":null}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/layout/glass-card.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype GlassCardProps = {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  as?: \"div\" | \"article\" | \"section\";\r\n};\r\n\r\nexport function GlassCard({\r\n  children,\r\n  className,\r\n  as: Component = \"div\",\r\n}: GlassCardProps) {\r\n  return (\r\n    <Component\r\n      className={cn(\r\n        \"glass-card rounded-card border border-white/60 p-4 dark:border-white/10\",\r\n        \"transition-shadow duration-150 hover:shadow-lg dark:hover:shadow-glass-dark\",\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </Component>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,SAAS,UAAU,EACxB,QAAQ,EACR,SAAS,EACT,IAAI,YAAY,KAAK,EACN;IACf,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,2EACA,+EACA;kBAGD;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/widgets/energy-usage-widget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { GlassCard } from \"@/components/layout/glass-card\";\r\nimport type { EnergyUsageProps } from \"./widget-types\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function EnergyUsageWidget({\r\n  title = \"Energy Usage\",\r\n  value = 65,\r\n  label = \"Medium\",\r\n  size = \"md\",\r\n  className,\r\n}: EnergyUsageProps & { className?: string }) {\r\n  const pct = Math.min(100, Math.max(0, value ?? 0));\r\n  return (\r\n    <GlassCard\r\n      className={cn(\r\n        \"p-4\",\r\n        size === \"lg\" && \"p-5\",\r\n        size === \"sm\" && \"p-3\",\r\n        className\r\n      )}\r\n    >\r\n      <h3 className=\"text-card-title font-medium mb-2\">{title}</h3>\r\n      <div className=\"flex items-center justify-between gap-2 mb-2\">\r\n        <span className=\"text-2xl font-bold text-accent-yellow dark:text-accent-green\">\r\n          {pct}%\r\n        </span>\r\n        <span className=\"text-sm text-gray-500 dark:text-gray-400\">{label}</span>\r\n      </div>\r\n      <div className=\"h-3 w-full rounded-full bg-gray-200 dark:bg-white/10 overflow-hidden\">\r\n        <div\r\n          className={cn(\r\n            \"h-full rounded-full transition-all duration-300\",\r\n            \"bg-gradient-to-r from-accent-yellow to-accent-green dark:from-accent-green dark:to-accent-yellow\"\r\n          )}\r\n          style={{ width: `${pct}%` }}\r\n        />\r\n      </div>\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMO,SAAS,kBAAkB,EAChC,QAAQ,cAAc,EACtB,QAAQ,EAAE,EACV,QAAQ,QAAQ,EAChB,OAAO,IAAI,EACX,SAAS,EACiC;IAC1C,MAAM,MAAM,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,SAAS;IAC/C,qBACE,8OAAC,0JAAS;QACR,WAAW,IAAA,yHAAE,EACX,OACA,SAAS,QAAQ,OACjB,SAAS,QAAQ,OACjB;;0BAGF,8OAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAClD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;;4BACb;4BAAI;;;;;;;kCAEP,8OAAC;wBAAK,WAAU;kCAA4C;;;;;;;;;;;;0BAE9D,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAW,IAAA,yHAAE,EACX,mDACA;oBAEF,OAAO;wBAAE,OAAO,GAAG,IAAI,CAAC,CAAC;oBAAC;;;;;;;;;;;;;;;;;AAKpC","debugId":null}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/widgets/light-control-widget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { GlassCard } from \"@/components/layout/glass-card\";\r\nimport type { LightControlProps } from \"./widget-types\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function LightControlWidget({\r\n  title = \"Light Control\",\r\n  value = 75,\r\n  size = \"md\",\r\n  className,\r\n}: LightControlProps & { className?: string }) {\r\n  const pct = Math.min(100, Math.max(0, value ?? 0));\r\n  return (\r\n    <GlassCard\r\n      className={cn(\r\n        \"p-4\",\r\n        size === \"lg\" && \"p-5\",\r\n        size === \"sm\" && \"p-3\",\r\n        className\r\n      )}\r\n    >\r\n      <h3 className=\"text-card-title font-medium mb-3\">{title}</h3>\r\n      <div className=\"flex items-center gap-4\">\r\n        <input\r\n          type=\"range\"\r\n          min={0}\r\n          max={100}\r\n          value={pct}\r\n          readOnly\r\n          className=\"flex-1 h-2 rounded-full appearance-none bg-gray-200 dark:bg-white/10 accent-accent-yellow dark:accent-accent-green\"\r\n          style={{\r\n            background: `linear-gradient(to right, var(--tw-gradient-from), var(--tw-gradient-to))`,\r\n          }}\r\n        />\r\n        <span className=\"text-lg font-bold text-accent-yellow dark:text-accent-green w-12 text-right\">\r\n          {pct}%\r\n        </span>\r\n      </div>\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMO,SAAS,mBAAmB,EACjC,QAAQ,eAAe,EACvB,QAAQ,EAAE,EACV,OAAO,IAAI,EACX,SAAS,EACkC;IAC3C,MAAM,MAAM,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,SAAS;IAC/C,qBACE,8OAAC,0JAAS;QACR,WAAW,IAAA,yHAAE,EACX,OACA,SAAS,QAAQ,OACjB,SAAS,QAAQ,OACjB;;0BAGF,8OAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAClD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,KAAK;wBACL,KAAK;wBACL,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,OAAO;4BACL,YAAY,CAAC,yEAAyE,CAAC;wBACzF;;;;;;kCAEF,8OAAC;wBAAK,WAAU;;4BACb;4BAAI;;;;;;;;;;;;;;;;;;;AAKf","debugId":null}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/widgets/wifi-widget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { GlassCard } from \"@/components/layout/glass-card\";\r\nimport type { WifiProps } from \"./widget-types\";\r\nimport { Wifi } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function WifiWidget({\r\n  title = \"Wi-Fi\",\r\n  value = \"on\",\r\n  size = \"md\",\r\n  className,\r\n}: WifiProps & { className?: string }) {\r\n  const on = value === \"on\";\r\n  return (\r\n    <GlassCard\r\n      className={cn(\r\n        \"p-4 flex items-center justify-between\",\r\n        size === \"lg\" && \"p-5\",\r\n        size === \"sm\" && \"p-3\",\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Wifi\r\n          className={cn(\r\n            \"h-6 w-6 text-accent-orange\",\r\n            !on && \"opacity-50 text-gray-400\"\r\n          )}\r\n        />\r\n        <h3 className=\"text-card-title font-medium\">{title}</h3>\r\n      </div>\r\n      <button\r\n        type=\"button\"\r\n        role=\"switch\"\r\n        aria-checked={on}\r\n        className={cn(\r\n          \"relative inline-flex h-6 w-11 shrink-0 rounded-full border-2 border-transparent transition-colors\",\r\n          on\r\n            ? \"bg-accent-green dark:bg-accent-green\"\r\n            : \"bg-gray-300 dark:bg-white/20\"\r\n        )}\r\n      >\r\n        <span\r\n          className={cn(\r\n            \"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition\",\r\n            on ? \"translate-x-5\" : \"translate-x-1\"\r\n          )}\r\n        />\r\n      </button>\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AALA;;;;;AAOO,SAAS,WAAW,EACzB,QAAQ,OAAO,EACf,QAAQ,IAAI,EACZ,OAAO,IAAI,EACX,SAAS,EAC0B;IACnC,MAAM,KAAK,UAAU;IACrB,qBACE,8OAAC,0JAAS;QACR,WAAW,IAAA,yHAAE,EACX,yCACA,SAAS,QAAQ,OACjB,SAAS,QAAQ,OACjB;;0BAGF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,0MAAI;wBACH,WAAW,IAAA,yHAAE,EACX,8BACA,CAAC,MAAM;;;;;;kCAGX,8OAAC;wBAAG,WAAU;kCAA+B;;;;;;;;;;;;0BAE/C,8OAAC;gBACC,MAAK;gBACL,MAAK;gBACL,gBAAc;gBACd,WAAW,IAAA,yHAAE,EACX,qGACA,KACI,yCACA;0BAGN,cAAA,8OAAC;oBACC,WAAW,IAAA,yHAAE,EACX,qGACA,KAAK,kBAAkB;;;;;;;;;;;;;;;;;AAMnC","debugId":null}},
    {"offset": {"line": 594, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/widgets/solar-charge-widget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { GlassCard } from \"@/components/layout/glass-card\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\nimport type { SolarChargeProps } from \"./widget-types\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst DEFAULT_DATA = [\r\n  { date: \"Mon\", value: 8.2 },\r\n  { date: \"Tue\", value: 10.1 },\r\n  { date: \"Wed\", value: 12.4 },\r\n  { date: \"Thu\", value: 9.8 },\r\n  { date: \"Fri\", value: 11.2 },\r\n  { date: \"Sat\", value: 14.0 },\r\n  { date: \"Sun\", value: 12.4 },\r\n];\r\n\r\nexport function SolarChargeWidget({\r\n  title = \"Solar Charge Collected Today\",\r\n  value = 12.4,\r\n  unit = \"kWh\",\r\n  data = DEFAULT_DATA,\r\n  size = \"md\",\r\n  className,\r\n}: SolarChargeProps & { className?: string }) {\r\n  return (\r\n    <GlassCard\r\n      className={cn(\r\n        \"p-4\",\r\n        size === \"lg\" && \"p-5\",\r\n        size === \"sm\" && \"p-3\",\r\n        className\r\n      )}\r\n    >\r\n      <h3 className=\"text-card-title font-medium mb-2\">{title}</h3>\r\n      <p className=\"text-2xl font-bold text-accent-orange mb-4\">\r\n        {value} {unit}\r\n      </p>\r\n      <div className=\"h-32 w-full\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <LineChart data={data} margin={{ top: 4, right: 4, bottom: 0, left: 4 }}>\r\n            <XAxis dataKey=\"date\" tick={{ fontSize: 10 }} />\r\n            <YAxis hide />\r\n            <Tooltip\r\n              contentStyle={{\r\n                borderRadius: 12,\r\n                border: \"1px solid rgba(255,255,255,0.2)\",\r\n              }}\r\n              formatter={(v: number) => [`${v} ${unit}`, \"Value\"]}\r\n            />\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"value\"\r\n              stroke=\"var(--accent-orange)\"\r\n              strokeWidth={2}\r\n              dot={{ r: 3 }}\r\n            />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAZA;;;;;AAcA,MAAM,eAAe;IACnB;QAAE,MAAM;QAAO,OAAO;IAAI;IAC1B;QAAE,MAAM;QAAO,OAAO;IAAK;IAC3B;QAAE,MAAM;QAAO,OAAO;IAAK;IAC3B;QAAE,MAAM;QAAO,OAAO;IAAI;IAC1B;QAAE,MAAM;QAAO,OAAO;IAAK;IAC3B;QAAE,MAAM;QAAO,OAAO;IAAK;IAC3B;QAAE,MAAM;QAAO,OAAO;IAAK;CAC5B;AAEM,SAAS,kBAAkB,EAChC,QAAQ,8BAA8B,EACtC,QAAQ,IAAI,EACZ,OAAO,KAAK,EACZ,OAAO,YAAY,EACnB,OAAO,IAAI,EACX,SAAS,EACiC;IAC1C,qBACE,8OAAC,0JAAS;QACR,WAAW,IAAA,yHAAE,EACX,OACA,SAAS,QAAQ,OACjB,SAAS,QAAQ,OACjB;;0BAGF,8OAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAClD,8OAAC;gBAAE,WAAU;;oBACV;oBAAM;oBAAE;;;;;;;0BAEX,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,0LAAmB;oBAAC,OAAM;oBAAO,QAAO;8BACvC,cAAA,8OAAC,kKAAS;wBAAC,MAAM;wBAAM,QAAQ;4BAAE,KAAK;4BAAG,OAAO;4BAAG,QAAQ;4BAAG,MAAM;wBAAE;;0CACpE,8OAAC,8JAAK;gCAAC,SAAQ;gCAAO,MAAM;oCAAE,UAAU;gCAAG;;;;;;0CAC3C,8OAAC,8JAAK;gCAAC,IAAI;;;;;;0CACX,8OAAC,kKAAO;gCACN,cAAc;oCACZ,cAAc;oCACd,QAAQ;gCACV;gCACA,WAAW,CAAC,IAAc;wCAAC,GAAG,EAAE,CAAC,EAAE,MAAM;wCAAE;qCAAQ;;;;;;0CAErD,8OAAC,4JAAI;gCACH,MAAK;gCACL,SAAQ;gCACR,QAAO;gCACP,aAAa;gCACb,KAAK;oCAAE,GAAG;gCAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO1B","debugId":null}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/widgets/climate-widget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { GlassCard } from \"@/components/layout/glass-card\";\r\nimport type { ClimateProps } from \"./widget-types\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function ClimateWidget({\r\n  title = \"Climate\",\r\n  value = 23,\r\n  unit = \"°\",\r\n  state: climateState = \"heat\",\r\n  size = \"md\",\r\n  className,\r\n}: ClimateProps & { className?: string }) {\r\n  return (\r\n    <GlassCard\r\n      className={cn(\r\n        \"p-4\",\r\n        size === \"lg\" && \"p-5\",\r\n        size === \"sm\" && \"p-3\",\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-2\">\r\n        <h3 className=\"text-card-title font-medium\">{title}</h3>\r\n        <button\r\n          type=\"button\"\r\n          role=\"switch\"\r\n          aria-label=\"Toggle\"\r\n          className=\"relative inline-flex h-6 w-11 shrink-0 rounded-full bg-accent-green dark:bg-accent-green border-2 border-transparent\"\r\n        />\r\n      </div>\r\n      <p className=\"text-metric font-bold text-center text-accent-orange dark:text-accent-green my-4\">\r\n        {value}\r\n        {unit}\r\n      </p>\r\n      <div className=\"flex gap-1 justify-center text-xs text-gray-500 dark:text-gray-400\">\r\n        {[\"6h\", \"12h\", \"18h\", \"24h\"].map((t) => (\r\n          <span key={t} className=\"px-2 py-1 rounded bg-white/5\">\r\n            {t}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMO,SAAS,cAAc,EAC5B,QAAQ,SAAS,EACjB,QAAQ,EAAE,EACV,OAAO,GAAG,EACV,OAAO,eAAe,MAAM,EAC5B,OAAO,IAAI,EACX,SAAS,EAC6B;IACtC,qBACE,8OAAC,0JAAS;QACR,WAAW,IAAA,yHAAE,EACX,OACA,SAAS,QAAQ,OACjB,SAAS,QAAQ,OACjB;;0BAGF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA+B;;;;;;kCAC7C,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,cAAW;wBACX,WAAU;;;;;;;;;;;;0BAGd,8OAAC;gBAAE,WAAU;;oBACV;oBACA;;;;;;;0BAEH,8OAAC;gBAAI,WAAU;0BACZ;oBAAC;oBAAM;oBAAO;oBAAO;iBAAM,CAAC,GAAG,CAAC,CAAC,kBAChC,8OAAC;wBAAa,WAAU;kCACrB;uBADQ;;;;;;;;;;;;;;;;AAOrB","debugId":null}},
    {"offset": {"line": 835, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/widgets/lighting-brightness-widget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { GlassCard } from \"@/components/layout/glass-card\";\r\nimport type { LightingBrightnessProps } from \"./widget-types\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function LightingBrightnessWidget({\r\n  title = \"Lighting Brightness\",\r\n  value = 70,\r\n  size = \"md\",\r\n  className,\r\n}: LightingBrightnessProps & { className?: string }) {\r\n  const pct = Math.min(100, Math.max(0, value ?? 0));\r\n  const rotation = -90 + (pct / 100) * 180;\r\n  return (\r\n    <GlassCard\r\n      className={cn(\r\n        \"p-4\",\r\n        size === \"lg\" && \"p-5\",\r\n        size === \"sm\" && \"p-3\",\r\n        className\r\n      )}\r\n    >\r\n      <h3 className=\"text-card-title font-medium mb-4 text-center\">{title}</h3>\r\n      <div className=\"relative w-32 h-24 mx-auto\">\r\n        <svg\r\n          viewBox=\"0 0 100 60\"\r\n          className=\"w-full h-full\"\r\n          aria-hidden\r\n        >\r\n          <path\r\n            d=\"M 10 50 A 40 40 0 0 1 90 50\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"8\"\r\n            className=\"text-gray-200 dark:text-white/10\"\r\n          />\r\n          <path\r\n            d=\"M 10 50 A 40 40 0 0 1 90 50\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"8\"\r\n            strokeLinecap=\"round\"\r\n            className=\"text-accent-yellow dark:text-accent-green\"\r\n            strokeDasharray={`${(pct / 100) * 125.6} 125.6`}\r\n          />\r\n          <line\r\n            x1=\"50\"\r\n            y1=\"50\"\r\n            x2=\"50\"\r\n            y2=\"18\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"3\"\r\n            className=\"text-accent-orange\"\r\n            transform={`rotate(${rotation} 50 50)`}\r\n          />\r\n        </svg>\r\n        <p className=\"text-center text-xl font-bold text-accent-yellow dark:text-accent-green mt-1\">\r\n          {pct}%\r\n        </p>\r\n      </div>\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMO,SAAS,yBAAyB,EACvC,QAAQ,qBAAqB,EAC7B,QAAQ,EAAE,EACV,OAAO,IAAI,EACX,SAAS,EACwC;IACjD,MAAM,MAAM,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,SAAS;IAC/C,MAAM,WAAW,CAAC,KAAK,AAAC,MAAM,MAAO;IACrC,qBACE,8OAAC,0JAAS;QACR,WAAW,IAAA,yHAAE,EACX,OACA,SAAS,QAAQ,OACjB,SAAS,QAAQ,OACjB;;0BAGF,8OAAC;gBAAG,WAAU;0BAAgD;;;;;;0BAC9D,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAQ;wBACR,WAAU;wBACV,aAAW;;0CAEX,8OAAC;gCACC,GAAE;gCACF,MAAK;gCACL,QAAO;gCACP,aAAY;gCACZ,WAAU;;;;;;0CAEZ,8OAAC;gCACC,GAAE;gCACF,MAAK;gCACL,QAAO;gCACP,aAAY;gCACZ,eAAc;gCACd,WAAU;gCACV,iBAAiB,GAAG,AAAC,MAAM,MAAO,MAAM,MAAM,CAAC;;;;;;0CAEjD,8OAAC;gCACC,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,QAAO;gCACP,aAAY;gCACZ,WAAU;gCACV,WAAW,CAAC,OAAO,EAAE,SAAS,OAAO,CAAC;;;;;;;;;;;;kCAG1C,8OAAC;wBAAE,WAAU;;4BACV;4BAAI;;;;;;;;;;;;;;;;;;;AAKf","debugId":null}},
    {"offset": {"line": 940, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 946, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/widgets/index.ts"],"sourcesContent":["export { EnergyUsageWidget } from \"./energy-usage-widget\";\r\nexport { LightControlWidget } from \"./light-control-widget\";\r\nexport { WifiWidget } from \"./wifi-widget\";\r\nexport { SolarChargeWidget } from \"./solar-charge-widget\";\r\nexport { ClimateWidget } from \"./climate-widget\";\r\nexport { LightingBrightnessWidget } from \"./lighting-brightness-widget\";\r\nexport * from \"./widget-types\";\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 965, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/stores/entity-state-store.ts"],"sourcesContent":["import { create } from \"zustand\";\r\n\r\nexport type EntityState = {\r\n  entity_id: string;\r\n  state: string;\r\n  attributes: Record<string, unknown>;\r\n};\r\n\r\ntype EntityStateStore = {\r\n  states: Record<string, EntityState>;\r\n  updatedAt: number | null;\r\n  error: string | null;\r\n  setStates: (entities: EntityState[]) => void;\r\n  setError: (error: string | null) => void;\r\n  getState: (entityId: string) => EntityState | undefined;\r\n  isOffline: () => boolean;\r\n};\r\n\r\nexport const useEntityStateStore = create<EntityStateStore>((set, get) => ({\r\n  states: {},\r\n  updatedAt: null,\r\n  error: null,\r\n  setStates: (entities) => {\r\n    const states: Record<string, EntityState> = {};\r\n    for (const e of entities) {\r\n      states[e.entity_id] = e;\r\n    }\r\n    set({ states, updatedAt: Date.now(), error: null });\r\n  },\r\n  setError: (error) => set({ error }),\r\n  getState: (entityId) => get().states[entityId],\r\n  isOffline: () => get().error != null,\r\n}));\r\n"],"names":[],"mappings":";;;;AAAA;;AAkBO,MAAM,sBAAsB,IAAA,kJAAM,EAAmB,CAAC,KAAK,MAAQ,CAAC;QACzE,QAAQ,CAAC;QACT,WAAW;QACX,OAAO;QACP,WAAW,CAAC;YACV,MAAM,SAAsC,CAAC;YAC7C,KAAK,MAAM,KAAK,SAAU;gBACxB,MAAM,CAAC,EAAE,SAAS,CAAC,GAAG;YACxB;YACA,IAAI;gBAAE;gBAAQ,WAAW,KAAK,GAAG;gBAAI,OAAO;YAAK;QACnD;QACA,UAAU,CAAC,QAAU,IAAI;gBAAE;YAAM;QACjC,UAAU,CAAC,WAAa,MAAM,MAAM,CAAC,SAAS;QAC9C,WAAW,IAAM,MAAM,KAAK,IAAI;IAClC,CAAC","debugId":null}},
    {"offset": {"line": 996, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/hooks/use-entity-state.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useEntityStateStore } from \"@/stores/entity-state-store\";\r\n\r\nconst POLL_INTERVAL_MS = 5000;\r\n\r\n/**\r\n * Poll GET /api/ha/state and update entity state store.\r\n * Call once from a provider or dashboard layout so widgets can read live state.\r\n */\r\nexport function useEntityStatePolling(connectionId?: string) {\r\n  const setStates = useEntityStateStore((s) => s.setStates);\r\n  const setError = useEntityStateStore((s) => s.setError);\r\n  const intervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\r\n\r\n  useEffect(() => {\r\n    const url = connectionId\r\n      ? `/api/ha/state?connectionId=${encodeURIComponent(connectionId)}`\r\n      : \"/api/ha/state\";\r\n\r\n    function poll() {\r\n      fetch(url)\r\n        .then((res) => {\r\n          if (!res.ok) throw new Error(\"Fetch failed\");\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (Array.isArray(data)) setStates(data);\r\n        })\r\n        .catch(() => setError(\"No connection\"));\r\n    }\r\n\r\n    poll();\r\n    intervalRef.current = setInterval(poll, POLL_INTERVAL_MS);\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [connectionId, setStates, setError]);\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKA,MAAM,mBAAmB;AAMlB,SAAS,sBAAsB,YAAqB;IACzD,MAAM,YAAY,IAAA,gKAAmB,EAAC,CAAC,IAAM,EAAE,SAAS;IACxD,MAAM,WAAW,IAAA,gKAAmB,EAAC,CAAC,IAAM,EAAE,QAAQ;IACtD,MAAM,cAAc,IAAA,+MAAM,EAAwC;IAElE,IAAA,kNAAS,EAAC;QACR,MAAM,MAAM,eACR,CAAC,2BAA2B,EAAE,mBAAmB,eAAe,GAChE;QAEJ,SAAS;YACP,MAAM,KACH,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,OAAO,IAAI,IAAI;YACjB,GACC,IAAI,CAAC,CAAC;gBACL,IAAI,MAAM,OAAO,CAAC,OAAO,UAAU;YACrC,GACC,KAAK,CAAC,IAAM,SAAS;QAC1B;QAEA;QACA,YAAY,OAAO,GAAG,YAAY,MAAM;QACxC,OAAO;YACL,IAAI,YAAY,OAAO,EAAE,cAAc,YAAY,OAAO;QAC5D;IACF,GAAG;QAAC;QAAc;QAAW;KAAS;AACxC","debugId":null}},
    {"offset": {"line": 1035, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/components/offline-pill.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEntityStateStore } from \"@/stores/entity-state-store\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype OfflinePillProps = {\r\n  className?: string;\r\n};\r\n\r\nexport function OfflinePill({ className }: OfflinePillProps) {\r\n  const isOffline = useEntityStateStore((s) => s.error != null);\r\n  if (!isOffline) return null;\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"inline-flex items-center rounded-full bg-red-500/90 px-2.5 py-0.5 text-xs font-medium text-white\",\r\n        className\r\n      )}\r\n    >\r\n      Offline\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASO,SAAS,YAAY,EAAE,SAAS,EAAoB;IACzD,MAAM,YAAY,IAAA,gKAAmB,EAAC,CAAC,IAAM,EAAE,KAAK,IAAI;IACxD,IAAI,CAAC,WAAW,OAAO;IACvB,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,oGACA;kBAEH;;;;;;AAIL","debugId":null}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/app/dashboards/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { AppShell } from \"@/components/layout/app-shell\";\r\nimport { HeroSection } from \"@/components/layout/hero-section\";\r\nimport { useState, useEffect } from \"react\";\r\nimport ReactGridLayout from \"react-grid-layout\";\r\nimport \"react-grid-layout/css/styles.css\";\r\nimport \"react-resizable/css/styles.css\";\r\n\r\ntype LayoutItem = ReactGridLayout.Layout;\r\ntype Layout = LayoutItem[];\r\nimport {\r\n  EnergyUsageWidget,\r\n  LightControlWidget,\r\n  WifiWidget,\r\n  SolarChargeWidget,\r\n  ClimateWidget,\r\n  LightingBrightnessWidget,\r\n} from \"@/components/widgets\";\r\nimport type { WidgetConfig } from \"@/stores/onboarding-store\";\r\nimport { useEntityStateStore } from \"@/stores/entity-state-store\";\r\nimport { useEntityStatePolling } from \"@/hooks/use-entity-state\";\r\nimport { OfflinePill } from \"@/components/offline-pill\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype DashboardData = {\r\n  id: string;\r\n  name: string;\r\n  theme: string;\r\n  layout: string | null;\r\n  widgets: string | null;\r\n  background: string | null;\r\n};\r\n\r\nfunction parseLayout(layout: string | null): Layout {\r\n  if (!layout) return [];\r\n  try {\r\n    const arr = JSON.parse(layout) as LayoutItem[];\r\n    return Array.isArray(arr) ? arr : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction parseWidgets(widgets: string | null): WidgetConfig[] {\r\n  if (!widgets) return [];\r\n  try {\r\n    const arr = JSON.parse(widgets) as WidgetConfig[];\r\n    return Array.isArray(arr) ? arr : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction WidgetByType({\r\n  type,\r\n  title,\r\n  entity_id,\r\n  size,\r\n}: {\r\n  type: string;\r\n  title: string;\r\n  entity_id: string;\r\n  size?: string;\r\n}) {\r\n  const sizeProp = (size as \"sm\" | \"md\" | \"lg\") ?? \"md\";\r\n  const live = useEntityStateStore((s) => s.getState(entity_id));\r\n  const num = live?.state != null ? Number(live.state) : undefined;\r\n  const onOff = live?.state === \"on\" ? \"on\" : \"off\";\r\n\r\n  switch (type) {\r\n    case \"energy_usage\":\r\n      return <EnergyUsageWidget title={title} entity_id={entity_id} size={sizeProp} value={num} />;\r\n    case \"light_control\":\r\n      return <LightControlWidget title={title} entity_id={entity_id} size={sizeProp} value={num} />;\r\n    case \"wifi\":\r\n      return <WifiWidget title={title} entity_id={entity_id} size={sizeProp} value={onOff} />;\r\n    case \"solar_charge\":\r\n      return <SolarChargeWidget title={title} entity_id={entity_id} size={sizeProp} value={num} />;\r\n    case \"climate\":\r\n      return <ClimateWidget title={title} entity_id={entity_id} size={sizeProp} value={num} />;\r\n    case \"lighting_brightness\":\r\n      return <LightingBrightnessWidget title={title} entity_id={entity_id} size={sizeProp} value={num} />;\r\n    default:\r\n      return (\r\n        <div className=\"rounded-card border border-dashed p-4 text-sm text-gray-500\">\r\n          {title || type}\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default function DashboardEditPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const id = params?.id as string;\r\n  const [editMode, setEditMode] = useState(true);\r\n  const [layout, setLayout] = useState<Layout>([]);\r\n  const [widgets, setWidgets] = useState<WidgetConfig[]>([]);\r\n  const [initialized, setInitialized] = useState(false);\r\n  const [uploadingBg, setUploadingBg] = useState(false);\r\n\r\n  const { data, isLoading, error } = useQuery<DashboardData>({\r\n    queryKey: [\"dashboard\", id],\r\n    queryFn: async () => {\r\n      const res = await fetch(`/api/dashboards/${id}`);\r\n      if (!res.ok) throw new Error(\"Failed to load\");\r\n      return res.json();\r\n    },\r\n    enabled: !!id,\r\n  });\r\n\r\n  useEntityStatePolling();\r\n\r\n  useEffect(() => {\r\n    if (!data || initialized) return;\r\n    const w = parseWidgets(data.widgets);\r\n    setWidgets(w);\r\n    const parsed = parseLayout(data.layout);\r\n    if (parsed.length > 0) {\r\n      setLayout(parsed);\r\n    } else if (w.length > 0) {\r\n      setLayout(\r\n        w.map((widget, i) => ({\r\n          i: widget.id,\r\n          x: (i % 3) * 4,\r\n          y: Math.floor(i / 3) * 2,\r\n          w: 4,\r\n          h: 2,\r\n        }))\r\n      );\r\n    }\r\n    setInitialized(true);\r\n  }, [data, initialized]);\r\n\r\n  const saveMutation = useMutation({\r\n    mutationFn: async (payload: { layout: Layout; widgets: WidgetConfig[] }) => {\r\n      const res = await fetch(`/api/dashboards/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          layout: JSON.stringify(payload.layout),\r\n          widgets: JSON.stringify(payload.widgets),\r\n        }),\r\n      });\r\n      if (!res.ok) throw new Error(\"Save failed\");\r\n      return res.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"dashboard\", id] });\r\n    },\r\n  });\r\n\r\n  const onLayoutChange = (newLayout: Layout) => {\r\n    setLayout(newLayout);\r\n  };\r\n\r\n  const layoutMap = new Map(layout.map((item) => [item.i, item]));\r\n\r\n  const handleSave = () => {\r\n    saveMutation.mutate({ layout, widgets });\r\n  };\r\n\r\n  const handleBackgroundUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file || !id) return;\r\n    setUploadingBg(true);\r\n    e.target.value = \"\";\r\n    try {\r\n      const formData = new FormData();\r\n      formData.set(\"file\", file);\r\n      const res = await fetch(\"/api/upload\", { method: \"POST\", body: formData });\r\n      const json = await res.json();\r\n      if (!res.ok) throw new Error(json.error || \"Upload mislukt\");\r\n      await fetch(`/api/dashboards/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ background: json.url }),\r\n      });\r\n      queryClient.invalidateQueries({ queryKey: [\"dashboard\", id] });\r\n    } catch {\r\n      // show error in UI if you add a toast\r\n    } finally {\r\n      setUploadingBg(false);\r\n    }\r\n  };\r\n\r\n  const removeBackground = async () => {\r\n    if (!id) return;\r\n    try {\r\n      await fetch(`/api/dashboards/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ background: null }),\r\n      });\r\n      queryClient.invalidateQueries({ queryKey: [\"dashboard\", id] });\r\n    } finally {\r\n      setUploadingBg(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteDashboard = async () => {\r\n    if (!id || !data?.name) return;\r\n    if (!confirm(`Dashboard \"${data.name}\" definitief verwijderen?`)) return;\r\n    const res = await fetch(`/api/dashboards/${id}`, { method: \"DELETE\" });\r\n    if (!res.ok) return;\r\n    queryClient.invalidateQueries({ queryKey: [\"dashboards\"] });\r\n    router.push(\"/dashboards\");\r\n  };\r\n\r\n  const bgImage =\r\n    data?.background ||\r\n    (typeof document !== \"undefined\" && document.documentElement.classList.contains(\"dark\")\r\n      ? \"dark\"\r\n      : \"light\");\r\n\r\n  if (!id) {\r\n    return (\r\n      <AppShell activeTab=\"/dashboards\">\r\n        <p className=\"text-sm text-gray-500\">Invalid dashboard id.</p>\r\n      </AppShell>\r\n    );\r\n  }\r\n\r\n  if (isLoading || error) {\r\n    return (\r\n      <AppShell activeTab=\"/dashboards\">\r\n        <p className=\"text-sm text-gray-500\">\r\n          {error ? \"Failed to load dashboard.\" : \"Loading…\"}\r\n        </p>\r\n      </AppShell>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AppShell activeTab=\"/dashboards\">\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex items-center justify-between gap-4\">\r\n          <h2 className=\"text-xl font-semibold flex items-center gap-2\">\r\n            {data?.name ?? \"Dashboard\"}\r\n            <OfflinePill />\r\n          </h2>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setEditMode((e) => !e)}\r\n              className={cn(\r\n                \"rounded-full px-3 py-1.5 text-sm font-medium\",\r\n                editMode\r\n                  ? \"bg-accent-yellow dark:bg-accent-green text-gray-900\"\r\n                  : \"bg-gray-200 dark:bg-white/10\"\r\n              )}\r\n            >\r\n              {editMode ? \"Edit\" : \"Preview\"}\r\n            </button>\r\n            {editMode && (\r\n              <>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleSave}\r\n                  disabled={saveMutation.isPending}\r\n                  className=\"rounded-full bg-accent-purple dark:bg-accent-green px-4 py-2 text-sm font-medium text-white dark:text-gray-900\"\r\n                >\r\n                  Save\r\n                </button>\r\n                <label className=\"rounded-full bg-gray-200 dark:bg-white/10 px-4 py-2 text-sm font-medium cursor-pointer hover:bg-gray-300 dark:hover:bg-white/20\">\r\n                  {uploadingBg ? \"Bezig…\" : \"Hero-achtergrond uploaden\"}\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/jpeg,image/png,image/webp,image/gif\"\r\n                    className=\"sr-only\"\r\n                    onChange={handleBackgroundUpload}\r\n                    disabled={uploadingBg}\r\n                  />\r\n                </label>\r\n                {data?.background && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={removeBackground}\r\n                    className=\"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\r\n                  >\r\n                    Achtergrond verwijderen\r\n                  </button>\r\n                )}\r\n              </>\r\n            )}\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleDeleteDashboard}\r\n              className=\"text-sm text-red-500 hover:text-red-600 dark:text-red-400\"\r\n            >\r\n              Dashboard verwijderen\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <HeroSection\r\n          title={data?.name ?? \"Dashboard\"}\r\n          subtitle=\"Your Home Assistant dashboard\"\r\n          backgroundImage={bgImage}\r\n        />\r\n\r\n        <div className=\"rounded-card overflow-hidden\">\r\n          <ReactGridLayout\r\n            className=\"layout\"\r\n            layout={layout}\r\n            onLayoutChange={onLayoutChange}\r\n            cols={12}\r\n            rowHeight={80}\r\n            width={1200}\r\n            isDraggable={editMode}\r\n            isResizable={editMode}\r\n            draggableHandle={editMode ? undefined : \".no-drag\"}\r\n          >\r\n            {widgets.map((w) => {\r\n              const item = layoutMap.get(w.id);\r\n              if (!item) return null;\r\n              return (\r\n                <div key={w.id} className={cn(editMode && \"no-drag\")}>\r\n                  <WidgetByType\r\n                    type={w.type}\r\n                    title={w.title}\r\n                    entity_id={w.entity_id}\r\n                    size={w.size}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </ReactGridLayout>\r\n        </div>\r\n      </div>\r\n    </AppShell>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}