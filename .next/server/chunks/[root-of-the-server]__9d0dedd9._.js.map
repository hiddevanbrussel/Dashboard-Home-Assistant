{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HiddevanBrussel/.cursor/dashboard/src/app/api/upload/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { writeFile, mkdir } from \"node:fs/promises\";\r\nimport path from \"node:path\";\r\n\r\nconst UPLOAD_DIR = path.join(process.cwd(), \"public\", \"uploads\");\r\nconst ALLOWED_TYPES = [\"image/jpeg\", \"image/png\", \"image/webp\", \"image/gif\"];\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const formData = await request.formData();\r\n    const file = formData.get(\"file\");\r\n    if (!file || !(file instanceof File)) {\r\n      return NextResponse.json(\r\n        { error: \"No file selected.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n    if (!ALLOWED_TYPES.includes(file.type)) {\r\n      return NextResponse.json(\r\n        { error: \"Only images (JPEG, PNG, WebP, GIF) are allowed.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n    const ext = path.extname(file.name) || \".jpg\";\r\n    const name = `${Date.now()}-${Math.random().toString(36).slice(2, 9)}${ext}`;\r\n    await mkdir(UPLOAD_DIR, { recursive: true });\r\n    const filePath = path.join(UPLOAD_DIR, name);\r\n    const bytes = await file.arrayBuffer();\r\n    await writeFile(filePath, Buffer.from(bytes));\r\n    const url = `/uploads/${name}`;\r\n    return NextResponse.json({ url });\r\n  } catch (err) {\r\n    return NextResponse.json(\r\n      { error: err instanceof Error ? err.message : \"Upload failed.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,aAAa,4HAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;AACtD,MAAM,gBAAgB;IAAC;IAAc;IAAa;IAAc;CAAY;AAErE,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAC1B,IAAI,CAAC,QAAQ,CAAC,CAAC,gBAAgB,IAAI,GAAG;YACpC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QACA,IAAI,CAAC,cAAc,QAAQ,CAAC,KAAK,IAAI,GAAG;YACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkD,GAC3D;gBAAE,QAAQ;YAAI;QAElB;QACA,MAAM,MAAM,4HAAI,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK;QACvC,MAAM,OAAO,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,KAAK,KAAK;QAC5E,MAAM,IAAA,8IAAK,EAAC,YAAY;YAAE,WAAW;QAAK;QAC1C,MAAM,WAAW,4HAAI,CAAC,IAAI,CAAC,YAAY;QACvC,MAAM,QAAQ,MAAM,KAAK,WAAW;QACpC,MAAM,IAAA,kJAAS,EAAC,UAAU,OAAO,IAAI,CAAC;QACtC,MAAM,MAAM,CAAC,SAAS,EAAE,MAAM;QAC9B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAI;IACjC,EAAE,OAAO,KAAK;QACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;QAAiB,GAC/D;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}