"use strict";exports.id=965,exports.ids=[965],exports.modules={46965:(a,b,c)=>{c.d(b,{fetchAreasViaWebSocket:()=>d});async function d(a,b){let d=new(await c.e(503).then(c.bind(c,81503))).default(a.trim().replace(/\/+$/,"").replace(/^http/,"ws")+"/api/websocket");return new Promise((a,c)=>{let e=setTimeout(()=>{d.close(),c(Error("WebSocket timeout"))},15e3);d.on("message",f=>{let g;try{g=JSON.parse(f.toString())}catch{return}if("auth_required"===g.type)return void d.send(JSON.stringify({type:"auth",access_token:b}));if("auth_ok"===g.type)return void d.send(JSON.stringify({id:1,type:"config/area_registry/list"}));if("auth_invalid"===g.type){clearTimeout(e),d.close(),c(Error(g.message??"WebSocket auth failed"));return}if("result"===g.type&&1===g.id){clearTimeout(e),d.close();let b=g.result;a(Array.isArray(b)?b.map(a=>({area_id:a.area_id??"",name:a.name??""})):[])}}),d.on("error",a=>{clearTimeout(e),c(a)}),d.on("close",()=>{clearTimeout(e)})})}}};