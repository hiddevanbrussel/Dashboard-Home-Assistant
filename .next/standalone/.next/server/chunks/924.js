"use strict";exports.id=924,exports.ids=[924],exports.modules={47538:(a,b,c)=>{c.d(b,{n:()=>g});var d=c(21124),e=c(65442),f=c(44943);function g({className:a}){return(0,e.j)(a=>null!=a.error)?(0,d.jsx)("span",{className:(0,f.cn)("inline-flex items-center rounded-full bg-red-500/90 px-2.5 py-0.5 text-xs font-medium text-white",a),children:"Offline"}):null}},68523:(a,b,c)=>{c.d(b,{j:()=>f});var d=c(21124),e=c(44943);function f({children:a,className:b,as:c="div"}){return(0,d.jsx)(c,{className:(0,e.cn)("glass-card rounded-card border border-white/60 p-4 dark:border-white/10","transition-shadow duration-150 hover:shadow-lg dark:hover:shadow-glass-dark",b),children:a})}},70927:(a,b,c)=>{c.d(b,{Ev:()=>as,S4:()=>av,uU:()=>w,vA:()=>aB,uK:()=>g,c_:()=>bm,IF:()=>a3,e_:()=>a4,j$:()=>aC,NH:()=>L,LG:()=>A,le:()=>bc,Gp:()=>a1,_l:()=>a8,$e:()=>aY,oW:()=>az,M1:()=>bi,b5:()=>a6,kC:()=>aQ,h9:()=>aM,e0:()=>J,lu:()=>K,oz:()=>l,MW:()=>x,$F:()=>y.$,Hm:()=>bb,Kq:()=>a7,gO:()=>aT,z4:()=>aU,qc:()=>aV,CY:()=>as,j1:()=>aW,y:()=>ay,gu:()=>v,wU:()=>bh,Pm:()=>a5,ZN:()=>as,Oo:()=>aO,Fy:()=>aL,Y$:()=>n});var d=c(21124),e=c(68523),f=c(44943);function g({title:a="Energy Usage",value:b=65,label:c="Medium",size:g="md",className:h}){let i=Math.min(100,Math.max(0,b??0));return(0,d.jsxs)(e.j,{className:(0,f.cn)("p-4","lg"===g&&"p-5","sm"===g&&"p-3",h),children:[(0,d.jsx)("h3",{className:"text-card-title font-medium mb-2",children:a}),(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2",children:[(0,d.jsxs)("span",{className:"text-2xl font-bold text-accent-yellow dark:text-accent-green",children:[i,"%"]}),(0,d.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:c})]}),(0,d.jsx)("div",{className:"h-3 w-full rounded-full bg-gray-200 dark:bg-white/10 overflow-hidden",children:(0,d.jsx)("div",{className:(0,f.cn)("h-full rounded-full transition-all duration-300","bg-gradient-to-r from-accent-yellow to-accent-green dark:from-accent-green dark:to-accent-yellow"),style:{width:`${i}%`}})})]})}var h=c(38301),i=c(23312),j=c(31506),k=c(65442);function l({title:a="Light",entity_id:b,state:c="off",size:e="md",className:g}){let l="on"===c,[m,n]=(0,h.useState)(!1),[o,p]=(0,h.useState)(!1),[q,r]=(0,h.useState)(0),s=(0,k.j)(a=>a.setStates),t=(0,k.j)(a=>a.getState(b)),u=Math.round((t?.attributes?.brightness??0)/255*100),v=o?q:u,w=(0,h.useCallback)(async()=>{let a=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(a)&&s(a)},[s]);async function x(a,c){n(!0);try{let d=await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:b,domain:"light",service:a,service_data:c})});if(d.ok)await w();else{let a=await d.json().catch(()=>({}));console.error("Light service failed:",a.error)}}finally{n(!1)}}function y(){p(!0)}async function z(a){a.preventDefault(),a.stopPropagation(),await x("toggle")}async function A(){await x(l?"turn_off":"turn_on",l?void 0:{brightness_pct:u||100})}let B=(0,h.useRef)(null);function C(a){r(a),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{x("turn_on",{brightness_pct:a}),B.current=null},120)}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{role:"button",tabIndex:0,onClick:y,onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),y())},className:(0,f.cn)("flex w-full items-start gap-3 rounded-2xl text-left transition-all duration-300 ease-out focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#4D2FB2] cursor-pointer",l?"bg-white shadow-sm dark:bg-white":"bg-white/60 dark:bg-white/10 backdrop-blur-md","sm"===e&&"p-3","md"===e&&"p-4","lg"===e&&"p-5",g),"aria-label":`Open ${a} controls`,children:[(0,d.jsx)("button",{type:"button",onClick:z,disabled:m,className:(0,f.cn)("flex shrink-0 items-center justify-center rounded-full transition-all duration-300 ease-out focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#4D2FB2] disabled:opacity-70",l?"":"bg-white/50 dark:bg-white/10 backdrop-blur-md","sm"===e&&"h-9 w-9","md"===e&&"h-10 w-10","lg"===e&&"h-11 w-11"),style:l?{backgroundColor:"#FFD41D"}:void 0,"aria-label":l?`Turn off ${a}`:`Turn on ${a}`,"aria-pressed":l,children:(0,d.jsx)(j.A,{className:(0,f.cn)({sm:"h-5 w-5",md:"h-6 w-6",lg:"h-7 w-7"}[e],"transition-colors duration-300 ease-out",l?"text-white":"text-[#FFD41D]"),strokeWidth:1.5,fill:l?"currentColor":"none"})}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("p",{className:(0,f.cn)("font-semibold truncate",l?"text-gray-900":"text-gray-900 dark:text-white","sm"===e&&"text-sm","md"===e&&"text-base","lg"===e&&"text-lg"),children:a}),(0,d.jsx)("p",{className:(0,f.cn)("font-medium","sm"===e&&"text-xs","md"===e&&"text-sm","lg"===e&&"text-base",l?"text-gray-700":"text-gray-500 dark:text-gray-400"),children:l?"On":"Off"})]})]}),o&&"undefined"!=typeof document&&(0,i.createPortal)((0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/20 dark:bg-black/30 backdrop-blur-md transition-opacity duration-200 ease-out","aria-hidden":!0,onClick:()=>p(!1)}),(0,d.jsxs)("div",{className:"relative z-50 w-full max-w-sm rounded-2xl border-0 bg-gray-800 p-6 shadow-xl dark:bg-gray-900 transition-transform duration-300 ease-out",children:[(0,d.jsxs)("div",{className:"text-center mb-1",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white truncate",children:a}),(0,d.jsxs)("p",{className:"text-sm text-white/80 mt-0.5",children:[v,"%"]})]}),(0,d.jsx)("div",{className:"flex flex-col items-center gap-4 mt-6",children:(0,d.jsx)("div",{className:"flex flex-col items-center gap-2 touch-none select-none",children:(0,d.jsxs)("div",{className:"relative w-24 h-56 flex flex-col items-center",style:{touchAction:"none"},children:[(0,d.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-16 h-52 rounded-full bg-gray-600 flex flex-col justify-end overflow-hidden pointer-events-none",children:(0,d.jsx)("div",{className:"w-full rounded-full bg-white min-h-0 shrink-0 will-change-[height]",style:{height:`${v}%`,transition:"height 0.2s ease-out"}})}),(0,d.jsx)("input",{type:"range",min:0,max:100,value:v,onInput:a=>C(Number(a.target.value)),onChange:a=>C(Number(a.target.value)),disabled:m,className:"absolute top-0 left-1/2 w-52 h-24 -translate-x-1/2 -rotate-90 origin-center opacity-0 cursor-ns-resize disabled:cursor-not-allowed",style:{pointerEvents:"auto"}}),(0,d.jsx)("button",{type:"button",onClick:A,disabled:m,className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex h-10 w-10 items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 rounded-full disabled:opacity-60 transition-opacity duration-300 ease-out","aria-label":l?"Turn off":"Turn on",children:(0,d.jsx)(j.A,{className:"h-6 w-6 text-[#FFD41D] transition-opacity duration-300 ease-out",strokeWidth:1.5,fill:"currentColor"})})]})})})]})]}),document.body)]})}var m=c(58620);function n({title:a="Wi-Fi",value:b="on",size:c="md",className:g}){let h="on"===b;return(0,d.jsxs)(e.j,{className:(0,f.cn)("p-4 flex items-center justify-between","lg"===c&&"p-5","sm"===c&&"p-3",g),children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(m.A,{className:(0,f.cn)("h-6 w-6 text-accent-orange dark:text-accent-green",!h&&"opacity-50 text-gray-400 dark:text-gray-500")}),(0,d.jsx)("h3",{className:"text-card-title font-medium",children:a})]}),(0,d.jsx)("button",{type:"button",role:"switch","aria-checked":h,className:(0,f.cn)("relative inline-flex h-6 w-11 shrink-0 rounded-full border-2 border-transparent transition-colors",h?"bg-accent-green dark:bg-accent-green":"bg-gray-300 dark:bg-white/20"),children:(0,d.jsx)("span",{className:(0,f.cn)("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition",h?"translate-x-5":"translate-x-1")})})]})}var o=c(6077),p=c(42950),q=c(59296),r=c(16803),s=c(11767),t=c(83043);let u=[{date:"Mon",value:8.2},{date:"Tue",value:10.1},{date:"Wed",value:12.4},{date:"Thu",value:9.8},{date:"Fri",value:11.2},{date:"Sat",value:14},{date:"Sun",value:12.4}];function v({title:a="Solar Charge Collected Today",value:b=12.4,unit:c="kWh",data:g=u,size:h="md",className:i}){return(0,d.jsxs)(e.j,{className:(0,f.cn)("p-4","lg"===h&&"p-5","sm"===h&&"p-3",i),children:[(0,d.jsx)("h3",{className:"text-card-title font-medium mb-2",children:a}),(0,d.jsxs)("p",{className:"text-2xl font-bold text-accent-orange dark:text-accent-green mb-4",children:[b," ",c]}),(0,d.jsx)("div",{className:"h-32 w-full",children:(0,d.jsx)(o.u,{width:"100%",height:"100%",children:(0,d.jsxs)(p.b,{data:g,margin:{top:4,right:4,bottom:0,left:4},children:[(0,d.jsx)(q.W,{dataKey:"date",tick:{fontSize:10}}),(0,d.jsx)(r.h,{hide:!0}),(0,d.jsx)(s.m,{contentStyle:{borderRadius:12,border:"1px solid rgba(255,255,255,0.2)"},formatter:a=>[`${a} ${c}`,"Value"]}),(0,d.jsx)(t.N,{type:"monotone",dataKey:"value",stroke:"var(--accent-orange)",strokeWidth:2,dot:{r:3}})]})})})]})}function w({title:a="Climate",value:b=23,unit:c="\xb0",state:g="heat",size:h="md",className:i}){return(0,d.jsxs)(e.j,{className:(0,f.cn)("p-4","lg"===h&&"p-5","sm"===h&&"p-3",i),children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,d.jsx)("h3",{className:"text-card-title font-medium",children:a}),(0,d.jsx)("button",{type:"button",role:"switch","aria-checked":!1,"aria-label":"Toggle",className:"relative inline-flex h-6 w-11 shrink-0 rounded-full bg-accent-green dark:bg-accent-green border-2 border-transparent"})]}),(0,d.jsxs)("p",{className:"text-metric font-bold text-center text-accent-orange dark:text-accent-green my-4",children:[b,c]}),(0,d.jsx)("div",{className:"flex gap-1 justify-center text-xs text-gray-500 dark:text-gray-400",children:["6h","12h","18h","24h"].map(a=>(0,d.jsx)("span",{className:"px-2 py-1 rounded bg-white/5",children:a},a))})]})}function x({title:a="Lighting Brightness",value:b=70,size:c="md",className:g}){let h=Math.min(100,Math.max(0,b??0)),i=-90+h/100*180;return(0,d.jsxs)(e.j,{className:(0,f.cn)("p-4","lg"===c&&"p-5","sm"===c&&"p-3",g),children:[(0,d.jsx)("h3",{className:"text-card-title font-medium mb-4 text-center",children:a}),(0,d.jsxs)("div",{className:"relative w-32 h-24 mx-auto",children:[(0,d.jsxs)("svg",{viewBox:"0 0 100 60",className:"w-full h-full","aria-hidden":!0,children:[(0,d.jsx)("path",{d:"M 10 50 A 40 40 0 0 1 90 50",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-gray-200 dark:text-white/10"}),(0,d.jsx)("path",{d:"M 10 50 A 40 40 0 0 1 90 50",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeLinecap:"round",className:"text-accent-yellow dark:text-accent-green",strokeDasharray:`${h/100*125.6} 125.6`}),(0,d.jsx)("line",{x1:"50",y1:"50",x2:"50",y2:"18",stroke:"currentColor",strokeWidth:"3",className:"text-accent-orange",transform:`rotate(${i} 50 50)`})]}),(0,d.jsxs)("p",{className:"text-center text-xl font-bold text-accent-yellow dark:text-accent-green mt-1",children:[h,"%"]})]})]})}var y=c(82707);function z(a,b){let c=16*Math.round(a.left/16),d=16*Math.round(a.bottom/16);if(null!=b){let a=b.minLeft??0,e=b.minBottom??0;c=Math.max(a,Math.min(c,b.maxLeft)),d=Math.max(e,Math.min(d,b.maxBottom))}return{left:c,bottom:d}}function A({title:a,entity_id:b,editMode:c=!1,onRemove:e,onEdit:g,onEnterEditMode:i}){let[j,k]=(0,h.useState)(()=>({left:0,bottom:0})),[l,m]=(0,h.useState)(!1),[n,o]=(0,h.useState)(!1),p=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let q=(0,h.useRef)(null),r=(0,h.useCallback)(()=>{null!=q.current&&(clearTimeout(q.current),q.current=null)},[]),s=(0,h.useCallback)(a=>{!c&&i&&(r(),a.currentTarget.setPointerCapture?.(a.pointerId),q.current=setTimeout(()=>{q.current=null,i()},500))},[c,i,r]),t=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),r()},[r]),u=(0,h.useCallback)(a=>{c&&(a.target.closest?.("button")||(a.preventDefault(),m(!0),p.current={x:a.clientX,y:a.clientY,left:j.left,bottom:j.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[j,c]),v=(0,h.useCallback)(a=>{if(!l)return;let b=a.clientX-p.current.x,c=a.clientY-p.current.y;k(z({left:Math.max(0,Math.min(p.current.left+b,400)),bottom:Math.max(0,Math.min(p.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[l]),w=(0,h.useCallback)(a=>{if(l){m(!1);let b=a.clientX-p.current.x,c=a.clientY-p.current.y;k(z({left:Math.max(0,Math.min(p.current.left+b,400)),bottom:Math.max(0,Math.min(p.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[l]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed w-[320px] shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",n?"z-50":"z-40",c&&"cursor-grab touch-none active:cursor-grabbing",c&&!l&&"animate-edit-wiggle"),style:{left:j.left,bottom:j.bottom,...!c&&i?{touchAction:"none"}:{}},...!c&&i&&{onPointerDown:s,onPointerUp:t,onPointerLeave:t,onPointerCancel:t},...c&&{onPointerDown:u,onPointerMove:v,onPointerUp:w,onPointerLeave:a=>{l&&w(a)},onPointerCancel:w},children:(0,d.jsx)("div",{className:(0,f.cn)(c&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(y.$,{title:a,entity_id:b,size:"md",onMoreClick:c?g:void 0,onExpandedChange:o})})})}var B=c(28463),C=c(44121),D=c(62561),E=c(3796),F=c(94729),G=c(15520),H=c(34941);let I={lightbulb:j.A,spotlight:B.A,lamp:B.A,"lamp-ceiling":C.A,"lamp-desk":D.A,"lamp-floor":E.A,"lamp-wall-down":F.A,"lamp-wall-up":G.A},J=["lightbulb","spotlight","lamp","lamp-ceiling","lamp-desk","lamp-floor","lamp-wall-down","lamp-wall-up"];function K({title:a="Lamp",entity_id:b,icon:c="lightbulb",size:e="md",className:g,onMoreClick:l}){let m=(0,k.j)(a=>a.getState(b)),n=(0,k.j)(a=>a.setStates),o=(0,k.j)(a=>a.updateEntityState),[p,q]=(0,h.useState)(!1),[r,s]=(0,h.useState)(!1),[t,u]=(0,h.useState)(100),v=(0,h.useRef)(null),[w,x]=(0,h.useState)(null),y=(0,h.useRef)(null),z=m?.state==="on",A=w??+!!z,B=Math.round((m?.attributes?.brightness??255)/255*100),C=(1&(m?.attributes?.supported_features??0))!=0,D=(0,h.useCallback)(async()=>{let a=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(a)&&n(a)},[n]);async function E(a,c){q(!0);try{(await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:b,domain:"light",service:a,service_data:c})})).ok&&await D()}finally{q(!1)}}function F(){let a=!z;o(b,{state:a?"on":"off"}),E(a?"turn_on":"turn_off",a?{brightness_pct:B||100}:void 0)}function G(a){u(a),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{E("turn_on",{brightness_pct:a}),v.current=null},80)}let J=I[c]??j.A,K=z?C?`${B}%`:"Aan":"Uit";return(0,d.jsxs)("div",{className:(0,f.cn)("flex w-full flex-col overflow-hidden rounded-2xl transition-colors duration-200","sm"===e&&"text-sm","md"===e&&"text-base","lg"===e&&"text-lg",z?"text-gray-900":"text-gray-800 dark:text-gray-200 opacity-95",g),children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 px-4 py-3",children:[(0,d.jsx)("button",{type:"button",onClick:F,disabled:p,className:"flex shrink-0 items-center justify-center rounded-full transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400 focus-visible:ring-offset-2 disabled:opacity-70 h-10 w-10","aria-label":z?"Lamp uitzetten":"Lamp aanzetten",children:(0,d.jsx)("div",{className:(0,f.cn)("flex h-10 w-10 items-center justify-center rounded-full transition-all duration-200",z?"bg-[#FFD41D] shadow-sm":"bg-white/30 dark:bg-white/10 shadow-inner"),"aria-hidden":!0,children:(0,d.jsx)(J,{className:(0,f.cn)("h-5 w-5 shrink-0 transition-colors",z?"text-white drop-shadow":"text-gray-500 dark:text-gray-400"),strokeWidth:1.5,fill:z?"currentColor":"none","aria-hidden":!0})})}),(0,d.jsx)("button",{type:"button",onClick:()=>s(!0),className:"flex flex-1 min-w-0 items-center gap-2 text-left rounded-xl cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400 focus-visible:ring-offset-2 hover:bg-black/5 dark:hover:bg-white/5 active:bg-black/10 dark:active:bg-white/10 -mx-1 px-1 py-0.5 transition-colors","aria-label":"Verlichting bedienen",children:(0,d.jsxs)("div",{className:"min-w-0 flex-1 flex flex-col justify-center",children:[(0,d.jsx)("p",{className:"font-medium truncate text-inherit",children:a}),(0,d.jsx)("p",{className:(0,f.cn)("text-xs truncate",z?"text-gray-600":"text-gray-500 dark:text-gray-400"),children:K})]})}),l&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),l()},className:"p-1.5 rounded-lg shrink-0 text-inherit opacity-70 hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/5 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})})]}),r&&"undefined"!=typeof document&&(0,i.createPortal)((0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,d.jsx)("button",{type:"button",className:"absolute inset-0 z-[100] bg-black/40 dark:bg-black/50 backdrop-blur-md cursor-pointer","aria-label":"Modal sluiten",onClick:()=>s(!1)}),(0,d.jsx)("div",{className:(0,f.cn)("relative z-[101] w-full max-w-sm p-5 flex flex-col items-center text-center",z&&C?"min-h-[420px]":"min-h-[380px]"),onClick:a=>a.stopPropagation(),children:z&&C?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:a}),(0,d.jsxs)("p",{className:"text-sm text-gray-300 mb-6",children:[t,"%"]}),(0,d.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,d.jsxs)("div",{className:"relative flex flex-col items-center w-20 h-64",children:[(0,d.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-16 h-64 rounded-2xl bg-gray-700/80 dark:bg-gray-800/80 flex flex-col justify-end overflow-hidden",children:(0,d.jsx)("div",{className:"w-full rounded-b-2xl bg-[#FFD41D] min-h-0 transition-[height] duration-150 ease-out",style:{height:`${t}%`}})}),(0,d.jsx)("input",{type:"range",min:0,max:100,value:t,onChange:a=>G(Number(a.target.value)),onInput:a=>G(Number(a.target.value)),disabled:p,className:"absolute top-1/2 left-1/2 w-64 h-20 -translate-x-1/2 -translate-y-1/2 cursor-ns-resize opacity-0 [&::-webkit-slider-thumb]:cursor-ns-resize",style:{transform:"translate(-50%, -50%) rotate(-90deg)"},"aria-label":"Helderheid"}),(0,d.jsx)("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 pointer-events-none flex items-center justify-center w-10 h-10 rounded-full bg-amber-400/40",children:(0,d.jsx)(J,{className:"h-5 w-5 text-white drop-shadow",strokeWidth:1.5,fill:"currentColor","aria-hidden":!0})})]})})]}):C?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:a}),(0,d.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:z?"Aan":"Uit"}),(0,d.jsxs)("div",{className:"flex gap-3 w-full max-w-xs mx-auto",children:[(0,d.jsx)("button",{type:"button",onClick:()=>{z||F(),s(!1)},disabled:p,className:(0,f.cn)("flex-1 rounded-xl py-3 px-4 text-sm font-medium transition-colors",z?"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300":"bg-[#FFD41D] text-gray-900 hover:opacity-90"),children:"Aan"}),(0,d.jsx)("button",{type:"button",onClick:()=>{z&&F(),s(!1)},disabled:p,className:(0,f.cn)("flex-1 rounded-xl py-3 px-4 text-sm font-medium transition-colors",z?"bg-gray-800 text-white dark:bg-gray-600 dark:text-white hover:opacity-90":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"),children:"Uit"})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:a}),(0,d.jsx)("p",{className:"text-sm text-gray-300 mb-6",children:z?"Aan":"Uit"}),(0,d.jsx)("div",{className:"flex flex-col items-center rounded-3xl bg-gradient-to-br from-gray-600/60 to-gray-700/80 dark:from-gray-800/70 dark:to-gray-900/90 pt-3 pb-4 w-[100px]",style:{height:228},children:(0,d.jsxs)("div",{className:"relative w-[100px] flex flex-col justify-end select-none shrink-0",style:{height:200,paddingBottom:72,touchAction:"none"},onPointerDown:a=>{p||(a.preventDefault(),a.currentTarget.setPointerCapture?.(a.pointerId),y.current={y:a.clientY,position:A},x(A))},onPointerMove:a=>{if(null==y.current)return;a.preventDefault();let b=y.current.y-a.clientY;x(Math.max(0,Math.min(1,y.current.position+b/72)))},onPointerUp:a=>{if(a.currentTarget.releasePointerCapture?.(a.pointerId),null!=y.current){if(Math.abs(A-y.current.position)>.15){let a=A>.5;a!==z&&(o(b,{state:a?"on":"off"}),E(a?"turn_on":"turn_off",a?{brightness_pct:100}:void 0))}else F();y.current=null,x(null)}},onPointerCancel:a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),y.current=null,x(null)},children:[(0,d.jsx)("div",{className:"absolute left-0 right-0 bottom-0 flex items-center justify-center pointer-events-none",style:{height:72},"aria-hidden":!0}),(0,d.jsx)("button",{type:"button",disabled:p,className:(0,f.cn)("absolute left-1/2 -translate-x-1/2 w-20 h-[131px] rounded-xl flex items-center justify-center shadow-lg select-none touch-none","transition-colors duration-200 disabled:opacity-70",A>.5?"bg-[#FFD41D]":"bg-gray-600/80 dark:bg-gray-700/80"),style:{bottom:72,transform:`translate(-50%, ${(1-A)*72}px)`,transition:null!=w?"none":"transform 0.15s ease-out"},"aria-label":A>.5?"Lamp uitzetten":"Lamp aanzetten",children:(0,d.jsx)(J,{className:(0,f.cn)("h-9 w-9 shrink-0 transition-colors",A>.5?"text-white drop-shadow":"text-white/70"),strokeWidth:1.5,fill:A>.5?"currentColor":"none","aria-hidden":!0})})]})})]})})]}),document.body),z&&C&&(0,d.jsxs)("div",{className:"px-4 pb-3 pt-0 flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-600 shrink-0 w-10",children:"Helderheid"}),(0,d.jsx)("input",{type:"range",min:0,max:100,value:t,onChange:a=>G(Number(a.target.value)),disabled:p,className:"flex-1 h-2 rounded-full appearance-none bg-gray-200 dark:bg-gray-300 accent-amber-500 disabled:opacity-50","aria-label":"Helderheid"}),(0,d.jsxs)("span",{className:"text-xs tabular-nums text-gray-600 dark:text-gray-700 w-8",children:[t,"%"]})]})]})}function L({widget:a,widgetIndex:b=0,editMode:c=!1,onRemove:e,onEdit:g,onEnterEditMode:i}){let j=(0,k.j)(b=>b.getState(a.entity_id)),l=j?.state==="on",[m,n]=(0,h.useState)(()=>(a.id,{left:0,bottom:24})),[o,p]=(0,h.useState)(!1),q=(0,h.useRef)({x:0,y:0,left:0,bottom:0}),r=(0,h.useRef)(!1);(0,h.useRef)(!1);let s=(0,h.useRef)(null),t=(0,h.useCallback)(()=>{null!=s.current&&(clearTimeout(s.current),s.current=null)},[]),u=(0,h.useCallback)(a=>{if(c||!i)return;let b=a.target;b?.closest?.("button")||(t(),a.currentTarget.setPointerCapture?.(a.pointerId),s.current=setTimeout(()=>{s.current=null,i()},500))},[c,i,t]),v=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),t()},[t]),w=(0,h.useCallback)(a=>{c&&(r.current=!0,q.current={x:a.clientX,y:a.clientY,left:m.left,bottom:m.bottom},a.currentTarget.setPointerCapture?.(a.pointerId))},[m,c]),x=(0,h.useCallback)(a=>{if(!r.current)return;if(!o){let b=a.clientX-q.current.x,c=a.clientY-q.current.y;if(!(Math.abs(b)>6||Math.abs(c)>6))return;a.preventDefault(),p(!0)}let b=a.clientX-q.current.x,c=a.clientY-q.current.y;n(z({left:Math.max(0,Math.min(q.current.left+b,400)),bottom:Math.max(0,Math.min(q.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[o,400]),y=(0,h.useCallback)(b=>{if(r.current=!1,o){b.preventDefault(),p(!1);let c=b.clientX-q.current.x,d=b.clientY-q.current.y;n(z({left:Math.max(0,Math.min(q.current.left+c,400)),bottom:Math.max(0,Math.min(q.current.bottom-d,400))},{maxLeft:400,maxBottom:400})),a.id}b.currentTarget.releasePointerCapture?.(b.pointerId)},[o,400,a.id]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden backdrop-blur-2xl border flex transition-colors duration-200",l?"bg-white/25 dark:bg-black/60 border-white/30 dark:border-white/15":"bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10",c&&"cursor-grab touch-none active:cursor-grabbing",c&&!o&&"animate-edit-wiggle"),style:{left:m.left,bottom:m.bottom,width:240,...!c&&i?{touchAction:"none"}:{}},...!c&&i&&{onPointerDown:u,onPointerUp:v,onPointerLeave:v,onPointerCancel:v},...c&&{onPointerDown:w,onPointerMove:x,onPointerUp:y,onPointerLeave:a=>{r.current=!1,o&&y(a)},onPointerCancel:y},children:(0,d.jsx)("div",{className:"shrink-0 flex flex-col",style:{width:240},children:(0,d.jsx)("div",{className:(0,f.cn)(c&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(K,{title:a.title,entity_id:a.entity_id,icon:a.icon,size:"md",onMoreClick:g})})})})}var M=c(85265),N=c(4386),O=c(5360),P=c(43787),Q=c(86653),R=c(46486),S=c(51881),T=c(8849),U=c(85351),V=c(18004),W=c(66284),X=c(13574),Y=c(55056),Z=c(54684),$=c(45334),_=c(30087),aa=c(90133),ab=c(25795),ac=c(76754),ad=c(3368),ae=c(205),af=c(17238),ag=c(81499),ah=c(78733),ai=c(49705),aj=c(91138),ak=c(75234),al=c(30733),am=c(70175),an=c(9036),ao=c(40284),ap=c(93442),aq=c(46422);let ar={Activity:V.A,Bath:W.A,BedDouble:X.A,Bot:Y.A,Box:Z.A,Building2:$.A,Car:_.A,Circle:aa.A,CircleDot:ab.A,DoorOpen:ac.A,Droplets:R.A,Eye:ad.A,Fuel:ae.A,Gauge:af.A,GaugeCircle:ag.A,Home:ah.A,Lamp:B.A,Lightbulb:j.A,Shirt:ai.A,Sofa:aj.A,Sparkles:ak.A,Star:al.A,Sun:am.A,Thermometer:M.A,TreePine:an.A,Trash2:ao.A,UtensilsCrossed:ap.A,Wind:P.A,Zap:aq.A},as=Object.keys(ar).sort(),at=[{mode:"auto",label:"Auto",icon:M.A},{mode:"heat",label:"Verwarmen",icon:N.A},{mode:"off",label:"Uit",icon:O.A},{mode:"fan_only",label:"Wind",icon:P.A},{mode:"cool",label:"Koelen",icon:Q.A}],au={idle:"Idle",heating:"Verwarmen…",cooling:"Koelen…",off:"Uit",heat:"Verwarmen",cool:"Koelen",auto:"Auto",dry:"Droog",fan_only:"Ventilator",unknown:"—"};function av({title:a="Air Conditioner",entity_id:b,humidity_entity_id:c,icon:e,size:g="md",className:j,onMoreClick:l}){let m=e&&ar[e]?ar[e]:M.A,n=(0,k.j)(a=>a.getState(b)),o=(0,k.j)(a=>c?a.getState(c):null),p=(0,k.j)(a=>a.setStates),[q,r]=(0,h.useState)(!1),[s,t]=(0,h.useState)(!1),u=(0,h.useRef)(null),[v,w]=(0,h.useState)(null),x=Number(n?.attributes?.current_temperature)||void 0,y=Number(n?.attributes?.temperature)??Number(n?.attributes?.target_temp_high)??void 0,z=Number(n?.attributes?.min_temp)||5,A=Number(n?.attributes?.max_temp)||35,B=n?.attributes?.hvac_modes??[],C=n?.state??"",D=n?.attributes?.hvac_mode??({heating:"heat",cooling:"cool",heat:"heat",cool:"cool",off:"off",auto:"auto",idle:"auto",dry:"dry",fan_only:"fan_only"})[C]??C,E=D&&B.includes(D)?D:B[0]??null,F="off"===C||!C,G=y??x??20,I=(0,h.useCallback)(async a=>{let c=Math.min(A,Math.max(z,Math.round(2*a)/2));r(!0);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:b,domain:"climate",service:"set_temperature",service_data:{temperature:c}})})).ok){let a=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(a)&&p(a)}}finally{r(!1)}},[b,A,z,p]);async function J(a){r(!0);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:b,domain:"climate",service:"set_hvac_mode",service_data:{hvac_mode:a}})})).ok){let a=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(a)&&p(a)}}finally{r(!1)}}async function K(a){r(!0);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:b,domain:"climate",service:a?"turn_on":"turn_off"})})).ok){let a=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(a)&&p(a)}}finally{r(!1)}}let L=at.filter(a=>B.includes(a.mode));if(L.length<B.length){let a=new Set(L.map(a=>a.mode));L.push(...B.filter(b=>!a.has(b)).map(a=>({mode:a,label:au[a]??(0,f.N)(a),icon:M.A})))}let N=n?.attributes?.friendly_name??b,O=n?.attributes?.humidity!=null?Number(n.attributes.humidity):void 0,P=(o?.state!=null&&"unavailable"!==o.state?Number(o.state):void 0)??O,Q=null!=P&&!Number.isNaN(P);return(0,d.jsxs)("div",{className:(0,f.cn)("flex w-full flex-col overflow-hidden rounded-2xl bg-white/15 dark:bg-black/50 text-gray-900 dark:text-white shadow-xl backdrop-blur-2xl border border-white/30 dark:border-white/10","sm"===g&&"text-sm","md"===g&&"text-base","lg"===g&&"text-lg",j),children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 py-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,d.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/20 dark:bg-white/10",children:(0,d.jsx)(m,{className:"h-5 w-5 text-amber-600 dark:text-amber-400","aria-hidden":!0})}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("p",{className:"font-medium truncate text-gray-900 dark:text-white/90",children:a}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-white/60 truncate",children:N})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[Q&&(0,d.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-white/90",title:"Luchtvochtigheid",children:[(0,d.jsx)(R.A,{className:"h-4 w-4","aria-hidden":!0}),(0,d.jsxs)("span",{className:"text-sm tabular-nums",children:[Math.round(P),"%"]})]}),l&&(0,d.jsx)("button",{type:"button",onClick:l,className:"p-1.5 rounded-lg text-gray-500 hover:bg-white/20 dark:text-gray-400 dark:hover:bg-white/10","aria-label":"More options",children:(0,d.jsx)(H.A,{className:"h-5 w-5"})})]})]}),(0,d.jsxs)("div",{className:"px-4 py-3 flex items-center justify-center gap-4",children:[(0,d.jsx)("button",{type:"button",onClick:()=>I(G-.5),disabled:q||F||G<=z,className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-gray-200/60 dark:bg-white/10 text-gray-700 dark:text-white hover:bg-gray-300/60 dark:hover:bg-white/20 disabled:opacity-40 disabled:pointer-events-none transition-colors","aria-label":"Temperatuur verlagen",children:(0,d.jsx)(S.A,{className:"h-6 w-6"})}),(0,d.jsx)("p",{className:"text-5xl font-bold tabular-nums text-gray-900 dark:text-white min-w-[4.5rem] text-center",children:function(a){if(null==a||Number.isNaN(a))return"—";let b=Math.round(2*a)/2;return b%1==.5?`${b}\xb0`:`${Math.round(b)}\xb0`}(G)}),(0,d.jsx)("button",{type:"button",onClick:()=>I(G+.5),disabled:q||F||G>=A,className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-gray-200/60 dark:bg-white/10 text-gray-700 dark:text-white hover:bg-gray-300/60 dark:hover:bg-white/20 disabled:opacity-40 disabled:pointer-events-none transition-colors","aria-label":"Temperatuur verhogen",children:(0,d.jsx)(T.A,{className:"h-6 w-6"})})]}),L.length>0&&(()=>{let a=F?"off":E,b=L.find(b=>b.mode===a)??L[0],c=L.filter(b=>b.mode!==a),e=at.find(a=>"off"===a.mode),g="off"===a?c:[...c,...e&&!c.some(a=>"off"===a.mode)?[e]:[]],h=g.length>0;return(0,d.jsxs)("div",{className:"px-4 pb-4 pt-1 relative",children:[(0,d.jsx)("button",{ref:u,type:"button",onClick:()=>t(a=>!a),disabled:q||!h,"aria-expanded":s,"aria-haspopup":"listbox",className:(0,f.cn)("w-full flex items-center justify-center gap-2 rounded-xl py-2.5 px-3 text-sm font-medium transition-colors disabled:opacity-50","bg-gray-200/60 dark:bg-white/10 text-gray-800 dark:text-white hover:bg-gray-300/60 dark:hover:bg-white/20"),children:(()=>{let a=b.icon;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a,{className:"h-4 w-4 shrink-0","aria-hidden":!0}),(0,d.jsx)("span",{className:"truncate",children:b.label}),(0,d.jsx)(U.A,{className:(0,f.cn)("h-4 w-4 shrink-0 transition-transform",s&&"rotate-180"),"aria-hidden":!0})]})})()}),s&&h&&v&&"undefined"!=typeof document&&(0,i.createPortal)((0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-[100]","aria-hidden":!0,onClick:()=>t(!1)}),(0,d.jsx)("ul",{role:"listbox",className:"fixed z-[101] rounded-xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/50 dark:backdrop-blur-xl shadow-lg py-1 max-h-48 overflow-auto",style:{top:v.top,left:v.left,width:v.width},children:g.map(({mode:a,label:b,icon:c})=>(0,d.jsx)("li",{role:"option","aria-selected":a===(F?"off":E),children:(0,d.jsxs)("button",{type:"button",onClick:()=>{"off"===a?K(!1):J(a),t(!1)},disabled:q,className:"w-full flex items-center gap-2 rounded-lg py-2 px-3 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors disabled:opacity-50",children:[(0,d.jsx)(c,{className:"h-4 w-4 shrink-0","aria-hidden":!0}),b]})},a))})]}),document.body)]})})()]})}function aw(a,b){if(null==a||Number.isNaN(a))return"—";let c=Math.round(10*a)/10;return b?`${c} ${b}`:String(c)}function ax(a){let b=(0,k.j)(b=>b.getState(a)),c=b?.state,d=null!=c&&"unavailable"!==c&&"unknown"!==c?Number(c):void 0;return{value:d,unit:b?.attributes?.unit_of_measurement??"W",friendlyName:b?.attributes?.friendly_name??a}}function ay({title:a="Zonnepanelen",entity_id:b,consumption_entity_id:c,size:e="md",className:g,onMoreClick:h}){let i=ax(b),j=ax(c??"");return(0,d.jsxs)("div",{className:(0,f.cn)("flex w-full flex-col overflow-hidden rounded-2xl bg-white/10 dark:bg-black/50 text-white shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10","sm"===e&&"text-sm","md"===e&&"text-base","lg"===e&&"text-lg",g),children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3",children:[(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("p",{className:"font-medium truncate text-white/90",children:a}),(0,d.jsx)("p",{className:"text-xs text-white/60 truncate",children:i.friendlyName})]}),h&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),h()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})})]}),(0,d.jsxs)("div",{className:"px-4 pb-4 pt-0 space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-white/60 mb-0.5",children:"Yield"}),(0,d.jsx)("p",{className:"text-xl font-bold tabular-nums text-amber-400/95",children:aw(i.value,i.unit)})]}),c&&(0,d.jsxs)("div",{className:"pt-2 border-t border-white/10",children:[(0,d.jsx)("p",{className:"text-xs text-white/60 mb-0.5",children:"Consumption"}),(0,d.jsx)("p",{className:"text-xl font-bold tabular-nums text-white/95",children:aw(j.value,j.unit)})]})]})]})}function az({title:a,entity_id:b,consumption_entity_id:c,editMode:e=!1,onRemove:g,onEdit:i,onEnterEditMode:j}){let[k,l]=(0,h.useState)(()=>({left:0,bottom:0})),[m,n]=(0,h.useState)(!1),o=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let p=(0,h.useRef)(null),q=(0,h.useCallback)(()=>{null!=p.current&&(clearTimeout(p.current),p.current=null)},[]),r=(0,h.useCallback)(a=>{!e&&j&&(q(),a.currentTarget.setPointerCapture?.(a.pointerId),p.current=setTimeout(()=>{p.current=null,j()},500))},[e,j,q]),s=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),q()},[q]),t=(0,h.useCallback)(a=>{e&&(a.target.closest?.("button")||(a.preventDefault(),n(!0),o.current={x:a.clientX,y:a.clientY,left:k.left,bottom:k.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[k,e]),u=(0,h.useCallback)(a=>{if(!m)return;let b=a.clientX-o.current.x,c=a.clientY-o.current.y;l(z({left:Math.max(0,Math.min(o.current.left+b,400)),bottom:Math.max(0,Math.min(o.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[m]),v=(0,h.useCallback)(a=>{if(m){n(!1);let b=a.clientX-o.current.x,c=a.clientY-o.current.y;l(z({left:Math.max(0,Math.min(o.current.left+b,400)),bottom:Math.max(0,Math.min(o.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[m]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 w-[320px] shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",e&&"cursor-grab touch-none active:cursor-grabbing",e&&!m&&"animate-edit-wiggle"),style:{left:k.left,bottom:k.bottom,...!e&&j?{touchAction:"none"}:{}},...!e&&j&&{onPointerDown:r,onPointerUp:s,onPointerLeave:s,onPointerCancel:s},...e&&{onPointerDown:t,onPointerMove:u,onPointerUp:v,onPointerLeave:a=>{m&&v(a)},onPointerCancel:v},children:(0,d.jsx)("div",{className:(0,f.cn)(e&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(ay,{title:a,entity_id:b,consumption_entity_id:c,size:"md",onMoreClick:e?i:void 0})})})}var aA=c(17944);function aB({title:a="Afbeeldingskaart",entity_id:b,background_image:c,background_image_dark:e,image_conditions:g,minimal:h=!1,size:i="md",className:j,onMoreClick:l}){let{resolved:m}=(0,aA.C)(),n="dark"===m,o=(0,k.j)(a=>b?a.states[b]:void 0);(0,k.j)(a=>a.updatedAt);let p=o?.state,q=b&&g?.length?function(a,b){if(null==a||"unavailable"===a||"unknown"===a||!b?.length)return null;let c=Number(a),d=!Number.isNaN(c);for(let e of b){let b=e.value.trim();if(!b||!e.image?.trim())continue;let f=Number(b),g=""!==b&&!Number.isNaN(f);if(d&&g)switch(e.operator){case"gt":if(c>f)return e;break;case"gte":if(c>=f)return e;break;case"lt":if(c<f)return e;break;case"lte":if(c<=f)return e;break;case"eq":if(c===f)return e;break;case"neq":if(c!==f)return e}else{let h=String(a).toLowerCase(),i=b.toLowerCase();switch(e.operator){case"eq":if(h===i)return e;break;case"neq":if(h!==i)return e;break;case"contains":if(h.includes(i)||i.includes(h))return e;break;case"gt":case"gte":case"lt":case"lte":if(d&&g&&("gt"===e.operator&&c>f||"gte"===e.operator&&c>=f||"lt"===e.operator&&c<f||"lte"===e.operator&&c<=f))return e}}}return null}(p,g):null,r=(q?n&&q.image_dark?q.image_dark:q.image:null)??(n&&e?e:c);return(0,d.jsxs)("div",{className:(0,f.cn)("relative flex w-full min-h-[200px] flex-col overflow-hidden rounded-2xl text-white",!h&&"shadow-xl border border-white/20 dark:border-white/10","sm"===i&&"text-sm","md"===i&&"text-base","lg"===i&&"text-lg",j),children:[r?(0,d.jsx)("div",{className:(0,f.cn)("absolute inset-0 rounded-2xl overflow-hidden flex items-center justify-center",!h&&"bg-slate-900"),children:(0,d.jsx)("img",{src:r,alt:"",className:"w-full h-full object-contain object-center"})}):!h&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 rounded-2xl","aria-hidden":!0}),!h&&(0,d.jsx)("div",{className:"absolute inset-0 bg-black/30 dark:bg-black/40 rounded-2xl"}),(0,d.jsx)("div",{className:"relative flex flex-col z-10 flex-1 min-h-0",children:h?l?(0,d.jsx)("div",{className:"absolute right-2 top-2 z-20",children:(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),l()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})})}):null:(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-shrink-0 px-4 pt-3 pb-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-amber-500/30 text-amber-400",children:(0,d.jsx)(am.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,d.jsx)("p",{className:"font-semibold text-white/95",children:a})]}),l&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),l()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})})]})})]})}function aC({title:a,entity_id:b,background_image:c,background_image_dark:e,image_conditions:g,minimal:i=!1,scale:j,editMode:k=!1,onRemove:l,onEdit:m,onEnterEditMode:n}){let[o,p]=(0,h.useState)({width:360,height:260}),q=Math.min(1.5,Math.max(.5,j??1)),r=Math.round(o.width*q),s=Math.round(o.height*q),[t,u]=(0,h.useState)(()=>({left:0,bottom:0})),[v,w]=(0,h.useState)(!1),x=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let y=(0,h.useRef)(null),A=(0,h.useCallback)(()=>{null!=y.current&&(clearTimeout(y.current),y.current=null)},[]),B=(0,h.useCallback)(a=>{!k&&n&&(A(),a.currentTarget.setPointerCapture?.(a.pointerId),y.current=setTimeout(()=>{y.current=null,n()},500))},[k,n,A]),C=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),A()},[A]),D=(0,h.useCallback)(a=>{k&&(a.target.closest?.("button")||(a.preventDefault(),w(!0),x.current={x:a.clientX,y:a.clientY,left:t.left,bottom:t.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[t,k]),E=(0,h.useCallback)(a=>{if(!v)return;let b=a.clientX-x.current.x,c=a.clientY-x.current.y;u(z({left:x.current.left+b,bottom:x.current.bottom-c}))},[v]),F=(0,h.useCallback)(a=>{if(v){w(!1);let b=a.clientX-x.current.x,c=a.clientY-x.current.y;u(z({left:x.current.left+b,bottom:x.current.bottom-c}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[v]);return(0,d.jsxs)("div",{className:(0,f.cn)("fixed z-20 rounded-2xl",i?"bg-transparent overflow-visible":"overflow-hidden shadow-xl bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",k&&"cursor-grab touch-none active:cursor-grabbing",k&&!v&&"animate-edit-wiggle"),style:{left:t.left,bottom:t.bottom,width:r,height:s,...!k&&n?{touchAction:"none"}:{}},...!k&&n&&{onPointerDown:B,onPointerUp:C,onPointerLeave:C,onPointerCancel:C},...k&&{onPointerDown:D,onPointerMove:E,onPointerUp:F,onPointerLeave:a=>{v&&F(a)},onPointerCancel:F},children:[k&&m&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),m()},className:"absolute right-2 bottom-2 z-50 p-1.5 rounded-lg shrink-0 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,d.jsx)("div",{className:(0,f.cn)("flex flex-col h-full min-h-0 overflow-hidden rounded-2xl",k&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(aB,{title:a,entity_id:b,background_image:c,background_image_dark:e,image_conditions:g,minimal:i,size:"md",onMoreClick:void 0,className:"flex-1 min-h-0"})})]})}var aD=c(24515),aE=c(60988),aF=c(32665),aG=c(49111),aH=c(20862),aI=c(37447),aJ=c(84220);function aK({state:a,className:b}){let c=a?.toLowerCase()??"",e=(0,f.cn)("shrink-0",b??"h-8 w-8");return"sunny"===c||"clear"===c||"zonnig"===c?(0,d.jsx)(am.A,{className:e,"aria-hidden":!0}):"clear-night"===c?(0,d.jsx)(aE.A,{className:e,"aria-hidden":!0}):"fog"===c||"mist"===c?(0,d.jsx)(aF.A,{className:e,"aria-hidden":!0}):"rainy"===c||"pouring"===c||"hail"===c?(0,d.jsx)(aG.A,{className:e,"aria-hidden":!0}):"snowy"===c||"snowy-rainy"===c?(0,d.jsx)(aH.A,{className:e,"aria-hidden":!0}):"lightning"===c||"lightning-rainy"===c?(0,d.jsx)(aI.A,{className:e,"aria-hidden":!0}):"windy"===c||"windy-variant"===c?(0,d.jsx)(P.A,{className:e,"aria-hidden":!0}):("cloudy"===c,(0,d.jsx)(aJ.A,{className:e,"aria-hidden":!0}))}function aL({title:a="Weather",entity_id:b,size:c="md",show_icon:e=!0,className:g,onMoreClick:i}){let j=(0,k.j)(a=>a.getState(b)),{resolved:l}=(0,aA.C)(),m=j?.state??"",n=j?.attributes?.temperature!=null?Number(j.attributes.temperature):void 0,o=j?.attributes?.humidity!=null?Number(j.attributes.humidity):void 0,p="dark"===l,q=function(a){switch(a?.toLowerCase()??""){case"sunny":case"clear":case"zonnig":return"from-amber-300/50 via-yellow-200/30 to-sky-300/40";case"clear-night":return"from-indigo-950/70 via-slate-900/60 to-indigo-950/80";case"cloudy":case"partlycloudy":case"exceptional":return"from-slate-400/40 via-slate-300/30 to-slate-500/40";case"rainy":case"pouring":case"hail":return"from-slate-500/50 via-sky-700/40 to-slate-600/50";case"snowy":case"snowy-rainy":return"from-sky-200/40 via-white/30 to-slate-300/40";case"fog":case"mist":return"from-slate-400/35 to-slate-500/40";case"lightning":case"lightning-rainy":return"from-slate-800/60 via-slate-900/50 to-slate-950/70";case"windy":case"windy-variant":return"from-slate-300/35 via-sky-400/30 to-slate-400/35";default:return"from-sky-400/35 via-sky-500/30 to-sky-600/40"}}(m),r=function(a){switch(a?.toLowerCase()??""){case"fog":case"mist":return"/weather-fog";case"sunny":case"clear":case"zonnig":return"/weather-sunny";case"clear-night":return"/weather-clear-night";case"rainy":case"pouring":case"hail":return"/weather-rainy";case"cloudy":case"partlycloudy":case"exceptional":return"/weather-partlycloudy";case"snowy":case"snowy-rainy":return"/weather-snowy";case"lightning":case"lightning-rainy":return"/weather-lightning";case"windy":case"windy-variant":return"/weather-windy";default:return null}}(m),s=r?`${r}${p?"-night":""}.png`:null,t=r&&p?`${r}.png`:null,[u,v]=(0,h.useState)(!1),w=u&&t?t:s,x=j?.attributes?.friendly_name??b;return(0,d.jsxs)("div",{className:(0,f.cn)("relative flex w-full h-full min-h-[125px] flex-col overflow-hidden rounded-2xl text-white shadow-xl border border-white/20 dark:border-white/10","sm"===c&&"text-sm","md"===c&&"text-base","lg"===c&&"text-lg",g),children:[(0,d.jsx)("div",{className:(0,f.cn)("absolute inset-0 bg-gradient-to-b rounded-2xl",q)}),w&&(0,d.jsx)("div",{className:"absolute inset-0 rounded-2xl overflow-hidden",children:(0,d.jsx)(aD.default,{src:w,alt:"",fill:!0,sizes:"(max-width: 500px) 500px, 500px",className:"object-cover object-center",onError:t?()=>v(!0):void 0})}),(0,d.jsx)("div",{className:"absolute inset-0 bg-black/25 dark:bg-black/50 rounded-2xl"}),(0,d.jsxs)("div",{className:"relative flex flex-col z-10 h-full min-h-0",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 py-3 flex-shrink-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e&&(0,d.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/20 text-white drop-shadow-sm",children:(0,d.jsx)(aK,{state:m,className:"h-5 w-5"})}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("p",{className:"font-medium truncate text-white/90 drop-shadow-sm",children:a}),(0,d.jsx)("p",{className:"text-xs text-white/60 truncate drop-shadow-sm",children:x})]})]}),null!=o&&!Number.isNaN(o)&&(0,d.jsxs)("div",{className:"flex items-center gap-1.5 text-white/90 drop-shadow-sm shrink-0",children:[(0,d.jsx)(R.A,{className:"h-4 w-4","aria-hidden":!0}),(0,d.jsxs)("span",{children:[Math.round(o),"%"]})]}),i&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),i()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 drop-shadow-sm transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})})]}),(0,d.jsx)("div",{className:"flex-1 min-h-0"}),(0,d.jsx)("div",{className:"px-4 pb-4 pt-2 flex-shrink-0",children:(0,d.jsx)("p",{className:(0,f.cn)("font-bold tabular-nums text-white drop-shadow-md","sm"===c&&"text-4xl","md"===c&&"text-5xl","lg"===c&&"text-6xl"),children:null==n||Number.isNaN(n)?"—":`${Math.round(n)}\xb0`})})]})]})}function aM({title:a,entity_id:b,show_icon:c=!0,width:e,height:g,editMode:i=!1,onRemove:j,onEdit:k,onEnterEditMode:l}){let m=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(500,Math.max(200,Math.round(b))):320}(e),n=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(400,Math.max(100,Math.round(b))):180}(g),[o,p]=(0,h.useState)(()=>({left:0,bottom:0})),[q,r]=(0,h.useState)(!1),s=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let t=(0,h.useRef)(null),u=(0,h.useCallback)(()=>{null!=t.current&&(clearTimeout(t.current),t.current=null)},[]),v=(0,h.useCallback)(a=>{!i&&l&&(u(),a.currentTarget.setPointerCapture?.(a.pointerId),t.current=setTimeout(()=>{t.current=null,l()},500))},[i,l,u]),w=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),u()},[u]),x=(0,h.useCallback)(a=>{i&&(a.target.closest?.("button")||(a.preventDefault(),r(!0),s.current={x:a.clientX,y:a.clientY,left:o.left,bottom:o.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[o,i]),y=(0,h.useCallback)(a=>{if(!q)return;let b=a.clientX-s.current.x,c=a.clientY-s.current.y;p(z({left:Math.max(0,Math.min(s.current.left+b,400)),bottom:Math.max(0,Math.min(s.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[q,400,400]),A=(0,h.useCallback)(a=>{if(q){r(!1);let b=a.clientX-s.current.x,c=a.clientY-s.current.y;p(z({left:Math.max(0,Math.min(s.current.left+b,400)),bottom:Math.max(0,Math.min(s.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[q,400,400]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl",i&&"cursor-grab touch-none active:cursor-grabbing",i&&!q&&"animate-edit-wiggle"),style:{left:o.left,bottom:o.bottom,width:m,height:n,...!i&&l?{touchAction:"none"}:{}},...!i&&l&&{onPointerDown:v,onPointerUp:w,onPointerLeave:w,onPointerCancel:w},...i&&{onPointerDown:x,onPointerMove:y,onPointerUp:A,onPointerLeave:a=>{q&&A(a)},onPointerCancel:A},children:(0,d.jsx)("div",{className:(0,f.cn)("flex flex-col h-full min-h-0",i&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(aL,{title:a,entity_id:b,show_icon:c,size:"md",onMoreClick:i?k:void 0,className:"flex-1 min-h-0"})})})}let aN={idle:"Inactief",cleaning:"Bezig met stofzuigen",docked:"In basis",returning:"Keert terug",paused:"Gepauzeerd",error:"Fout",unknown:"—"};function aO({title:a="Stofzuiger",entity_id:b,script_ids:c=[],script_names:e={},cleaned_area_entity_id:g,icon:i,size:j="md",className:l,onMoreClick:m}){let n=(0,k.j)(a=>a.getState(b)),o=(0,k.j)(a=>g?a.getState(g):null),p=(0,k.j)(a=>a.setStates),[q,r]=(0,h.useState)(null),[s,t]=(0,h.useState)(null),u=n?.state??"unknown",v=n?.attributes?.friendly_name??b,w=aN[u]??(0,f.N)(u),x=o?.state,y=o?.attributes?.unit_of_measurement??"",z=g&&null!=x&&""!==x,A=i&&ar[i]?ar[i]:ar.Bot,B="cleaning"===u||null!=s;async function C(a){r(a);try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:a,domain:"script",service:"turn_on"})})).ok){let b=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(b)&&p(b),t(a)}}finally{r(null)}}let D=null!=s;return(0,d.jsxs)("div",{className:(0,f.cn)("flex w-full flex-col overflow-hidden rounded-2xl bg-white/10 dark:bg-black/50 text-white shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10 min-h-[7.75rem]","sm"===j&&"text-sm","md"===j&&"text-base","lg"===j&&"text-lg",l),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 py-3 shrink-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,d.jsx)("div",{className:(0,f.cn)("flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/15 text-white",B&&"animate-vacuum"),children:(0,d.jsx)(A,{className:"h-5 w-5","aria-hidden":!0})}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("p",{className:"font-medium truncate text-white/90",children:a}),(0,d.jsx)("p",{className:"text-xs text-white/60 truncate",children:v})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 shrink-0 min-w-0 max-w-[45%]",children:[m&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),m()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,d.jsxs)("div",{className:"flex flex-col items-end min-w-0 flex-1",children:[(0,d.jsx)("p",{className:(0,f.cn)("text-sm font-medium truncate w-full text-right","cleaning"===u&&"text-amber-400","docked"===u&&"text-green-400","error"===u&&"text-red-400",!["cleaning","docked","error"].includes(u)&&"text-white/80"),title:w,children:w}),z&&(0,d.jsxs)("p",{className:"text-xs text-white/60 truncate w-full text-right",children:[x,y?` ${y}`:""]})]})]})]}),c.length>0&&(0,d.jsx)("div",{className:"px-4 pb-3 pt-3 border-t border-white/10",children:(0,d.jsx)("div",{className:"flex flex-wrap gap-1.5",children:c.map(a=>(0,d.jsx)(aP,{entityId:a,displayName:e?.[a],onRun:()=>C(a),loading:q===a,active:s===a,disabled:D&&s!==a},a))})})]})}function aP({entityId:a,displayName:b,onRun:c,loading:e,active:g,disabled:h}){let i=(0,k.j)(b=>b.getState(a)),j=b??i?.attributes?.friendly_name??a.replace(/^script\./,""),l="string"==typeof j?j:String(j??"");return(0,d.jsx)("button",{type:"button",onClick:c,disabled:e||h,className:(0,f.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-[11px] font-normal transition-colors",g?"border-amber-400/40 bg-amber-500/20 text-amber-200/95":"border-white/15 bg-white/5 text-white/70 hover:bg-white/10 hover:text-white/85 hover:border-white/20",(e||h)&&!g&&"opacity-50 cursor-not-allowed"),children:(0,d.jsx)("span",{className:"truncate max-w-[7rem]",children:e?"…":l})})}function aQ({title:a,entity_id:b,script_ids:c=[],script_names:e={},cleaned_area_entity_id:g,icon:i,editMode:j=!1,onRemove:k,onEdit:l,onEnterEditMode:m}){let[n,o]=(0,h.useState)(()=>({left:0,bottom:0})),[p,q]=(0,h.useState)(!1),r=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let s=(0,h.useRef)(null),t=(0,h.useCallback)(()=>{null!=s.current&&(clearTimeout(s.current),s.current=null)},[]),u=(0,h.useCallback)(a=>{!j&&m&&(t(),a.currentTarget.setPointerCapture?.(a.pointerId),s.current=setTimeout(()=>{s.current=null,m()},500))},[j,m,t]),v=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),t()},[t]),w=(0,h.useCallback)(a=>{j&&(a.target.closest?.("button")||(a.preventDefault(),q(!0),r.current={x:a.clientX,y:a.clientY,left:n.left,bottom:n.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[n,j]),x=(0,h.useCallback)(a=>{if(!p)return;let b=a.clientX-r.current.x,c=a.clientY-r.current.y;o(z({left:Math.max(0,Math.min(r.current.left+b,400)),bottom:Math.max(0,Math.min(r.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[p]),y=(0,h.useCallback)(a=>{if(p){q(!1);let b=a.clientX-r.current.x,c=a.clientY-r.current.y;o(z({left:Math.max(0,Math.min(r.current.left+b,400)),bottom:Math.max(0,Math.min(r.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[p]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 w-[320px] shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",j&&"cursor-grab touch-none active:cursor-grabbing",j&&!p&&"animate-edit-wiggle"),style:{left:n.left,bottom:n.bottom,...!j&&m?{touchAction:"none"}:{}},...!j&&m&&{onPointerDown:u,onPointerUp:v,onPointerLeave:v,onPointerCancel:v},...j&&{onPointerDown:w,onPointerMove:x,onPointerUp:y,onPointerLeave:a=>{p&&y(a)},onPointerCancel:y},children:(0,d.jsx)("div",{className:(0,f.cn)(j&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(aO,{title:a,entity_id:b,script_ids:c,script_names:e,cleaned_area_entity_id:g,icon:i,size:"md",onMoreClick:j?l:void 0})})})}var aR=c(71117);let aS={red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30",amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",green:"border-green-400/50 dark:border-green-400/40 bg-green-500/25 dark:bg-green-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",blue:"border-blue-400/50 dark:border-blue-400/40 bg-blue-500/25 dark:bg-blue-900/30",violet:"border-violet-400/50 dark:border-violet-400/40 bg-violet-500/25 dark:bg-violet-900/30",slate:"border-slate-400/50 dark:border-slate-400/40 bg-slate-500/25 dark:bg-slate-900/30"},aT=Object.keys(aS),aU=["eq","neq","gt","gte","lt","lte","contains"],aV={eq:"=",neq:"≠",gt:">",gte:"≥",lt:"<",lte:"≤",contains:"bevat"};function aW({title:a="Sensor",entity_id:b,icon:c,show_icon:e=!0,size:g="md",conditions:h,className:i,onMoreClick:j}){let l=(0,k.j)(a=>a.getState(b)),m=l?.state,n=l?.attributes?.unit_of_measurement??"",o=c&&ar[c]?ar[c]:ar.Gauge,p=function(a){if(null==a||"unavailable"===a||"unknown"===a)return"—";let b=Number(a);return Number.isNaN(b)?(0,f.N)(a):Number.isInteger(b)?String(b):String(Math.round(100*b)/100)}(m),q=function(a,b){if(null==a||"unavailable"===a||"unknown"===a||!b?.length)return null;let c=Number(a),d=!Number.isNaN(c);for(let e of b){let b=e.value.trim();if(!b)continue;let f=Number(b),g=""!==b&&!Number.isNaN(f);if(d&&g)switch(e.operator){case"gt":if(c>f)return e.color;break;case"gte":if(c>=f)return e.color;break;case"lt":if(c<f)return e.color;break;case"lte":if(c<=f)return e.color;break;case"eq":if(c===f)return e.color;break;case"neq":if(c!==f)return e.color}else{let h=String(a).toLowerCase(),i=b.toLowerCase();switch(e.operator){case"eq":if(h===i)return e.color;break;case"neq":if(h!==i)return e.color;break;case"contains":if(h.includes(i)||i.includes(h))return e.color;break;case"gt":case"gte":case"lt":case"lte":if(d&&g&&("gt"===e.operator&&c>f||"gte"===e.operator&&c>=f||"lt"===e.operator&&c<f||"lte"===e.operator&&c<=f))return e.color}}}return null}(m,h),r=q&&aS[q]?aS[q]:null;return(0,d.jsxs)("div",{className:(0,f.cn)("flex w-full flex-col overflow-hidden rounded-2xl text-white shadow-xl backdrop-blur-2xl border",r??"bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10","sm"===g&&"text-sm","md"===g&&"text-base","lg"===g&&"text-lg",i),children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 pt-3 pb-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e&&(0,d.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-white/15 text-white",children:(0,d.jsx)(o,{className:"h-5 w-5","aria-hidden":!0})}),(0,d.jsx)("div",{className:"min-w-0 flex-1",children:(0,d.jsx)("p",{className:"font-medium truncate text-white/90",children:a})})]}),j?(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),j()},className:"p-1.5 rounded-lg shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})}):(0,d.jsx)("div",{className:"shrink-0 rounded-full p-1 text-white/50 hover:text-white/70","aria-label":"Info",children:(0,d.jsx)(aR.A,{className:"h-4 w-4","aria-hidden":!0})})]}),(0,d.jsx)("div",{className:"px-4 pb-4 pt-0 flex flex-col gap-2",children:(0,d.jsxs)("div",{className:"flex items-baseline gap-2 flex-wrap",children:[(0,d.jsx)("span",{className:(0,f.cn)("font-bold tabular-nums text-white","sm"===g&&"text-2xl","md"===g&&"text-3xl","lg"===g&&"text-4xl"),children:p}),n&&(0,d.jsx)("span",{className:"inline-flex items-center rounded-md bg-emerald-500/20 px-2 py-0.5 text-xs font-medium text-emerald-300/95",children:n})]})})]})}let aX={sm:180,md:260,lg:320};function aY({widgetId:a,widgetIndex:b=0,title:c,entity_id:e,icon:g,show_icon:i=!0,size:j="md",conditions:k,editMode:l=!1,onRemove:m,onEdit:n,onEnterEditMode:o}){let p=aX[j??"md"],[q,r]=(0,h.useState)(()=>({left:100,bottom:24})),[s,t]=(0,h.useState)(!1),u=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let v=(0,h.useRef)(null),w=(0,h.useCallback)(()=>{null!=v.current&&(clearTimeout(v.current),v.current=null)},[]),x=(0,h.useCallback)(a=>{!l&&o&&(w(),a.currentTarget.setPointerCapture?.(a.pointerId),v.current=setTimeout(()=>{v.current=null,o()},500))},[l,o,w]),y=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),w()},[w]),A=(0,h.useCallback)(a=>{l&&(a.target.closest?.("button")||(a.preventDefault(),t(!0),u.current={x:a.clientX,y:a.clientY,left:q.left,bottom:q.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[q,l]),B=(0,h.useCallback)(a=>{if(!s)return;let b=a.clientX-u.current.x,c=a.clientY-u.current.y;r(z({left:Math.max(0,Math.min(u.current.left+b,400)),bottom:Math.max(0,Math.min(u.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[s,p]),C=(0,h.useCallback)(a=>{if(s){t(!1);let b=a.clientX-u.current.x,c=a.clientY-u.current.y;r(z({left:Math.max(0,Math.min(u.current.left+b,400)),bottom:Math.max(0,Math.min(u.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[s,p,a]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",l&&"cursor-grab touch-none active:cursor-grabbing",l&&!s&&"animate-edit-wiggle"),style:{width:p,left:q.left,bottom:q.bottom,...!l&&o?{touchAction:"none"}:{}},...!l&&o&&{onPointerDown:x,onPointerUp:y,onPointerLeave:y,onPointerCancel:y},...l&&{onPointerDown:A,onPointerMove:B,onPointerUp:C,onPointerLeave:a=>{s&&C(a)},onPointerCancel:C},children:(0,d.jsx)("div",{className:(0,f.cn)(l&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(aW,{title:c,entity_id:e,icon:g,show_icon:i,size:j,conditions:k,onMoreClick:l?n:void 0})})})}let aZ={red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30",amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",green:"border-green-400/50 dark:border-green-400/40 bg-green-500/25 dark:bg-green-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",blue:"border-blue-400/50 dark:border-blue-400/40 bg-blue-500/25 dark:bg-blue-900/30",violet:"border-violet-400/50 dark:border-violet-400/40 bg-violet-500/25 dark:bg-violet-900/30",slate:"border-slate-400/50 dark:border-slate-400/40 bg-slate-500/25 dark:bg-slate-900/30"};Object.keys(aZ);let a$=["switch","light","input_boolean"],a_={on:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",off:"border-white/10 dark:border-white/10 bg-white/5 dark:bg-black/40 opacity-90",neutral:"bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10"};function a0({title:a="Pill",entity_id:b,icon:c,conditions:e,show_state:g=!0,className:h,onMoreClick:i}){let j=(0,k.j)(a=>a.getState(b)),l=(0,k.j)(a=>a.setStates),m=j?.state,n=j?.attributes?.unit_of_measurement??"",o=b.split(".")[0]??"",p=a$.includes(o),q="on"===m,r=c&&ar[c]?ar[c]:ar.CircleDot,s=p?q?"Aan":"Uit":function(a){if(null==a||"unavailable"===a||"unknown"===a)return"—";let b=Number(a);return Number.isNaN(b)?(0,f.N)(a):Number.isInteger(b)?String(b):String(Math.round(100*b)/100)}(m),t=function(a,b){if(null==a||"unavailable"===a||"unknown"===a||!b?.length)return null;let c=Number(a),d=!Number.isNaN(c);for(let e of b){let b=e.value.trim();if(!b)continue;let f=Number(b),g=""!==b&&!Number.isNaN(f);if(d&&g)switch(e.operator){case"gt":if(c>f)return e.color;break;case"gte":if(c>=f)return e.color;break;case"lt":if(c<f)return e.color;break;case"lte":if(c<=f)return e.color;break;case"eq":if(c===f)return e.color;break;case"neq":if(c!==f)return e.color}else{let h=String(a).toLowerCase(),i=b.toLowerCase();switch(e.operator){case"eq":if(h===i)return e.color;break;case"neq":if(h!==i)return e.color;break;case"contains":if(h.includes(i)||i.includes(h))return e.color;break;case"gt":case"gte":case"lt":case"lte":if(d&&g&&("gt"===e.operator&&c>f||"gte"===e.operator&&c>=f||"lt"===e.operator&&c<f||"lte"===e.operator&&c<=f))return e.color}}}return null}(m,e),u=t&&aZ[t]?aZ[t]:p?q?a_.on:a_.off:a_.neutral;async function v(a){if(a.stopPropagation(),!p)return;let c=!q;try{if((await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:b,domain:o,service:c?"turn_on":"turn_off",service_data:{entity_id:b}})})).ok){let a=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(a)&&l(a)}}catch{}}let w=!g;return(0,d.jsxs)("div",{className:(0,f.cn)("flex items-center h-9 rounded-full border text-sm font-medium shadow-lg backdrop-blur-xl text-white min-w-0 transition-colors duration-200",u,p&&"cursor-pointer hover:opacity-90 transition-opacity",w?i?"relative w-12 h-9 px-1.5 justify-center shrink-0":"relative w-9 h-9 p-0 justify-center shrink-0":"gap-2 pl-0.5 pr-3",h),...p&&{onClick:v,role:"button","aria-pressed":q},title:w?`${a}${null!=m&&"unavailable"!==m?`: ${s}`:""}`:void 0,children:[(0,d.jsx)("div",{className:(0,f.cn)("shrink-0 items-center justify-center rounded-full bg-white/15 text-white flex","h-7 w-7"),children:(0,d.jsx)(r,{className:"h-4 w-4","aria-hidden":!0})}),!w&&(0,d.jsxs)("div",{className:"min-w-0 flex-1 flex items-center gap-2",children:[(0,d.jsx)("span",{className:"truncate text-white/95",children:a}),(0,d.jsxs)("span",{className:"tabular-nums text-white shrink-0",children:[s,n&&!p&&(0,d.jsx)("span",{className:"text-white/70 ml-0.5",children:n})]})]}),i&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),i()},className:(0,f.cn)("rounded-full shrink-0 text-white/70 hover:text-white hover:bg-white/10 transition-colors",w?"absolute -right-0.5 -top-0.5 p-0.5":"p-1"),"aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-4 w-4","aria-hidden":!0})})]})}function a1({widget:a,widgetIndex:b=0,editMode:c=!1,onRemove:e,onEdit:g,onEnterEditMode:i}){let[j,k]=(0,h.useState)(()=>(a.id,{left:0,bottom:24})),[l,m]=(0,h.useState)(!1),n=(0,h.useRef)({x:0,y:0,left:0,bottom:0,width:280,height:80});(0,h.useRef)(!1);let o=(0,h.useRef)(null),p=(0,h.useCallback)(()=>{null!=o.current&&(clearTimeout(o.current),o.current=null)},[]),q=(0,h.useCallback)(a=>{!c&&i&&(p(),a.currentTarget.setPointerCapture?.(a.pointerId),o.current=setTimeout(()=>{o.current=null,i()},500))},[c,i,p]),r=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),p()},[p]),s=(0,h.useCallback)(a=>{if(!c||a.target.closest?.("button"))return;a.preventDefault();let b=a.currentTarget,d=b.offsetWidth,e=b.offsetHeight;m(!0),n.current={x:a.clientX,y:a.clientY,left:j.left,bottom:j.bottom,width:d,height:e},b.setPointerCapture?.(a.pointerId)},[j,c]),t=(0,h.useCallback)(a=>{if(!l)return;let b=a.clientX-n.current.x,c=a.clientY-n.current.y,d=Math.max(0,400-n.current.width),e=Math.max(0,400-n.current.height);k(z({left:Math.max(0,Math.min(n.current.left+b,d)),bottom:Math.max(0,Math.min(n.current.bottom-c,e))},{maxLeft:d,maxBottom:e}))},[l]),u=(0,h.useCallback)(b=>{if(l){m(!1);let c=b.clientX-n.current.x,d=b.clientY-n.current.y,e=Math.max(0,400-n.current.width),f=Math.max(0,400-n.current.height);k(z({left:Math.max(0,Math.min(n.current.left+c,e)),bottom:Math.max(0,Math.min(n.current.bottom-d,f))},{maxLeft:e,maxBottom:f})),a.id}b.currentTarget.releasePointerCapture?.(b.pointerId)},[l,a.id]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 w-max max-w-[280px] shadow-xl rounded-2xl overflow-hidden bg-transparent",c&&"cursor-grab touch-none active:cursor-grabbing",c&&!l&&"animate-edit-wiggle"),style:{left:j.left,bottom:j.bottom,...!c&&i?{touchAction:"none"}:{}},...!c&&i&&{onPointerDown:q,onPointerUp:r,onPointerLeave:r,onPointerCancel:r},...c&&{onPointerDown:s,onPointerMove:t,onPointerUp:u,onPointerLeave:a=>{l&&u(a)},onPointerCancel:u},children:(0,d.jsx)("div",{className:(0,f.cn)(c&&"[&>div]:rounded-2xl [&>div]:shadow-none"),children:(0,d.jsx)(a0,{title:a.title,entity_id:a.entity_id,icon:a.icon,conditions:a.conditions,show_state:!1!==a.show_state,onMoreClick:c?g:void 0})})})}let a2={start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between"};function a3({group:a,widgetIndex:b=0,editMode:c=!1,onRemove:e,onEdit:g,onEnterEditMode:i}){let j=a.alignment??"start",k=a.children??[],[l,m]=(0,h.useState)(()=>(a.id,{left:0,bottom:24})),[n,o]=(0,h.useState)(!1),p=(0,h.useRef)({x:0,y:0,left:0,bottom:0,width:200,height:80});(0,h.useRef)(!1);let q=(0,h.useRef)(null),r=(0,h.useCallback)(()=>{null!=q.current&&(clearTimeout(q.current),q.current=null)},[]),s=(0,h.useCallback)(a=>{!c&&i&&(r(),a.currentTarget.setPointerCapture?.(a.pointerId),q.current=setTimeout(()=>{q.current=null,i()},500))},[c,i,r]),t=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),r()},[r]),u=(0,h.useCallback)(a=>{if(!c||a.target.closest?.("[data-group-opts]"))return;a.preventDefault();let b=a.currentTarget;p.current={x:a.clientX,y:a.clientY,left:l.left,bottom:l.bottom,width:b.offsetWidth,height:b.offsetHeight},b.setPointerCapture?.(a.pointerId),o(!0)},[l,c]),v=(0,h.useCallback)(a=>{if(!n)return;let b=a.clientX-p.current.x,c=a.clientY-p.current.y,d=400-p.current.width,e=400-p.current.height;m(z({left:Math.max(-24,Math.min(p.current.left+b,d)),bottom:Math.max(-24,Math.min(p.current.bottom-c,e))},{maxLeft:d,maxBottom:e,minLeft:-24,minBottom:-24}))},[n]),w=(0,h.useCallback)(b=>{if(n){o(!1);let c=b.clientX-p.current.x,d=b.clientY-p.current.y,e=400-p.current.width,f=400-p.current.height;m(z({left:Math.max(-24,Math.min(p.current.left+c,e)),bottom:Math.max(-24,Math.min(p.current.bottom-d,f))},{maxLeft:e,maxBottom:f,minLeft:-24,minBottom:-24})),a.id}b.currentTarget.releasePointerCapture?.(b.pointerId)},[n,a.id]);return(0,d.jsxs)("div",{className:(0,f.cn)("fixed z-30 w-max max-w-[90vw] shadow-xl rounded-2xl overflow-hidden relative",c&&"bg-white/10 dark:bg-black/50 backdrop-blur-xl border border-white/20 dark:border-white/10 cursor-grab touch-none active:cursor-grabbing",c&&!n&&"animate-edit-wiggle"),style:{left:l.left,bottom:l.bottom,...!c&&i?{touchAction:"none"}:{}},...!c&&i&&{onPointerDown:s,onPointerUp:t,onPointerLeave:t,onPointerCancel:t},...c&&{onPointerDown:u,onPointerMove:v,onPointerUp:w,onPointerLeave:a=>{n&&w(a)},onPointerCancel:w},children:[c&&g&&(0,d.jsx)("button",{type:"button","data-group-opts":!0,onClick:a=>{a.stopPropagation(),g()},className:"absolute right-2 top-2 z-10 p-1.5 rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-colors","aria-label":"Opties",title:"Bewerken of verwijderen",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,d.jsxs)("div",{className:(0,f.cn)("flex flex-wrap items-center gap-2 p-2 min-h-[52px]",a2[j]??"justify-start"),children:[k.filter(a=>"pill_card"===a.type).map(a=>(0,d.jsx)(a0,{title:a.title??"Pill",entity_id:a.entity_id??"",icon:a.icon,conditions:a.conditions,show_state:!1!==a.show_state,onMoreClick:void 0},a.id)),c&&0===k.length&&(0,d.jsx)("button",{type:"button","data-group-opts":!0,onClick:a=>{a.stopPropagation(),g?.()},className:"text-sm text-white/60 hover:text-white/90 border border-dashed border-white/30 rounded-lg px-3 py-2",children:"+ Kaart toevoegen"})]})]})}function a4({widgets:a,title:b,entity_id:c,editMode:e=!1,onRemove:g,onEdit:i,onEnterEditMode:j}){let k=a??(null!=b&&null!=c?[{id:"",title:b,entity_id:c,type:"climate_card_2"}]:[]),l=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(500,Math.max(200,Math.round(b))):320}(k[0]?.width),m=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(400,Math.max(100,Math.round(b))):180}(k[0]?.height),[n,o]=(0,h.useState)(0),[p,q]=(0,h.useState)(0),[r,s]=(0,h.useState)(null),t=(0,h.useRef)(null),u=(0,h.useRef)(null),v=(0,h.useCallback)(()=>{null!=t.current&&(clearTimeout(t.current),t.current=null)},[]),w=(0,h.useCallback)(a=>{!e&&j&&(a.target.closest?.("[data-climate-swipe-area]")||(v(),a.currentTarget.setPointerCapture?.(a.pointerId),t.current=setTimeout(()=>{t.current=null,j()},500)))},[e,j,v]),x=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),v()},[v]);k[n]??k[0];let y=k.length>1,A=(0,h.useCallback)(a=>{a===n||a<0||a>=k.length||o(a)},[n,k.length]),[B,C]=(0,h.useState)(()=>({left:0,bottom:24})),[D,E]=(0,h.useState)(!1),F=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let G=(0,h.useRef)(null),H=(0,h.useCallback)(a=>{e&&(a.target.closest?.("button")||(a.preventDefault(),E(!0),F.current={x:a.clientX,y:a.clientY,left:B.left,bottom:B.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[B,e]),I=(0,h.useCallback)(a=>{if(!D)return;let b=a.clientX-F.current.x,c=a.clientY-F.current.y;C(z({left:Math.max(0,Math.min(F.current.left+b,400)),bottom:Math.max(0,Math.min(F.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[D,400,400]),J=(0,h.useCallback)(a=>{if(D){E(!1);let b=a.clientX-F.current.x,c=a.clientY-F.current.y;C(z({left:Math.max(0,Math.min(F.current.left+b,400)),bottom:Math.max(0,Math.min(F.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[D,400,400]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 flex shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl",e&&"cursor-grab touch-none active:cursor-grabbing",e&&!D&&"animate-edit-wiggle"),style:{left:B.left,bottom:B.bottom,width:l,height:m,...!e&&j?{touchAction:"none"}:{}},...!e&&j&&{onPointerDown:w,onPointerUp:x,onPointerLeave:x,onPointerCancel:x},...e&&{onPointerDown:H,onPointerMove:I,onPointerUp:J,onPointerLeave:a=>{D&&J(a)},onPointerCancel:J},children:(0,d.jsx)("div",{className:"flex flex-col min-w-0 flex-1 w-full h-full",children:(0,d.jsxs)("div",{"data-climate-swipe-area":!0,className:(0,f.cn)(e&&"[&>div]:rounded-t-none [&>div]:shadow-none [&_.rounded-2xl]:rounded-b-none","relative overflow-hidden",y&&"touch-none"),style:{touchAction:y?"none":void 0,perspective:"1000px",minHeight:m},onPointerDown:y?a=>{!e&&(G.current={x:a.clientX,y:a.clientY},a.currentTarget.setPointerCapture?.(a.pointerId),j&&(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{u.current=null,j()},500)))}:void 0,onPointerMove:y?a=>{if(G.current&&!e){let b=a.clientX-G.current.x,c=a.clientY-G.current.y;(Math.abs(b)>15||Math.abs(c)>15)&&(u.current&&(clearTimeout(u.current),u.current=null),Math.abs(b)>Math.abs(c)&&a.preventDefault())}}:void 0,onPointerUp:y?a=>{if(u.current&&(clearTimeout(u.current),u.current=null),!G.current||e)return;let b=a.clientX-G.current.x,c=a.clientY-G.current.y;Math.abs(b)>50&&Math.abs(b)>Math.abs(c)&&(b>0?A(n-1):A(n+1)),G.current=null,a.currentTarget.releasePointerCapture?.(a.pointerId)}:void 0,onPointerCancel:y?a=>{u.current&&(clearTimeout(u.current),u.current=null),G.current=null,a.currentTarget.releasePointerCapture?.(a.pointerId)}:void 0,onPointerLeave:y?()=>{u.current&&(clearTimeout(u.current),u.current=null)}:void 0,children:[(0,d.jsx)("div",{className:"relative w-full overflow-hidden",style:{minHeight:m},children:(0,d.jsx)("div",{className:"flex w-full h-full",style:{width:y?`${100*k.length}%`:"100%",transform:y?`translateX(-${n*(100/k.length)}%)`:"none",transition:"transform 280ms ease-out"},children:k.map((a,b)=>(0,d.jsx)("div",{className:"shrink-0 w-full",style:y?{width:`${100/k.length}%`}:void 0,children:(0,d.jsx)(av,{title:a.title,entity_id:a.entity_id,humidity_entity_id:a.humidity_entity_id,icon:a.icon,size:"md",onMoreClick:e?()=>a.id&&i?.(a.id):void 0})},a.id))})}),y&&(0,d.jsx)("div",{className:"absolute bottom-1 left-0 right-0 flex justify-center gap-1.5 pointer-events-none",children:k.map((a,b)=>(0,d.jsx)("span",{className:(0,f.cn)("h-1.5 w-1.5 rounded-full transition-colors duration-300",b===n?"bg-white":"bg-white/40"),"aria-hidden":!0},b))})]})})})}function a5({title:a,className:b}){return(0,d.jsx)("div",{className:(0,f.cn)("flex w-full items-center py-1",b),"aria-hidden":!0,children:(0,d.jsx)("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 truncate w-full",children:a})})}function a6({widgets:a,editMode:b=!1,onRemove:c,onEdit:e,onEnterEditMode:g}){let[i,j]=(0,h.useState)(()=>({left:0,bottom:24})),[k,l]=(0,h.useState)(!1),m=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let n=(0,h.useRef)(null),o=(0,h.useCallback)(()=>{null!=n.current&&(clearTimeout(n.current),n.current=null)},[]),p=(0,h.useCallback)(a=>{!b&&g&&(o(),a.currentTarget.setPointerCapture?.(a.pointerId),n.current=setTimeout(()=>{n.current=null,g()},500))},[b,g,o]),q=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),o()},[o]),r=(0,h.useCallback)(a=>{b&&(a.target.closest?.("button")||(a.preventDefault(),l(!0),m.current={x:a.clientX,y:a.clientY,left:i.left,bottom:i.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[i,b]),s=(0,h.useCallback)(a=>{if(!k)return;let b=a.clientX-m.current.x,c=a.clientY-m.current.y;j(z({left:Math.max(0,Math.min(m.current.left+b,400)),bottom:Math.max(0,Math.min(m.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[k,400]),t=(0,h.useCallback)(a=>{if(k){l(!1);let b=a.clientX-m.current.x,c=a.clientY-m.current.y;j(z({left:Math.max(0,Math.min(m.current.left+b,400)),bottom:Math.max(0,Math.min(m.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[k,400]);return 0===a.length?null:(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 flex flex-col",b&&"cursor-grab touch-none active:cursor-grabbing",b&&!k&&"animate-edit-wiggle"),style:{left:i.left,bottom:i.bottom,width:200,...!b&&g?{touchAction:"none"}:{}},...!b&&g&&{onPointerDown:p,onPointerUp:q,onPointerLeave:q,onPointerCancel:q},...b&&{onPointerDown:r,onPointerMove:s,onPointerUp:t,onPointerLeave:a=>{k&&t(a)},onPointerCancel:t},children:(0,d.jsx)("div",{className:"p-2 flex flex-col gap-1 max-h-[40vh] overflow-auto",children:a.map(a=>(0,d.jsxs)("div",{className:"flex items-center gap-2 py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-200",children:[(0,d.jsx)("span",{className:"truncate flex-1 min-w-0",children:a.title||"Titel"}),b&&e&&(0,d.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),e(a.id)},className:"shrink-0 p-1.5 rounded-md text-gray-500 hover:bg-gray-200 dark:hover:bg-white/10 dark:text-gray-400","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-4 w-4"})})]},a.id))})})}function a7({title:a="Kamer",entity_id:b,icon:c="Home",light_entity_id:e,background_image:g,icon_background_color:i,width:l,height:m,className:n,embedded:o,onMoreClick:p}){let q=(0,k.j)(a=>b?a.getState(b):null),r=(0,k.j)(a=>e?a.getState(e):null),s=(0,k.j)(a=>a.setStates),t=(0,k.j)(a=>a.updateEntityState),[u,v]=(0,h.useState)(!1),w=r?.state==="on",x=(0,h.useCallback)(async()=>{let a=await fetch("/api/ha/state").then(a=>a.json());Array.isArray(a)&&s(a)},[s]),y=(0,h.useCallback)(async()=>{if(e){v(!0);try{(await fetch("/api/ha/call-service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:e,domain:"light",service:w?"turn_off":"turn_on",service_data:w?void 0:{brightness_pct:100}})})).ok&&(t(e,{state:w?"off":"on"}),await x())}finally{v(!1)}}},[e,w,t,x]),z=ar[c]??ar.Home,A=!!b?.trim(),B=Math.min((l??280)/280,(m??120)/120,2),C=Math.round(130*B),D=Math.round(52*B),E=A?function(a,b){if(null==a||"unavailable"===a||"unknown"===a)return"—";let c=Number(a);if(!Number.isNaN(c)){let a=b?.unit??"";return Number.isInteger(c)?`${c}${a?` ${a}`:""}`:`${Math.round(100*c)/100}${a?` ${a}`:""}`}return String(a)}(q?.state,q?.attributes):null;return(0,d.jsxs)("div",{className:(0,f.cn)("relative flex h-full w-full min-h-0 overflow-hidden rounded-2xl",o?"bg-transparent":"bg-white/10 dark:bg-black/50 shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10",!o&&!A&&"border-2 border-dashed border-gray-300 dark:border-white/20",n),style:null!=m?{minHeight:m}:void 0,children:[g&&(0,d.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-50",style:{backgroundImage:`url(${g})`},"aria-hidden":!0}),(0,d.jsx)("div",{className:"absolute left-0 bottom-0 translate-x-[-20%] translate-y-[20%] flex items-center justify-center rounded-full text-white shadow-lg",style:{backgroundColor:i||"#3B82F6",width:C,height:C},"aria-hidden":!0,children:(0,d.jsx)("span",{className:"flex items-center justify-center",style:{width:D,height:D},children:(0,d.jsx)(z,{className:"h-full w-full","aria-hidden":!0})})}),(0,d.jsx)("div",{className:"relative flex min-w-0 flex-1 flex-col",children:(0,d.jsxs)("div",{className:"flex flex-1 flex-col items-end justify-between min-w-0 px-4 pt-3 pb-3 text-right min-h-0",style:{paddingLeft:Math.max(24,.35*C)},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 w-full justify-end min-w-0 shrink-0",children:[(0,d.jsxs)("div",{className:"min-w-0 flex-1 flex flex-col items-end",children:[(0,d.jsx)("p",{className:(0,f.cn)("text-base font-medium truncate w-full",o?"text-gray-900 dark:text-white/90":"text-gray-900 dark:text-white"),children:a}),(0,d.jsx)("p",{className:(0,f.cn)("text-xs truncate w-full mt-0.5",o?"text-gray-600 dark:text-white/70":"text-gray-500 dark:text-gray-400"),children:A?E:e?null:"Kies entiteiten in bewerken"})]}),p&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),p()},className:(0,f.cn)("p-1.5 rounded-lg shrink-0 transition-colors",o?"text-gray-500 hover:text-gray-800 hover:bg-black/5 dark:text-white/70 dark:hover:text-white dark:hover:bg-white/10":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-white/10"),"aria-label":"Bewerken",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})})]}),e&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),y()},disabled:u,className:(0,f.cn)("mt-auto flex shrink-0 items-center justify-center rounded-full h-9 w-9 transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400 focus-visible:ring-offset-2 disabled:opacity-70",o?w?"bg-[#FFD41D] text-white":"bg-gray-300 text-gray-600 dark:bg-white/20 dark:text-white/60":w?"bg-[#FFD41D] text-white shadow-sm":"bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-gray-400"),"aria-label":w?"Lamp uitzetten":"Lamp aanzetten",children:(0,d.jsx)(j.A,{className:"h-5 w-5 shrink-0",strokeWidth:1.5,fill:w?"currentColor":"none","aria-hidden":!0})})]})})]})}function a8({widget:a,widgetIndex:b=0,editMode:c=!1,onRemove:e,onEdit:g,onEnterEditMode:i}){let j=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(500,Math.max(200,Math.round(b))):280}(a.width),k=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(300,Math.max(80,Math.round(b))):120}(a.height),[l,m]=(0,h.useState)(()=>(a.id,{left:0,bottom:24})),[n,o]=(0,h.useState)(!1),p=(0,h.useRef)({x:0,y:0,left:0,bottom:0}),q=(0,h.useRef)(!1);(0,h.useRef)(!1);let r=(0,h.useRef)(null),s=(0,h.useCallback)(()=>{null!=r.current&&(clearTimeout(r.current),r.current=null)},[]),t=(0,h.useCallback)(a=>{!c&&i&&(s(),a.currentTarget.setPointerCapture?.(a.pointerId),r.current=setTimeout(()=>{r.current=null,i()},500))},[c,i,s]),u=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),s()},[s]),v=(0,h.useCallback)(a=>{c&&(a.target.closest?.("button")||(q.current=!0,p.current={x:a.clientX,y:a.clientY,left:l.left,bottom:l.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[l,c]),w=(0,h.useCallback)(a=>{if(!q.current)return;if(!n){let b=a.clientX-p.current.x,c=a.clientY-p.current.y;if(!(Math.abs(b)>6||Math.abs(c)>6))return;a.preventDefault(),o(!0)}let b=a.clientX-p.current.x,c=a.clientY-p.current.y;m(z({left:Math.max(0,Math.min(p.current.left+b,400)),bottom:Math.max(0,Math.min(p.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[n,400,400]),x=(0,h.useCallback)(b=>{if(q.current=!1,n){b.preventDefault(),o(!1);let c=b.clientX-p.current.x,d=b.clientY-p.current.y;m(z({left:Math.max(0,Math.min(p.current.left+c,400)),bottom:Math.max(0,Math.min(p.current.bottom-d,400))},{maxLeft:400,maxBottom:400})),a.id}b.currentTarget.releasePointerCapture?.(b.pointerId)},[n,400,400,a.id]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden backdrop-blur-2xl border flex transition-colors duration-200","bg-white/10 dark:bg-black/50 border-white/20 dark:border-white/10",c&&"cursor-grab touch-none active:cursor-grabbing",c&&!n&&"animate-edit-wiggle"),style:{left:l.left,bottom:l.bottom,width:j,minHeight:k,...!c&&i?{touchAction:"none"}:{}},...!c&&i&&{onPointerDown:t,onPointerUp:u,onPointerLeave:u,onPointerCancel:u},...c&&{onPointerDown:v,onPointerMove:w,onPointerUp:x,onPointerLeave:a=>{q.current=!1,n&&x(a)},onPointerCancel:x},children:(0,d.jsx)("div",{className:(0,f.cn)("shrink-0 flex flex-col w-full",c&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(a7,{title:a.title,entity_id:a.entity_id,icon:a.icon,light_entity_id:a.light_entity_id,background_image:a.background_image,icon_background_color:a.icon_background_color,width:j,height:k,embedded:!0,onMoreClick:c?g:void 0})})})}function a9(a){let b=(0,k.j)(b=>b.getState(a));if(!b)return{value:void 0,unit:""};let c=b.state;return{value:null!=c&&"unavailable"!==c&&"unknown"!==c?Number(c):void 0,unit:b.attributes?.unit_of_measurement??""}}function ba(a,b){if(null==a||Number.isNaN(a))return"—";let c=Math.round(100*a)/100;return b?`${c} ${b}`:String(c)}function bb({title:a="Gas",entity_id:b,current_entity_id:c,icon:e="Fuel",icon_background_color:g,max_value:h=10,className:i,onMoreClick:j}){let k=a9(b),l=a9(c??""),m=l.value??0,n=k.value??0,o=k.unit||l.unit||"",p=h>0?Math.min(100,m/h*100):0,q=ar[e]??ar.Fuel,r=g&&/^#[0-9A-Fa-f]{6}$/.test(g)?g:"#3B82F6";return(0,d.jsxs)("div",{className:(0,f.cn)("flex w-full flex-1 min-h-0 overflow-hidden rounded-2xl min-h-[130px]","bg-white/10 dark:bg-black/50 text-gray-900 dark:text-white shadow-xl backdrop-blur-2xl border border-white/20 dark:border-white/10",i),children:[(0,d.jsxs)("div",{className:"flex flex-1 min-w-0 flex-col p-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,d.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,d.jsx)("div",{className:"flex shrink-0 items-center justify-center h-10 w-10 rounded-xl",style:{backgroundColor:`${r}20`,color:r},children:(0,d.jsx)(q,{className:"h-5 w-5","aria-hidden":!0})}),(0,d.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white truncate max-w-full",children:a})]}),j&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),j()},className:"p-1.5 rounded-lg shrink-0 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-5 w-5","aria-hidden":!0})})]}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-white/70 tabular-nums mt-1",children:[ba(m,o)," • ",ba(n,o)]})]}),(0,d.jsx)("div",{className:"relative shrink-0 self-center w-5 h-[110px] my-3 mx-2 bg-white/20 dark:bg-white/10 rounded-full overflow-hidden",children:(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0 rounded-full transition-all duration-300",style:{height:`${p}%`,minHeight:4*(p>0),backgroundColor:r}})})]})}function bc({widget:a,widgetIndex:b=0,editMode:c=!1,onRemove:e,onEdit:g,onEnterEditMode:i}){let j=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(400,Math.max(150,Math.round(b))):250}(a.width),k=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(300,Math.max(80,Math.round(b))):130}(a.height),[l,m]=(0,h.useState)(()=>(a.id,{left:0,bottom:24})),[n,o]=(0,h.useState)(!1),p=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let q=(0,h.useRef)(null),r=(0,h.useCallback)(()=>{null!=q.current&&(clearTimeout(q.current),q.current=null)},[]),s=(0,h.useCallback)(a=>{!c&&i&&(r(),a.currentTarget.setPointerCapture?.(a.pointerId),q.current=setTimeout(()=>{q.current=null,i()},500))},[c,i,r]),t=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),r()},[r]),u=(0,h.useCallback)(a=>{c&&(a.target.closest?.("button")||(a.preventDefault(),o(!0),p.current={x:a.clientX,y:a.clientY,left:l.left,bottom:l.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[l,c]),v=(0,h.useCallback)(a=>{if(!n)return;let b=a.clientX-p.current.x,c=a.clientY-p.current.y;m(z({left:Math.max(0,Math.min(p.current.left+b,400)),bottom:Math.max(0,Math.min(p.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[n,j,k]),w=(0,h.useCallback)(b=>{if(n){o(!1);let c=b.clientX-p.current.x,d=b.clientY-p.current.y;m(z({left:Math.max(0,Math.min(p.current.left+c,400)),bottom:Math.max(0,Math.min(p.current.bottom-d,400))},{maxLeft:400,maxBottom:400})),a.id}b.currentTarget.releasePointerCapture?.(b.pointerId)},[n,a.id,j,k]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-white/10 dark:bg-black/50 backdrop-blur-2xl border border-white/20 dark:border-white/10",c&&"cursor-grab touch-none active:cursor-grabbing",c&&!n&&"animate-edit-wiggle"),style:{left:l.left,bottom:l.bottom,width:j,height:k,...!c&&i?{touchAction:"none"}:{}},...!c&&i&&{onPointerDown:s,onPointerUp:t,onPointerLeave:t,onPointerCancel:t},...c&&{onPointerDown:u,onPointerMove:v,onPointerUp:w,onPointerLeave:a=>{n&&w(a)},onPointerCancel:w},children:(0,d.jsx)("div",{className:(0,f.cn)("flex flex-col h-full min-h-0",c&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(bb,{title:a.title,entity_id:a.entity_id,current_entity_id:a.current_entity_id,icon:a.icon,icon_background_color:a.icon_background_color,max_value:a.max_value,onMoreClick:c?g:void 0})})})}let bd={red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30",amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",green:"border-green-400/50 dark:border-green-400/40 bg-green-500/25 dark:bg-green-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",blue:"border-blue-400/50 dark:border-blue-400/40 bg-blue-500/25 dark:bg-blue-900/30",violet:"border-violet-400/50 dark:border-violet-400/40 bg-violet-500/25 dark:bg-violet-900/30",purple:"border-purple-400/50 dark:border-purple-400/40 bg-purple-500/25 dark:bg-purple-900/30",slate:"border-slate-400/50 dark:border-slate-400/40 bg-slate-500/25 dark:bg-slate-900/30"},be={red:"text-red-600 dark:text-red-300",amber:"text-amber-600 dark:text-amber-400",green:"text-green-600 dark:text-green-300",emerald:"text-emerald-600 dark:text-emerald-300",blue:"text-blue-600 dark:text-blue-300",violet:"text-violet-600 dark:text-violet-300",purple:"text-purple-600 dark:text-purple-300",slate:"text-slate-600 dark:text-slate-300"},bf={amber:"border-amber-400/50 dark:border-amber-400/40 bg-amber-500/25 dark:bg-amber-900/30",purple:"border-purple-400/50 dark:border-purple-400/40 bg-purple-500/25 dark:bg-purple-900/30",emerald:"border-emerald-400/50 dark:border-emerald-400/40 bg-emerald-500/25 dark:bg-emerald-900/30",red:"border-red-400/50 dark:border-red-400/40 bg-red-500/25 dark:bg-red-900/30"},bg={amber:"text-amber-600 dark:text-amber-400",purple:"text-purple-600 dark:text-purple-300",emerald:"text-emerald-600 dark:text-emerald-300",red:"text-red-600 dark:text-red-300"};function bh({title:a="Stat",entity_id:b,label:c,icon:e,color:g="amber",conditions:h,size:i="md",className:j,onMoreClick:l}){let m=(0,k.j)(a=>a.states[b]);(0,k.j)(a=>a.updatedAt);let n=m?.state,{display:o}=function(a){let b=(0,k.j)(b=>b.states[a]);(0,k.j)(a=>a.updatedAt);let c=b?.state,d=b?.attributes?.unit_of_measurement??"";if(null==c||"unavailable"===c||"unknown"===c)return{display:"—"};let e=Number(c);if(!Number.isNaN(e)){let a=Math.round(10*e)/10;return{display:d?`${a} ${d}`:String(a)}}let f=String(c);return{display:f.charAt(0).toUpperCase()+f.slice(1)}}(b),p=e&&ar[e]?ar[e]:ar.Sun,q=function(a,b){if(null==a||"unavailable"===a||"unknown"===a||!b?.length)return null;let c=Number(a),d=!Number.isNaN(c);for(let e of b){let b=e.value.trim();if(!b)continue;let f=Number(b),g=""!==b&&!Number.isNaN(f);if(d&&g)switch(e.operator){case"gt":if(c>f)return e.color;break;case"gte":if(c>=f)return e.color;break;case"lt":if(c<f)return e.color;break;case"lte":if(c<=f)return e.color;break;case"eq":if(c===f)return e.color;break;case"neq":if(c!==f)return e.color}else{let h=String(a).toLowerCase(),i=b.toLowerCase();switch(e.operator){case"eq":if(h===i)return e.color;break;case"neq":if(h!==i)return e.color;break;case"contains":if(h.includes(i)||i.includes(h))return e.color;break;case"gt":case"gte":case"lt":case"lte":if(d&&g&&("gt"===e.operator&&c>f||"gte"===e.operator&&c>=f||"lt"===e.operator&&c<f||"lte"===e.operator&&c<=f))return e.color}}}return null}(n,h),r=q&&bd[q]?bd[q]:bf[g],s=q&&be[q]?be[q]:bg[g],t=(0,f.cn)("h-3.5 w-3.5 shrink-0",s);return(0,d.jsxs)("div",{className:(0,f.cn)("relative flex items-center justify-center p-4","sm"===i&&"text-sm","md"===i&&"text-base","lg"===i&&"text-lg",j),children:[(0,d.jsxs)("div",{className:(0,f.cn)("inline-flex items-center gap-2 rounded-full border backdrop-blur-xl shadow-lg px-3 py-1.5","text-gray-900 dark:text-white",r),children:[(0,d.jsx)(p,{className:t,"aria-hidden":!0}),(0,d.jsxs)("div",{className:"flex flex-col items-start gap-0.5",children:[(0,d.jsx)("span",{className:"text-xs font-bold tabular-nums leading-none text-inherit",children:o}),(0,d.jsx)("span",{className:"text-[9px] font-medium leading-none opacity-80",children:c??a})]})]}),l&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),l()},className:"absolute right-2 bottom-2 p-1.5 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-900/5 dark:hover:bg-white/10 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-4 w-4","aria-hidden":!0})})]})}function bi({widgetId:a,widgetIndex:b=0,title:c,entity_id:e,label:g,icon:i,color:j="amber",conditions:k,size:l="md",editMode:m=!1,onRemove:n,onEdit:o,onEnterEditMode:p}){let[q,r]=(0,h.useState)(()=>({left:0,bottom:0})),[s,t]=(0,h.useState)(!1),u=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let v=(0,h.useRef)(null),w=(0,h.useCallback)(()=>{null!=v.current&&(clearTimeout(v.current),v.current=null)},[]),x=(0,h.useCallback)(a=>{!m&&p&&(w(),a.currentTarget.setPointerCapture?.(a.pointerId),v.current=setTimeout(()=>{v.current=null,p()},500))},[m,p,w]),y=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),w()},[w]),A=(0,h.useCallback)(a=>{m&&(a.target.closest?.("button")||(a.preventDefault(),t(!0),u.current={x:a.clientX,y:a.clientY,left:q.left,bottom:q.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[q,m]),B=(0,h.useCallback)(a=>{if(!s)return;let b=a.clientX-u.current.x,c=a.clientY-u.current.y;r(z({left:Math.max(0,Math.min(u.current.left+b,400)),bottom:Math.max(0,Math.min(u.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[s]),C=(0,h.useCallback)(a=>{if(s){t(!1);let b=a.clientX-u.current.x,c=a.clientY-u.current.y;r(z({left:Math.max(0,Math.min(u.current.left+b,400)),bottom:Math.max(0,Math.min(u.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[s,a]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 w-[260px] overflow-visible bg-transparent",m&&"cursor-grab touch-none active:cursor-grabbing",m&&!s&&"animate-edit-wiggle"),style:{left:q.left,bottom:q.bottom,...!m&&p?{touchAction:"none"}:{}},...!m&&p&&{onPointerDown:x,onPointerUp:y,onPointerLeave:y,onPointerCancel:y},...m&&{onPointerDown:A,onPointerMove:B,onPointerUp:C,onPointerLeave:a=>{s&&C(a)},onPointerCancel:C},children:(0,d.jsx)("div",{className:(0,f.cn)(m&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(bh,{title:c,entity_id:e,label:g,icon:i,color:j,conditions:k,size:l,onMoreClick:m?o:void 0})})})}Object.keys(bd);var bj=c(87278),bk=c(25345);function bl({title:a="Camera",entity_id:b,size:c="md",refresh:e=10,show_title:g=!0,className:i,onMoreClick:j}){let l=(0,k.j)(a=>a.getState(b)),m=l?.attributes?.friendly_name??b,[n,o]=(0,h.useState)(0),p=b?`/api/ha/camera-image?entity_id=${encodeURIComponent(b)}&t=${n}`:null;return(0,d.jsxs)("div",{className:(0,f.cn)("flex flex-col overflow-hidden rounded-2xl bg-black/80 dark:bg-black/90 text-white shadow-xl border border-white/20 dark:border-white/10","sm"===c&&"text-sm","md"===c&&"text-base","lg"===c&&"text-lg",i),children:[(0,d.jsxs)("div",{className:"relative flex-1 min-h-0 w-full bg-black overflow-hidden",children:[p?(0,d.jsx)(aD.default,{src:p,alt:a,fill:!0,sizes:"(max-width: 640px) 100vw, 640px",className:"object-cover",unoptimized:!0}):(0,d.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-white/50",children:[(0,d.jsx)(bj.A,{className:"h-12 w-12","aria-hidden":!0}),(0,d.jsx)("span",{className:"sr-only",children:"Geen camera"})]}),(0,d.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:function(){o(a=>a+1)},className:"p-1.5 rounded-lg bg-black/50 hover:bg-black/70 text-white/90 transition-colors","aria-label":"Ververs",children:(0,d.jsx)(bk.A,{className:"h-4 w-4","aria-hidden":!0})}),j&&(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),j()},className:"p-1.5 rounded-lg bg-black/50 hover:bg-black/70 text-white/90 transition-colors","aria-label":"Opties",children:(0,d.jsx)(H.A,{className:"h-4 w-4","aria-hidden":!0})})]})]}),g&&(0,d.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between gap-2 shrink-0",children:[(0,d.jsx)("p",{className:"font-medium truncate text-white/90",children:a}),(0,d.jsx)("p",{className:"text-xs text-white/60 truncate max-w-[40%]",children:m})]})]})}function bm({title:a,entity_id:b,refresh:c=10,show_title:e=!0,width:g,height:i,editMode:j=!1,onRemove:k,onEdit:l,onEnterEditMode:m}){let n=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(600,Math.max(200,Math.round(b))):360}(g),o=function(a){let b=Number(a);return Number.isFinite(b)?Math.min(450,Math.max(150,Math.round(b))):270}(i),[p,q]=(0,h.useState)(()=>({left:0,bottom:0})),[r,s]=(0,h.useState)(!1),t=(0,h.useRef)({x:0,y:0,left:0,bottom:0});(0,h.useRef)(!1);let u=(0,h.useRef)(null),v=(0,h.useCallback)(()=>{null!=u.current&&(clearTimeout(u.current),u.current=null)},[]),w=(0,h.useCallback)(a=>{!j&&m&&(v(),a.currentTarget.setPointerCapture?.(a.pointerId),u.current=setTimeout(()=>{u.current=null,m()},500))},[j,m,v]),x=(0,h.useCallback)(a=>{a.currentTarget.releasePointerCapture?.(a.pointerId),v()},[v]),y=(0,h.useCallback)(a=>{j&&(a.target.closest?.("button")||(a.preventDefault(),s(!0),t.current={x:a.clientX,y:a.clientY,left:p.left,bottom:p.bottom},a.currentTarget.setPointerCapture?.(a.pointerId)))},[p,j]),A=(0,h.useCallback)(a=>{if(!r)return;let b=a.clientX-t.current.x,c=a.clientY-t.current.y;q(z({left:Math.max(0,Math.min(t.current.left+b,400)),bottom:Math.max(0,Math.min(t.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))},[r,400,400]),B=(0,h.useCallback)(a=>{if(r){s(!1);let b=a.clientX-t.current.x,c=a.clientY-t.current.y;q(z({left:Math.max(0,Math.min(t.current.left+b,400)),bottom:Math.max(0,Math.min(t.current.bottom-c,400))},{maxLeft:400,maxBottom:400}))}a.currentTarget.releasePointerCapture?.(a.pointerId)},[r,400,400]);return(0,d.jsx)("div",{className:(0,f.cn)("fixed z-30 shadow-xl rounded-2xl overflow-hidden bg-black/90 backdrop-blur-2xl",j&&"cursor-grab touch-none active:cursor-grabbing",j&&!r&&"animate-edit-wiggle"),style:{left:p.left,bottom:p.bottom,width:n,height:o,...!j&&m?{touchAction:"none"}:{}},...!j&&m&&{onPointerDown:w,onPointerUp:x,onPointerLeave:x,onPointerCancel:x},...j&&{onPointerDown:y,onPointerMove:A,onPointerUp:B,onPointerLeave:a=>{r&&B(a)},onPointerCancel:B},children:(0,d.jsx)("div",{className:(0,f.cn)("flex flex-col h-full min-h-0",j&&"[&>div]:rounded-t-none [&>div]:shadow-none"),children:(0,d.jsx)(bl,{title:a,entity_id:b,refresh:c,show_title:e,size:"md",onMoreClick:j?l:void 0,className:"flex-1 min-h-0"})})})}}};